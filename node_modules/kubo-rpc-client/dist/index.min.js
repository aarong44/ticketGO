(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.KuboRpcClient = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var KuboRpcClient=(()=>{var Cm=Object.create;var Hn=Object.defineProperty;var Im=Object.getOwnPropertyDescriptor;var Bm=Object.getOwnPropertyNames;var Pm=Object.getPrototypeOf,Tm=Object.prototype.hasOwnProperty;var $t=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ue=(e,t)=>{for(var r in t)Hn(e,r,{get:t[r],enumerable:!0})},kc=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Bm(t))!Tm.call(e,o)&&o!==r&&Hn(e,o,{get:()=>t[o],enumerable:!(n=Im(t,o))||n.enumerable});return e};var Mt=(e,t,r)=>(r=e!=null?Cm(Pm(e)):{},kc(t||!e||!e.__esModule?Hn(r,"default",{value:e,enumerable:!0}):r,e)),_m=e=>kc(Hn({},"__esModule",{value:!0}),e);var ll=$t((N6,ul)=>{function Fw(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}ul.exports=Fw});var bn=$t(($6,gl)=>{"use strict";function yl(e,t){for(let r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}function Vw(e,t,r){if(!e||typeof e=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof t=="object"&&(r=t,t=""),t&&(r.code=t);try{return yl(e,r)}catch{r.message=e.message,r.stack=e.stack;let o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(e)),yl(new o,r)}}gl.exports=Vw});var Hh=$t((wB,Vh)=>{"use strict";Vh.exports=e=>{if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}});var Zh=$t((Gh,Wh)=>{"use strict";var ss=Hh(),{hasOwnProperty:qh}=Object.prototype,{propertyIsEnumerable:Vx}=Object,qr=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0}),Hx=Gh,jh={concatArrays:!1,ignoreUndefined:!1},is=e=>{let t=[];for(let r in e)qh.call(e,r)&&t.push(r);if(Object.getOwnPropertySymbols){let r=Object.getOwnPropertySymbols(e);for(let n of r)Vx.call(e,n)&&t.push(n)}return t};function zr(e){return Array.isArray(e)?jx(e):ss(e)?qx(e):e}function jx(e){let t=e.slice(0,0);return is(e).forEach(r=>{qr(t,r,zr(e[r]))}),t}function qx(e){let t=Object.getPrototypeOf(e)===null?Object.create(null):{};return is(e).forEach(r=>{qr(t,r,zr(e[r]))}),t}var zh=(e,t,r,n)=>(r.forEach(o=>{typeof t[o]>"u"&&n.ignoreUndefined||(o in e&&e[o]!==Object.getPrototypeOf(e)?qr(e,o,yc(e[o],t[o],n)):qr(e,o,zr(t[o])))}),e),zx=(e,t,r)=>{let n=e.slice(0,0),o=0;return[e,t].forEach(s=>{let i=[];for(let a=0;a<s.length;a++)qh.call(s,a)&&(i.push(String(a)),s===e?qr(n,o++,s[a]):qr(n,o++,zr(s[a])));n=zh(n,s,is(s).filter(a=>!i.includes(a)),r)}),n};function yc(e,t,r){return r.concatArrays&&Array.isArray(e)&&Array.isArray(t)?zx(e,t,r):!ss(t)||!ss(e)?zr(t):zh(e,t,is(t),r)}Wh.exports=function(...e){let t=yc(zr(jh),this!==Hx&&this||{},jh),r={_:{}};for(let n of e)if(n!==void 0){if(!ss(n))throw new TypeError("`"+n+"` is not an Option Object");r=yc(r,{_:n},t)}return r._}});var bc=$t((vB,np)=>{"use strict";var Wx=typeof navigator<"u"&&navigator.product==="ReactNative";function Zx(){return Wx?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}var Mn=self.URL,rp=Zx(),wc=class{constructor(t="",r=rp){this.super=new Mn(t,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(t){this.super.hash=t}set host(t){this.super.host=t}set hostname(t){this.super.hostname=t}set href(t){this.super.href=t}set password(t){this.super.password=t}set pathname(t){this.super.pathname=t}set port(t){this.super.port=t}set protocol(t){this.super.protocol=t}set search(t){this.super.search=t}set username(t){this.super.username=t}static createObjectURL(t){return Mn.createObjectURL(t)}static revokeObjectURL(t){Mn.revokeObjectURL(t)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function Yx(e){if(typeof e=="string")return new Mn(e).toString();if(!(e instanceof Mn)){let t=e.username&&e.password?`${e.username}:${e.password}@`:"",r=e.auth?e.auth+"@":"",n=e.port?":"+e.port:"",o=e.protocol?e.protocol+"//":"",s=e.host||"",i=e.hostname||"",a=e.search||(e.query?"?"+e.query:""),c=e.hash||"",u=e.pathname||"",f=e.path||u+a;return`${o}${t||r}${s||i+n}${f}${c}`}}np.exports={URLWithLegacySupport:wc,URLSearchParams:self.URLSearchParams,defaultBase:rp,format:Yx}});var ip=$t((CB,sp)=>{"use strict";var{URLWithLegacySupport:op,format:Xx}=bc();sp.exports=(e,t={},r={},n)=>{let o=t.protocol?t.protocol.replace(":",""):"http";o=(r[o]||n||o)+":";let s;try{s=new op(e)}catch{s={}}let i=Object.assign({},t,{protocol:o||s.protocol,host:t.host||s.host});return new op(e,Xx(i)).toString()}});var cp=$t((IB,ap)=>{"use strict";var{URLWithLegacySupport:Jx,format:Qx,URLSearchParams:e1,defaultBase:t1}=bc(),r1=ip();ap.exports={URL:Jx,URLSearchParams:e1,format:Qx,relative:r1,defaultBase:t1}});var L1={};ue(L1,{CID:()=>I,RoutingEventTypes:()=>cc,RoutingMessageType:()=>fc,StrictNoSign:()=>R1,StrictSign:()=>D1,create:()=>N1,createBitswap:()=>tc,createBlock:()=>rc,createBootstrap:()=>nc,createConfig:()=>oc,createDAG:()=>ac,createDHT:()=>uc,createDiag:()=>lc,createFiles:()=>hc,createKey:()=>pc,createKuboRPCClient:()=>N1,createLog:()=>Sc,createName:()=>Ac,createObject:()=>vc,createPin:()=>Cc,createPubsub:()=>Ic,createRefs:()=>Bc,createRepo:()=>Pc,createRouting:()=>Tc,createStats:()=>_c,createSwarm:()=>Uc,multiaddr:()=>Q,readURLContent:()=>vm,urlSource:()=>k1});function Se(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function ct(e=0){return new Uint8Array(e)}function De(e=0){return new Uint8Array(e)}var Um=Math.pow(2,7),Dm=Math.pow(2,14),Rm=Math.pow(2,21),Ss=Math.pow(2,28),As=Math.pow(2,35),vs=Math.pow(2,42),Cs=Math.pow(2,49),ne=128,Ae=127;function tt(e){if(e<Um)return 1;if(e<Dm)return 2;if(e<Rm)return 3;if(e<Ss)return 4;if(e<As)return 5;if(e<vs)return 6;if(e<Cs)return 7;if(Number.MAX_SAFE_INTEGER!=null&&e>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function Jr(e,t,r=0){switch(tt(e)){case 8:t[r++]=e&255|ne,e/=128;case 7:t[r++]=e&255|ne,e/=128;case 6:t[r++]=e&255|ne,e/=128;case 5:t[r++]=e&255|ne,e/=128;case 4:t[r++]=e&255|ne,e>>>=7;case 3:t[r++]=e&255|ne,e>>>=7;case 2:t[r++]=e&255|ne,e>>>=7;case 1:{t[r++]=e&255,e>>>=7;break}default:throw new Error("unreachable")}return t}function Is(e,t){let r=e[t],n=0;if(n+=r&Ae,r<ne||(r=e[t+1],n+=(r&Ae)<<7,r<ne)||(r=e[t+2],n+=(r&Ae)<<14,r<ne)||(r=e[t+3],n+=(r&Ae)<<21,r<ne)||(r=e[t+4],n+=(r&Ae)*Ss,r<ne)||(r=e[t+5],n+=(r&Ae)*As,r<ne)||(r=e[t+6],n+=(r&Ae)*vs,r<ne)||(r=e[t+7],n+=(r&Ae)*Cs,r<ne))return n;throw new RangeError("Could not decode varint")}function Nm(e,t){let r=e.get(t),n=0;if(n+=r&Ae,r<ne||(r=e.get(t+1),n+=(r&Ae)<<7,r<ne)||(r=e.get(t+2),n+=(r&Ae)<<14,r<ne)||(r=e.get(t+3),n+=(r&Ae)<<21,r<ne)||(r=e.get(t+4),n+=(r&Ae)*Ss,r<ne)||(r=e.get(t+5),n+=(r&Ae)*As,r<ne)||(r=e.get(t+6),n+=(r&Ae)*vs,r<ne)||(r=e.get(t+7),n+=(r&Ae)*Cs,r<ne))return n;throw new RangeError("Could not decode varint")}function Bs(e,t=0){return e instanceof Uint8Array?Is(e,t):Nm(e,t)}function ft(e,t){t==null&&(t=e.reduce((o,s)=>o+s.length,0));let r=De(t),n=0;for(let o of e)r.set(o,n),n+=o.length;return r}var Ds={};ue(Ds,{base10:()=>Vm});var z1=new Uint8Array(0);function Lc(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function qe(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function Oc(e){return new TextEncoder().encode(e)}function Kc(e){return new TextDecoder().decode(e)}function Lm(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<e.length;o++){var s=e.charAt(o),i=s.charCodeAt(0);if(r[i]!==255)throw new TypeError(s+" is ambiguous");r[i]=o}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function l(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var v=0,S=0,m=0,P=p.length;m!==P&&p[m]===0;)m++,v++;for(var b=(P-m)*f+1>>>0,T=new Uint8Array(b);m!==P;){for(var N=p[m],$=0,M=b-1;(N!==0||$<S)&&M!==-1;M--,$++)N+=256*T[M]>>>0,T[M]=N%a>>>0,N=N/a>>>0;if(N!==0)throw new Error("Non-zero carry");S=$,m++}for(var A=b-S;A!==b&&T[A]===0;)A++;for(var C=c.repeat(v);A<b;++A)C+=e.charAt(T[A]);return C}function y(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var v=0;if(p[v]!==" "){for(var S=0,m=0;p[v]===c;)S++,v++;for(var P=(p.length-v)*u+1>>>0,b=new Uint8Array(P);p[v];){var T=r[p.charCodeAt(v)];if(T===255)return;for(var N=0,$=P-1;(T!==0||N<m)&&$!==-1;$--,N++)T+=a*b[$]>>>0,b[$]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");m=N,v++}if(p[v]!==" "){for(var M=P-m;M!==P&&b[M]===0;)M++;for(var A=new Uint8Array(S+(P-M)),C=S;M!==P;)A[C++]=b[M++];return A}}}function B(p){var v=y(p);if(v)return v;throw new Error(`Non-${t} character`)}return{encode:l,decodeUnsafe:y,decode:B}}var Om=Lm,Km=Om,Mc=Km;var Ps=class{name;prefix;baseEncode;constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},Ts=class{name;prefix;baseDecode;prefixCodePoint;constructor(t,r,n){this.name=t,this.prefix=r;let o=r.codePointAt(0);if(o===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=o,this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Fc(this,t)}},_s=class{decoders;constructor(t){this.decoders=t}or(t){return Fc(this,t)}decode(t){let r=t[0],n=this.decoders[r];if(n!=null)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function Fc(e,t){return new _s({...e.decoders??{[e.prefix]:e},...t.decoders??{[t.prefix]:t}})}var Us=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(t,r,n,o){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new Ps(t,r,n),this.decoder=new Ts(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};function ir({name:e,prefix:t,encode:r,decode:n}){return new Us(e,t,r,n)}function Ct({name:e,prefix:t,alphabet:r}){let{encode:n,decode:o}=Mc(r,e);return ir({prefix:t,name:e,encode:n,decode:s=>qe(o(s))})}function $m(e,t,r,n){let o=e.length;for(;e[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),i=0,a=0,c=0;for(let u=0;u<o;++u){let f=t[e[u]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);a=a<<r|f,i+=r,i>=8&&(i-=8,s[c++]=255&a>>i)}if(i>=r||(255&a<<8-i)!==0)throw new SyntaxError("Unexpected end of data");return s}function Mm(e,t,r){let n=t[t.length-1]==="=",o=(1<<r)-1,s="",i=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],i+=8;i>r;)i-=r,s+=t[o&a>>i];if(i!==0&&(s+=t[o&a<<r-i]),n)for(;(s.length*r&7)!==0;)s+="=";return s}function Fm(e){let t={};for(let r=0;r<e.length;++r)t[e[r]]=r;return t}function ae({name:e,prefix:t,bitsPerChar:r,alphabet:n}){let o=Fm(n);return ir({prefix:t,name:e,encode(s){return Mm(s,n,r)},decode(s){return $m(s,o,r,e)}})}var Vm=Ct({prefix:"9",name:"base10",alphabet:"0123456789"});var Rs={};ue(Rs,{base16:()=>Hm,base16upper:()=>jm});var Hm=ae({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),jm=ae({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Ns={};ue(Ns,{base2:()=>qm});var qm=ae({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var ks={};ue(ks,{base256emoji:()=>Ym});var Vc=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),zm=Vc.reduce((e,t,r)=>(e[r]=t,e),[]),Gm=Vc.reduce((e,t,r)=>{let n=t.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${t}`);return e[n]=r,e},[]);function Wm(e){return e.reduce((t,r)=>(t+=zm[r],t),"")}function Zm(e){let t=[];for(let r of e){let n=r.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${r}`);let o=Gm[n];if(o==null)throw new Error(`Non-base256emoji character: ${r}`);t.push(o)}return new Uint8Array(t)}var Ym=ir({prefix:"\u{1F680}",name:"base256emoji",encode:Wm,decode:Zm});var Ls={};ue(Ls,{base32:()=>rt,base32hex:()=>e0,base32hexpad:()=>r0,base32hexpadupper:()=>n0,base32hexupper:()=>t0,base32pad:()=>Jm,base32padupper:()=>Qm,base32upper:()=>Xm,base32z:()=>o0});var rt=ae({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Xm=ae({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Jm=ae({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Qm=ae({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),e0=ae({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),t0=ae({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),r0=ae({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),n0=ae({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),o0=ae({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Os={};ue(Os,{base36:()=>Qr,base36upper:()=>s0});var Qr=Ct({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),s0=Ct({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Ks={};ue(Ks,{base58btc:()=>te,base58flickr:()=>i0});var te=Ct({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),i0=Ct({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var $s={};ue($s,{base64:()=>ar,base64pad:()=>a0,base64url:()=>Ft,base64urlpad:()=>c0});var ar=ae({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),a0=ae({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ft=ae({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),c0=ae({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Ms={};ue(Ms,{base8:()=>f0});var f0=ae({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Fs={};ue(Fs,{identity:()=>u0});var u0=ir({prefix:"\0",name:"identity",encode:e=>Kc(e),decode:e=>Oc(e)});var Vs={};ue(Vs,{code:()=>p0,decode:()=>y0,encode:()=>m0,name:()=>h0});var l0=new TextEncoder,d0=new TextDecoder,h0="json",p0=512;function m0(e){return l0.encode(JSON.stringify(e))}function y0(e){return JSON.parse(d0.decode(e))}var Hs={};ue(Hs,{code:()=>w0,decode:()=>x0,encode:()=>b0,name:()=>g0});var g0="raw",w0=85;function b0(e){return qe(e)}function x0(e){return qe(e)}var qs={};ue(qs,{identity:()=>Pe});var E0=qc,Hc=128,S0=127,A0=~S0,v0=Math.pow(2,31);function qc(e,t,r){t=t||[],r=r||0;for(var n=r;e>=v0;)t[r++]=e&255|Hc,e/=128;for(;e&A0;)t[r++]=e&255|Hc,e>>>=7;return t[r]=e|0,qc.bytes=r-n+1,t}var C0=js,I0=128,jc=127;function js(e,n){var r=0,n=n||0,o=0,s=n,i,a=e.length;do{if(s>=a)throw js.bytes=0,new RangeError("Could not decode varint");i=e[s++],r+=o<28?(i&jc)<<o:(i&jc)*Math.pow(2,o),o+=7}while(i>=I0);return js.bytes=s-n,r}var B0=Math.pow(2,7),P0=Math.pow(2,14),T0=Math.pow(2,21),_0=Math.pow(2,28),U0=Math.pow(2,35),D0=Math.pow(2,42),R0=Math.pow(2,49),N0=Math.pow(2,56),k0=Math.pow(2,63),L0=function(e){return e<B0?1:e<P0?2:e<T0?3:e<_0?4:e<U0?5:e<D0?6:e<R0?7:e<N0?8:e<k0?9:10},O0={encode:E0,decode:C0,encodingLength:L0},K0=O0,en=K0;function tn(e,t=0){return[en.decode(e,t),en.decode.bytes]}function cr(e,t,r=0){return en.encode(e,t,r),t}function fr(e){return en.encodingLength(e)}function nt(e,t){let r=t.byteLength,n=fr(e),o=n+fr(r),s=new Uint8Array(o+r);return cr(e,s,0),cr(r,s,n),s.set(t,o),new ur(e,r,t,s)}function rn(e){let t=qe(e),[r,n]=tn(t),[o,s]=tn(t.subarray(n)),i=t.subarray(n+s);if(i.byteLength!==o)throw new Error("Incorrect length");return new ur(r,o,i,t)}function zc(e,t){if(e===t)return!0;{let r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&Lc(e.bytes,r.bytes)}}var ur=class{code;size;digest;bytes;constructor(t,r,n,o){this.code=t,this.size=r,this.digest=n,this.bytes=o}};var Gc=0,$0="identity",Wc=qe;function M0(e,t){if(t?.truncate!=null&&t.truncate!==e.byteLength){if(t.truncate<0||t.truncate>e.byteLength)throw new Error(`Invalid truncate option, must be less than or equal to ${e.byteLength}`);e=e.subarray(0,t.truncate)}return nt(Gc,Wc(e))}var Pe={code:Gc,name:$0,encode:Wc,digest:M0};var Ws={};ue(Ws,{sha256:()=>nn,sha512:()=>V0});var F0=20;function Gs({name:e,code:t,encode:r,minDigestLength:n,maxDigestLength:o}){return new zs(e,t,r,n,o)}var zs=class{name;code;encode;minDigestLength;maxDigestLength;constructor(t,r,n,o,s){this.name=t,this.code=r,this.encode=n,this.minDigestLength=o??F0,this.maxDigestLength=s}digest(t,r){if(r?.truncate!=null){if(r.truncate<this.minDigestLength)throw new Error(`Invalid truncate option, must be greater than or equal to ${this.minDigestLength}`);if(this.maxDigestLength!=null&&r.truncate>this.maxDigestLength)throw new Error(`Invalid truncate option, must be less than or equal to ${this.maxDigestLength}`)}if(t instanceof Uint8Array){let n=this.encode(t);return n instanceof Uint8Array?Zc(n,this.code,r?.truncate):n.then(o=>Zc(o,this.code,r?.truncate))}else throw Error("Unknown type, must be binary type")}};function Zc(e,t,r){if(r!=null&&r!==e.byteLength){if(r>e.byteLength)throw new Error(`Invalid truncate option, must be less than or equal to ${e.byteLength}`);e=e.subarray(0,r)}return nt(t,e)}function Xc(e){return async t=>new Uint8Array(await crypto.subtle.digest(e,t))}var nn=Gs({name:"sha2-256",code:18,encode:Xc("SHA-256")}),V0=Gs({name:"sha2-512",code:19,encode:Xc("SHA-512")});function Jc(e,t){let{bytes:r,version:n}=e;switch(n){case 0:return j0(r,Zs(e),t??te.encoder);default:return q0(r,Zs(e),t??rt.encoder)}}var Qc=new WeakMap;function Zs(e){let t=Qc.get(e);if(t==null){let r=new Map;return Qc.set(e,r),r}return t}var I=class e{code;version;multihash;bytes;"/";constructor(t,r,n,o){this.code=r,this.version=t,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:t,multihash:r}=this;if(t!==on)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==z0)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return e.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:t,digest:r}=this.multihash,n=nt(t,r);return e.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return e.equals(this,t)}static equals(t,r){let n=r;return n!=null&&t.code===n.code&&t.version===n.version&&zc(t.multihash,n.multihash)}toString(t){return Jc(this,t)}toJSON(){return{"/":Jc(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(t==null)return null;let r=t;if(r instanceof e)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:o,multihash:s,bytes:i}=r;return new e(n,o,s,i??ef(n,o,s.bytes))}else if(r[G0]===!0){let{version:n,multihash:o,code:s}=r,i=rn(o);return e.create(n,s,i)}else return null}static create(t,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:{if(r!==on)throw new Error(`Version 0 CID must use dag-pb (code: ${on}) block encoding`);return new e(t,r,n,n.bytes)}case 1:{let o=ef(t,r,n.bytes);return new e(t,r,n,o)}default:throw new Error("Invalid version")}}static createV0(t){return e.create(0,on,t)}static createV1(t,r){return e.create(1,t,r)}static decode(t){let[r,n]=e.decodeFirst(t);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(t){let r=e.inspectBytes(t),n=r.size-r.multihashSize,o=qe(t.subarray(n,n+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=o.subarray(r.multihashSize-r.digestSize),i=new ur(r.multihashCode,r.digestSize,s,o);return[r.version===0?e.createV0(i):e.createV1(r.codec,i),t.subarray(r.size)]}static inspectBytes(t){let r=0,n=()=>{let[l,y]=tn(t.subarray(r));return r+=y,l},o=n(),s=on;if(o===18?(o=0,r=0):s=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);let i=r,a=n(),c=n(),u=r+c,f=u-i;return{version:o,codec:s,multihashCode:a,digestSize:c,multihashSize:f,size:u}}static parse(t,r){let[n,o]=H0(t,r),s=e.decode(o);if(s.version===0&&t[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Zs(s).set(n,t),s}};function H0(e,t){switch(e[0]){case"Q":{let r=t??te;return[te.prefix,r.decode(`${te.prefix}${e}`)]}case te.prefix:{let r=t??te;return[te.prefix,r.decode(e)]}case rt.prefix:{let r=t??rt;return[rt.prefix,r.decode(e)]}case Qr.prefix:{let r=t??Qr;return[Qr.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}}function j0(e,t,r){let{prefix:n}=r;if(n!==te.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let o=t.get(n);if(o==null){let s=r.encode(e).slice(1);return t.set(n,s),s}else return o}function q0(e,t,r){let{prefix:n}=r,o=t.get(n);if(o==null){let s=r.encode(e);return t.set(n,s),s}else return o}var on=112,z0=18;function ef(e,t,r){let n=fr(e),o=n+fr(t),s=new Uint8Array(o+r.byteLength);return cr(e,s,0),cr(t,s,n),s.set(r,o),s}var G0=Symbol.for("@ipld/js-cid/CID");var Vt={...Fs,...Ns,...Ms,...Ds,...Rs,...Ls,...Os,...Ks,...$s,...ks},tf={...Ws,...qs},rf={raw:Hs,json:Vs};function of(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var nf=of("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Ys=of("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=De(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),W0={utf8:nf,"utf-8":nf,hex:Vt.base16,latin1:Ys,ascii:Ys,binary:Ys,...Vt},qn=W0;function Y(e,t="utf8"){let r=qn[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${e}`)}function q(e,t="utf8"){let r=qn[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return r.encoder.encode(e).substring(1)}var we=class extends Error{static name="InvalidMultiaddrError";name="InvalidMultiaddrError"},ut=class extends Error{static name="ValidationError";name="ValidationError"},zn=class extends Error{static name="InvalidParametersError";name="InvalidParametersError"},Gn=class extends Error{static name="UnknownProtocolError";name="UnknownProtocolError"};var Wn=class{index=0;input="";new(t){return this.index=0,this.input=t,this}readAtomically(t){let r=this.index,n=t();return n===void 0&&(this.index=r),n}parseWith(t){let r=t();if(this.index===this.input.length)return r}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(t){return this.readAtomically(()=>{let r=this.readChar();if(r===t)return r})}readSeparator(t,r,n){return this.readAtomically(()=>{if(!(r>0&&this.readGivenChar(t)===void 0))return n()})}readNumber(t,r,n,o){return this.readAtomically(()=>{let s=0,i=0,a=this.peekChar();if(a===void 0)return;let c=a==="0",u=2**(8*o)-1;for(;;){let f=this.readAtomically(()=>{let l=this.readChar();if(l===void 0)return;let y=Number.parseInt(l,t);if(!Number.isNaN(y))return y});if(f===void 0)break;if(s*=t,s+=f,s>u||(i+=1,r!==void 0&&i>r))return}if(i!==0)return!n&&c&&i>1?void 0:s})}readIPv4Addr(){return this.readAtomically(()=>{let t=new Uint8Array(4);for(let r=0;r<t.length;r++){let n=this.readSeparator(".",r,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;t[r]=n}return t})}readIPv6Addr(){let t=r=>{for(let n=0;n<r.length/2;n++){let o=n*2;if(n<r.length-3){let i=this.readSeparator(":",n,()=>this.readIPv4Addr());if(i!==void 0)return r[o]=i[0],r[o+1]=i[1],r[o+2]=i[2],r[o+3]=i[3],[o+4,!0]}let s=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(s===void 0)return[o,!1];r[o]=s>>8,r[o+1]=s&255}return[r.length,!1]};return this.readAtomically(()=>{let r=new Uint8Array(16),[n,o]=t(r);if(n===16)return r;if(o||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;let s=new Uint8Array(14),i=16-(n+2),[a]=t(s.subarray(0,i));return r.set(s.subarray(0,a),16-a),r})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}};var Z0=45,Y0=15,Zn=new Wn;function sf(e){if(!(e.length>Y0))return Zn.new(e).parseWith(()=>Zn.readIPv4Addr())}function af(e){if(e.includes("%")&&(e=e.split("%")[0]),!(e.length>Z0))return Zn.new(e).parseWith(()=>Zn.readIPv6Addr())}function Yn(e){return!!sf(e)}function cf(e){return!!af(e)}function Js(e){return t=>q(t,e)}function Qs(e){return t=>Y(t,e)}function dr(e){return new DataView(e.buffer).getUint16(e.byteOffset).toString()}function Ht(e){let t=new ArrayBuffer(2);return new DataView(t).setUint16(0,typeof e=="string"?parseInt(e):e),new Uint8Array(t)}function ff(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==16)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);let r=Y(t[0],"base32"),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=Ht(n);return ft([r,o],r.length+o.length)}function uf(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==56)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);let r=rt.decode(`b${t[0]}`),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let o=Ht(n);return ft([r,o],r.length+o.length)}function ei(e){let t=e.subarray(0,e.length-2),r=e.subarray(e.length-2),n=q(t,"base32"),o=dr(r);return`${n}:${o}`}var ti=function(e){e=e.toString().trim();let t=new Uint8Array(4);return e.split(/\./g).forEach((r,n)=>{let o=parseInt(r,10);if(isNaN(o)||o<0||o>255)throw new we("Invalid byte value in IP address");t[n]=o}),t},lf=function(e){let t=0;e=e.toString().trim();let r=e.split(":",8),n;for(n=0;n<r.length;n++){let s=Yn(r[n]),i;s&&(i=ti(r[n]),r[n]=q(i.subarray(0,2),"base16")),i!=null&&++n<8&&r.splice(n,0,q(i.subarray(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);let s=[n,1];for(n=9-r.length;n>0;n--)s.push("0");r.splice.apply(r,s)}let o=new Uint8Array(t+16);for(n=0;n<r.length;n++){r[n]===""&&(r[n]="0");let s=parseInt(r[n],16);if(isNaN(s)||s<0||s>65535)throw new we("Invalid byte value in IP address");o[t++]=s>>8&255,o[t++]=s&255}return o},df=function(e){if(e.byteLength!==4)throw new we("IPv4 address was incorrect length");let t=[];for(let r=0;r<e.byteLength;r++)t.push(e[r]);return t.join(".")},hf=function(e){if(e.byteLength!==16)throw new we("IPv6 address was incorrect length");let t=[];for(let n=0;n<e.byteLength;n+=2){let o=e[n],s=e[n+1],i=`${o.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`;t.push(i)}let r=t.join(":");try{let n=new URL(`http://[${r}]`);return n.hostname.substring(1,n.hostname.length-1)}catch{throw new we(`Invalid IPv6 address "${r}"`)}};function pf(e){try{let t=new URL(`http://[${e}]`);return t.hostname.substring(1,t.hostname.length-1)}catch{throw new we(`Invalid IPv6 address "${e}"`)}}var Xs=Object.values(Vt).map(e=>e.decoder),X0=(function(){let e=Xs[0].or(Xs[1]);return Xs.slice(2).forEach(t=>e=e.or(t)),e})();function mf(e){return X0.decode(e)}function yf(e){return t=>e.encoder.encode(t)}function J0(e){if(parseInt(e).toString()!==e)throw new ut("Value must be an integer")}function Q0(e){if(e<0)throw new ut("Value must be a positive integer, or zero")}function ey(e){return t=>{if(t>e)throw new ut(`Value must be smaller than or equal to ${e}`)}}function ty(...e){return t=>{for(let r of e)r(t)}}var sn=ty(J0,Q0,ey(65535));var de=-1,ri=class{protocolsByCode=new Map;protocolsByName=new Map;getProtocol(t){let r;if(typeof t=="string"?r=this.protocolsByName.get(t):r=this.protocolsByCode.get(t),r==null)throw new Gn(`Protocol ${t} was unknown`);return r}addProtocol(t){this.protocolsByCode.set(t.code,t),this.protocolsByName.set(t.name,t),t.aliases?.forEach(r=>{this.protocolsByName.set(r,t)})}removeProtocol(t){let r=this.protocolsByCode.get(t);r!=null&&(this.protocolsByCode.delete(r.code),this.protocolsByName.delete(r.name),r.aliases?.forEach(n=>{this.protocolsByName.delete(n)}))}},lt=new ri,ky=[{code:4,name:"ip4",size:32,valueToBytes:ti,bytesToValue:df,validate:e=>{if(!Yn(e))throw new ut(`Invalid IPv4 address "${e}"`)}},{code:6,name:"tcp",size:16,valueToBytes:Ht,bytesToValue:dr,validate:sn},{code:273,name:"udp",size:16,valueToBytes:Ht,bytesToValue:dr,validate:sn},{code:33,name:"dccp",size:16,valueToBytes:Ht,bytesToValue:dr,validate:sn},{code:41,name:"ip6",size:128,valueToBytes:lf,bytesToValue:hf,stringToValue:pf,validate:e=>{if(!cf(e))throw new ut(`Invalid IPv6 address "${e}"`)}},{code:42,name:"ip6zone",size:de},{code:43,name:"ipcidr",size:8,bytesToValue:Js("base10"),valueToBytes:Qs("base10")},{code:53,name:"dns",size:de},{code:54,name:"dns4",size:de},{code:55,name:"dns6",size:de},{code:56,name:"dnsaddr",size:de},{code:132,name:"sctp",size:16,valueToBytes:Ht,bytesToValue:dr,validate:sn},{code:301,name:"udt"},{code:302,name:"utp"},{code:400,name:"unix",size:de,stringToValue:e=>decodeURIComponent(e),valueToString:e=>encodeURIComponent(e)},{code:421,name:"p2p",aliases:["ipfs"],size:de,bytesToValue:Js("base58btc"),valueToBytes:e=>e.startsWith("Q")||e.startsWith("1")?Qs("base58btc")(e):I.parse(e).multihash.bytes},{code:444,name:"onion",size:96,bytesToValue:ei,valueToBytes:ff},{code:445,name:"onion3",size:296,bytesToValue:ei,valueToBytes:uf},{code:446,name:"garlic64",size:de},{code:447,name:"garlic32",size:de},{code:448,name:"tls"},{code:449,name:"sni",size:de},{code:454,name:"noise"},{code:460,name:"quic"},{code:461,name:"quic-v1"},{code:465,name:"webtransport"},{code:466,name:"certhash",size:de,bytesToValue:yf(Ft),valueToBytes:mf},{code:480,name:"http"},{code:481,name:"http-path",size:de,stringToValue:e=>`/${decodeURIComponent(e)}`,valueToString:e=>encodeURIComponent(e.substring(1))},{code:443,name:"https"},{code:477,name:"ws"},{code:478,name:"wss"},{code:479,name:"p2p-websocket-star"},{code:277,name:"p2p-stardust"},{code:275,name:"p2p-webrtc-star"},{code:276,name:"p2p-webrtc-direct"},{code:280,name:"webrtc-direct"},{code:281,name:"webrtc"},{code:290,name:"p2p-circuit"},{code:777,name:"memory",size:de}];ky.forEach(e=>{lt.addProtocol(e)});function gf(e){let t=[],r=0;for(;r<e.length;){let n=Bs(e,r),o=lt.getProtocol(n),s=tt(n),i=Ly(o,e,r+s),a=0;i>0&&o.size===de&&(a=tt(i));let c=s+a+i,u={code:n,name:o.name,bytes:e.subarray(r,r+c)};if(i>0){let f=r+s+a,l=e.subarray(f,f+i);u.value=o.bytesToValue?.(l)??q(l)}t.push(u),r+=c}return t}function wf(e){let t=0,r=[];for(let n of e){if(n.bytes==null){let o=lt.getProtocol(n.code),s=tt(n.code),i,a=0,c=0;n.value!=null&&(i=o.valueToBytes?.(n.value)??Y(n.value),a=i.byteLength,o.size===de&&(c=tt(a)));let u=new Uint8Array(s+c+a),f=0;Jr(n.code,u,f),f+=s,i!=null&&(o.size===de&&(Jr(a,u,f),f+=c),u.set(i,f)),n.bytes=u}r.push(n.bytes),t+=n.bytes.byteLength}return ft(r,t)}function bf(e){if(e.charAt(0)!=="/")throw new we('String multiaddr must start with "/"');let t=[],r="protocol",n="",o="";for(let s=1;s<e.length;s++){let i=e.charAt(s);i!=="/"&&(r==="protocol"?o+=e.charAt(s):n+=e.charAt(s));let a=s===e.length-1;if(i==="/"||a){let c=lt.getProtocol(o);if(r==="protocol"){if(c.size==null||c.size===0){t.push({code:c.code,name:c.name}),n="",o="",r="protocol";continue}else if(a)throw new we(`Component ${o} was missing value`);r="value"}else if(r==="value"){let u={code:c.code,name:c.name};if(c.size!=null&&c.size!==0){if(n==="")throw new we(`Component ${o} was missing value`);u.value=c.stringToValue?.(n)??n}t.push(u),n="",o="",r="protocol"}}}if(o!==""&&n!=="")throw new we("Incomplete multiaddr");return t}function xf(e){return`/${e.flatMap(t=>{if(t.value==null)return t.name;let r=lt.getProtocol(t.code);if(r==null)throw new we(`Unknown protocol code ${t.code}`);return[t.name,r.valueToString?.(t.value)??t.value]}).join("/")}`}function Ly(e,t,r){return e.size==null||e.size===0?0:e.size>0?e.size/8:Bs(t,r)}var Oy=Symbol.for("nodejs.util.inspect.custom"),ui=Symbol.for("@multiformats/multiaddr");function Ky(e){if(e==null&&(e="/"),jt(e))return e.getComponents();if(e instanceof Uint8Array)return gf(e);if(typeof e=="string")return e=e.replace(/\/(\/)+/,"/").replace(/(\/)+$/,""),e===""&&(e="/"),bf(e);if(Array.isArray(e))return e;throw new we("Must be a string, Uint8Array, Component[], or another Multiaddr")}var Xn=class e{[ui]=!0;#e;#t;#r;constructor(t="/",r={}){this.#e=Ky(t),r.validate!==!1&&$y(this)}get bytes(){return this.#r==null&&(this.#r=wf(this.#e)),this.#r}toString(){return this.#t==null&&(this.#t=xf(this.#e)),this.#t}toJSON(){return this.toString()}getComponents(){return[...this.#e.map(t=>({...t}))]}encapsulate(t){let r=new e(t);return new e([...this.#e,...r.getComponents()],{validate:!1})}decapsulate(t){let r=t.toString(),n=this.toString(),o=n.lastIndexOf(r);if(o<0)throw new zn(`Address ${this.toString()} does not contain subaddress: ${r}`);return new e(n.slice(0,o),{validate:!1})}decapsulateCode(t){let r;for(let n=this.#e.length-1;n>-1;n--)if(this.#e[n].code===t){r=n;break}return new e(this.#e.slice(0,r),{validate:!1})}equals(t){return Se(this.bytes,t.bytes)}[Oy](){return`Multiaddr(${this.toString()})`}};function $y(e){e.getComponents().forEach(t=>{let r=lt.getProtocol(t.code);t.value!=null&&r.validate?.(t.value)})}function jt(e){return!!e?.[ui]}function Q(e){return new Xn(e)}var ho={};ue(ho,{code:()=>Sg,decode:()=>Si,decodeOptions:()=>xg,encode:()=>Ei,encodeOptions:()=>wg,name:()=>Eg,toByteView:()=>Cu});var My=["string","number","bigint","symbol"],Fy=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Ef(e){if(e===null)return"null";if(e===void 0)return"undefined";if(e===!0||e===!1)return"boolean";let t=typeof e;if(My.includes(t))return t;if(t==="function")return"Function";if(Array.isArray(e))return"Array";if(Vy(e))return"Buffer";let r=Hy(e);return r||"Object"}function Vy(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function Hy(e){let t=Object.prototype.toString.call(e).slice(8,-1);if(Fy.includes(t))return t}var d=class{constructor(t,r,n){this.major=t,this.majorEncoded=t<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}};d.uint=new d(0,"uint",!0);d.negint=new d(1,"negint",!0);d.bytes=new d(2,"bytes",!0);d.string=new d(3,"string",!0);d.array=new d(4,"array",!1);d.map=new d(5,"map",!1);d.tag=new d(6,"tag",!1);d.float=new d(7,"float",!0);d.false=new d(7,"false",!0);d.true=new d(7,"true",!0);d.null=new d(7,"null",!0);d.undefined=new d(7,"undefined",!0);d.break=new d(7,"break",!0);var E=class{constructor(t,r,n){this.type=t,this.value=r,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};var hr=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",jy=new TextDecoder,qy=new TextEncoder;function Jn(e){return hr&&globalThis.Buffer.isBuffer(e)}function an(e){return e instanceof Uint8Array?Jn(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}var Cf=hr?(e,t,r)=>r-t>64?globalThis.Buffer.from(e.subarray(t,r)).toString("utf8"):Af(e,t,r):(e,t,r)=>r-t>64?jy.decode(e.subarray(t,r)):Af(e,t,r),Qn=hr?e=>e.length>64?globalThis.Buffer.from(e):Sf(e):e=>e.length>64?qy.encode(e):Sf(e),ot=e=>Uint8Array.from(e),pr=hr?(e,t,r)=>Jn(e)?new Uint8Array(e.subarray(t,r)):e.slice(t,r):(e,t,r)=>e.slice(t,r),If=hr?(e,t)=>(e=e.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),an(globalThis.Buffer.concat(e,t))):(e,t)=>{let r=new Uint8Array(t),n=0;for(let o of e)n+o.length>r.length&&(o=o.subarray(0,r.length-n)),r.set(o,n),n+=o.length;return r},Bf=hr?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function Pf(e,t){if(Jn(e)&&Jn(t))return e.compare(t);for(let r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}function Sf(e){let t=[],r=0;for(let n=0;n<e.length;n++){let o=e.charCodeAt(n);o<128?t[r++]=o:o<2048?(t[r++]=o>>6|192,t[r++]=o&63|128):(o&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=o>>18|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=o&63|128):(t[r++]=o>>12|224,t[r++]=o>>6&63|128,t[r++]=o&63|128)}return t}function Af(e,t,r){let n=[];for(;t<r;){let o=e[t],s=null,i=o>239?4:o>223?3:o>191?2:1;if(t+i<=r){let a,c,u,f;switch(i){case 1:o<128&&(s=o);break;case 2:a=e[t+1],(a&192)===128&&(f=(o&31)<<6|a&63,f>127&&(s=f));break;case 3:a=e[t+1],c=e[t+2],(a&192)===128&&(c&192)===128&&(f=(o&15)<<12|(a&63)<<6|c&63,f>2047&&(f<55296||f>57343)&&(s=f));break;case 4:a=e[t+1],c=e[t+2],u=e[t+3],(a&192)===128&&(c&192)===128&&(u&192)===128&&(f=(o&15)<<18|(a&63)<<12|(c&63)<<6|u&63,f>65535&&f<1114112&&(s=f))}}s===null?(s=65533,i=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),t+=i}return li(n)}var vf=4096;function li(e){let t=e.length;if(t<=vf)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=vf));return r}var zy=256,cn=class{constructor(t=zy){this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let r=this.chunks[this.chunks.length-1];if(this.cursor+t.length<=this.maxCursor+1){let o=r.length-(this.maxCursor-this.cursor)-1;r.set(t,o)}else{if(r){let o=r.length-(this.maxCursor-this.cursor)-1;o<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,o),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(r=Bf(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(t=!1){let r;if(this.chunks.length===1){let n=this.chunks[0];t&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=pr(n,0,this.cursor)}else r=If(this.chunks,this.cursor);return t&&this.reset(),r}};var D="CBOR decode error:",dt="CBOR encode error:",fn=[];fn[23]=1;fn[24]=2;fn[25]=3;fn[26]=5;fn[27]=9;function ht(e,t,r){if(e.length-t<r)throw new Error(`${D} not enough data for type`)}var he=[24,256,65536,4294967296,BigInt("18446744073709551616")];function Re(e,t,r){ht(e,t,1);let n=e[t];if(r.strict===!0&&n<he[0])throw new Error(`${D} integer encoded in more bytes than necessary (strict decode)`);return n}function Ne(e,t,r){ht(e,t,2);let n=e[t]<<8|e[t+1];if(r.strict===!0&&n<he[1])throw new Error(`${D} integer encoded in more bytes than necessary (strict decode)`);return n}function ke(e,t,r){ht(e,t,4);let n=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(r.strict===!0&&n<he[2])throw new Error(`${D} integer encoded in more bytes than necessary (strict decode)`);return n}function Le(e,t,r){ht(e,t,8);let n=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],o=e[t+4]*16777216+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],s=(BigInt(n)<<BigInt(32))+BigInt(o);if(r.strict===!0&&s<he[3])throw new Error(`${D} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(r.allowBigInt===!0)return s;throw new Error(`${D} integers outside of the safe integer range are not supported`)}function Tf(e,t,r,n){return new E(d.uint,Re(e,t+1,n),2)}function _f(e,t,r,n){return new E(d.uint,Ne(e,t+1,n),3)}function Uf(e,t,r,n){return new E(d.uint,ke(e,t+1,n),5)}function Df(e,t,r,n){return new E(d.uint,Le(e,t+1,n),9)}function $e(e,t){return be(e,0,t.value)}function be(e,t,r){if(r<he[0]){let n=Number(r);e.push([t|n])}else if(r<he[1]){let n=Number(r);e.push([t|24,n])}else if(r<he[2]){let n=Number(r);e.push([t|25,n>>>8,n&255])}else if(r<he[3]){let n=Number(r);e.push([t|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(r);if(n<he[4]){let o=[t|27,0,0,0,0,0,0,0],s=Number(n&BigInt(4294967295)),i=Number(n>>BigInt(32)&BigInt(4294967295));o[8]=s&255,s=s>>8,o[7]=s&255,s=s>>8,o[6]=s&255,s=s>>8,o[5]=s&255,o[4]=i&255,i=i>>8,o[3]=i&255,i=i>>8,o[2]=i&255,i=i>>8,o[1]=i&255,e.push(o)}else throw new Error(`${D} encountered BigInt larger than allowable range`)}}$e.encodedSize=function(t){return be.encodedSize(t.value)};be.encodedSize=function(t){return t<he[0]?1:t<he[1]?2:t<he[2]?3:t<he[3]?5:9};$e.compareTokens=function(t,r){return t.value<r.value?-1:t.value>r.value?1:0};function Rf(e,t,r,n){return new E(d.negint,-1-Re(e,t+1,n),2)}function Nf(e,t,r,n){return new E(d.negint,-1-Ne(e,t+1,n),3)}function kf(e,t,r,n){return new E(d.negint,-1-ke(e,t+1,n),5)}var di=BigInt(-1),Lf=BigInt(1);function Of(e,t,r,n){let o=Le(e,t+1,n);if(typeof o!="bigint"){let s=-1-o;if(s>=Number.MIN_SAFE_INTEGER)return new E(d.negint,s,9)}if(n.allowBigInt!==!0)throw new Error(`${D} integers outside of the safe integer range are not supported`);return new E(d.negint,di-BigInt(o),9)}function eo(e,t){let r=t.value,n=typeof r=="bigint"?r*di-Lf:r*-1-1;be(e,t.type.majorEncoded,n)}eo.encodedSize=function(t){let r=t.value,n=typeof r=="bigint"?r*di-Lf:r*-1-1;return n<he[0]?1:n<he[1]?2:n<he[2]?3:n<he[3]?5:9};eo.compareTokens=function(t,r){return t.value<r.value?1:t.value>r.value?-1:0};function un(e,t,r,n){ht(e,t,r+n);let o=pr(e,t+r,t+r+n);return new E(d.bytes,o,r+n)}function Kf(e,t,r,n){return un(e,t,1,r)}function $f(e,t,r,n){return un(e,t,2,Re(e,t+1,n))}function Mf(e,t,r,n){return un(e,t,3,Ne(e,t+1,n))}function Ff(e,t,r,n){return un(e,t,5,ke(e,t+1,n))}function Vf(e,t,r,n){let o=Le(e,t+1,n);if(typeof o=="bigint")throw new Error(`${D} 64-bit integer bytes lengths not supported`);return un(e,t,9,o)}function to(e){return e.encodedBytes===void 0&&(e.encodedBytes=e.type===d.string?Qn(e.value):e.value),e.encodedBytes}function mr(e,t){let r=to(t);be(e,t.type.majorEncoded,r.length),e.push(r)}mr.encodedSize=function(t){let r=to(t);return be.encodedSize(r.length)+r.length};mr.compareTokens=function(t,r){return Wy(to(t),to(r))};function Wy(e,t){return e.length<t.length?-1:e.length>t.length?1:Pf(e,t)}function ln(e,t,r,n,o){let s=r+n;ht(e,t,s);let i=new E(d.string,Cf(e,t+r,t+s),s);return o.retainStringBytes===!0&&(i.byteValue=pr(e,t+r,t+s)),i}function Hf(e,t,r,n){return ln(e,t,1,r,n)}function jf(e,t,r,n){return ln(e,t,2,Re(e,t+1,n),n)}function qf(e,t,r,n){return ln(e,t,3,Ne(e,t+1,n),n)}function zf(e,t,r,n){return ln(e,t,5,ke(e,t+1,n),n)}function Gf(e,t,r,n){let o=Le(e,t+1,n);if(typeof o=="bigint")throw new Error(`${D} 64-bit integer string lengths not supported`);return ln(e,t,9,o,n)}var Wf=mr;function yr(e,t,r,n){return new E(d.array,n,r)}function Zf(e,t,r,n){return yr(e,t,1,r)}function Yf(e,t,r,n){return yr(e,t,2,Re(e,t+1,n))}function Xf(e,t,r,n){return yr(e,t,3,Ne(e,t+1,n))}function Jf(e,t,r,n){return yr(e,t,5,ke(e,t+1,n))}function Qf(e,t,r,n){let o=Le(e,t+1,n);if(typeof o=="bigint")throw new Error(`${D} 64-bit integer array lengths not supported`);return yr(e,t,9,o)}function eu(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${D} indefinite length items not allowed`);return yr(e,t,1,1/0)}function ro(e,t){be(e,d.array.majorEncoded,t.value)}ro.compareTokens=$e.compareTokens;ro.encodedSize=function(t){return be.encodedSize(t.value)};function gr(e,t,r,n){return new E(d.map,n,r)}function tu(e,t,r,n){return gr(e,t,1,r)}function ru(e,t,r,n){return gr(e,t,2,Re(e,t+1,n))}function nu(e,t,r,n){return gr(e,t,3,Ne(e,t+1,n))}function ou(e,t,r,n){return gr(e,t,5,ke(e,t+1,n))}function su(e,t,r,n){let o=Le(e,t+1,n);if(typeof o=="bigint")throw new Error(`${D} 64-bit integer map lengths not supported`);return gr(e,t,9,o)}function iu(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${D} indefinite length items not allowed`);return gr(e,t,1,1/0)}function no(e,t){be(e,d.map.majorEncoded,t.value)}no.compareTokens=$e.compareTokens;no.encodedSize=function(t){return be.encodedSize(t.value)};function au(e,t,r,n){return new E(d.tag,r,1)}function cu(e,t,r,n){return new E(d.tag,Re(e,t+1,n),2)}function fu(e,t,r,n){return new E(d.tag,Ne(e,t+1,n),3)}function uu(e,t,r,n){return new E(d.tag,ke(e,t+1,n),5)}function lu(e,t,r,n){return new E(d.tag,Le(e,t+1,n),9)}function oo(e,t){be(e,d.tag.majorEncoded,t.value)}oo.compareTokens=$e.compareTokens;oo.encodedSize=function(t){return be.encodedSize(t.value)};var eg=20,tg=21,rg=22,ng=23;function du(e,t,r,n){if(n.allowUndefined===!1)throw new Error(`${D} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new E(d.null,null,1):new E(d.undefined,void 0,1)}function hu(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${D} indefinite length items not allowed`);return new E(d.break,void 0,1)}function hi(e,t,r){if(r){if(r.allowNaN===!1&&Number.isNaN(e))throw new Error(`${D} NaN values are not supported`);if(r.allowInfinity===!1&&(e===1/0||e===-1/0))throw new Error(`${D} Infinity values are not supported`)}return new E(d.float,e,t)}function pu(e,t,r,n){return hi(pi(e,t+1),3,n)}function mu(e,t,r,n){return hi(mi(e,t+1),5,n)}function yu(e,t,r,n){return hi(xu(e,t+1),9,n)}function so(e,t,r){let n=t.value;if(n===!1)e.push([d.float.majorEncoded|eg]);else if(n===!0)e.push([d.float.majorEncoded|tg]);else if(n===null)e.push([d.float.majorEncoded|rg]);else if(n===void 0)e.push([d.float.majorEncoded|ng]);else{let o,s=!1;(!r||r.float64!==!0)&&(wu(n),o=pi(ze,1),n===o||Number.isNaN(n)?(ze[0]=249,e.push(ze.slice(0,3)),s=!0):(bu(n),o=mi(ze,1),n===o&&(ze[0]=250,e.push(ze.slice(0,5)),s=!0))),s||(og(n),o=xu(ze,1),ze[0]=251,e.push(ze.slice(0,9)))}}so.encodedSize=function(t,r){let n=t.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!r||r.float64!==!0){wu(n);let o=pi(ze,1);if(n===o||Number.isNaN(n))return 3;if(bu(n),o=mi(ze,1),n===o)return 5}return 9};var gu=new ArrayBuffer(9),Me=new DataView(gu,1),ze=new Uint8Array(gu,0);function wu(e){if(e===1/0)Me.setUint16(0,31744,!1);else if(e===-1/0)Me.setUint16(0,64512,!1);else if(Number.isNaN(e))Me.setUint16(0,32256,!1);else{Me.setFloat32(0,e);let t=Me.getUint32(0),r=(t&2139095040)>>23,n=t&8388607;if(r===255)Me.setUint16(0,31744,!1);else if(r===0)Me.setUint16(0,(e&2147483648)>>16|n>>13,!1);else{let o=r-127;o<-24?Me.setUint16(0,0):o<-14?Me.setUint16(0,(t&2147483648)>>16|1<<24+o,!1):Me.setUint16(0,(t&2147483648)>>16|o+15<<10|n>>13,!1)}}}function pi(e,t){if(e.length-t<2)throw new Error(`${D} not enough data for float16`);let r=(e[t]<<8)+e[t+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let n=r>>10&31,o=r&1023,s;return n===0?s=o*2**-24:n!==31?s=(o+1024)*2**(n-25):s=o===0?1/0:NaN,r&32768?-s:s}function bu(e){Me.setFloat32(0,e,!1)}function mi(e,t){if(e.length-t<4)throw new Error(`${D} not enough data for float32`);let r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,4).getFloat32(0,!1)}function og(e){Me.setFloat64(0,e,!1)}function xu(e,t){if(e.length-t<8)throw new Error(`${D} not enough data for float64`);let r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,8).getFloat64(0,!1)}so.compareTokens=$e.compareTokens;function X(e,t,r){throw new Error(`${D} encountered invalid minor (${r}) for major ${e[t]>>>5}`)}function io(e){return()=>{throw new Error(`${D} ${e}`)}}var _=[];for(let e=0;e<=23;e++)_[e]=X;_[24]=Tf;_[25]=_f;_[26]=Uf;_[27]=Df;_[28]=X;_[29]=X;_[30]=X;_[31]=X;for(let e=32;e<=55;e++)_[e]=X;_[56]=Rf;_[57]=Nf;_[58]=kf;_[59]=Of;_[60]=X;_[61]=X;_[62]=X;_[63]=X;for(let e=64;e<=87;e++)_[e]=Kf;_[88]=$f;_[89]=Mf;_[90]=Ff;_[91]=Vf;_[92]=X;_[93]=X;_[94]=X;_[95]=io("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)_[e]=Hf;_[120]=jf;_[121]=qf;_[122]=zf;_[123]=Gf;_[124]=X;_[125]=X;_[126]=X;_[127]=io("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)_[e]=Zf;_[152]=Yf;_[153]=Xf;_[154]=Jf;_[155]=Qf;_[156]=X;_[157]=X;_[158]=X;_[159]=eu;for(let e=160;e<=183;e++)_[e]=tu;_[184]=ru;_[185]=nu;_[186]=ou;_[187]=su;_[188]=X;_[189]=X;_[190]=X;_[191]=iu;for(let e=192;e<=215;e++)_[e]=au;_[216]=cu;_[217]=fu;_[218]=uu;_[219]=lu;_[220]=X;_[221]=X;_[222]=X;_[223]=X;for(let e=224;e<=243;e++)_[e]=io("simple values are not supported");_[244]=X;_[245]=X;_[246]=X;_[247]=du;_[248]=io("simple values are not supported");_[249]=pu;_[250]=mu;_[251]=yu;_[252]=X;_[253]=X;_[254]=X;_[255]=hu;var Ge=[];for(let e=0;e<24;e++)Ge[e]=new E(d.uint,e,1);for(let e=-1;e>=-24;e--)Ge[31-e]=new E(d.negint,e,1);Ge[64]=new E(d.bytes,new Uint8Array(0),1);Ge[96]=new E(d.string,"",1);Ge[128]=new E(d.array,0,1);Ge[160]=new E(d.map,0,1);Ge[244]=new E(d.false,!1,1);Ge[245]=new E(d.true,!0,1);Ge[246]=new E(d.null,null,1);function Eu(e){switch(e.type){case d.false:return ot([244]);case d.true:return ot([245]);case d.null:return ot([246]);case d.bytes:return e.value.length?void 0:ot([64]);case d.string:return e.value===""?ot([96]):void 0;case d.array:return e.value===0?ot([128]):void 0;case d.map:return e.value===0?ot([160]):void 0;case d.uint:return e.value<24?ot([Number(e.value)]):void 0;case d.negint:if(e.value>=-24)return ot([31-Number(e.value)])}}var ig={float64:!1,mapSorter:fg,quickEncodeToken:Eu};function ag(){let e=[];return e[d.uint.major]=$e,e[d.negint.major]=eo,e[d.bytes.major]=mr,e[d.string.major]=Wf,e[d.array.major]=ro,e[d.map.major]=no,e[d.tag.major]=oo,e[d.float.major]=so,e}var Su=ag(),yi=new cn,co=class e{constructor(t,r){this.obj=t,this.parent=r}includes(t){let r=this;do if(r.obj===t)return!0;while(r=r.parent);return!1}static createCheck(t,r){if(t&&t.includes(r))throw new Error(`${dt} object contains circular references`);return new e(r,t)}},It={null:new E(d.null,null),undefined:new E(d.undefined,void 0),true:new E(d.true,!0),false:new E(d.false,!1),emptyArray:new E(d.array,0),emptyMap:new E(d.map,0)},Bt={number(e,t,r,n){return!Number.isInteger(e)||!Number.isSafeInteger(e)?new E(d.float,e):e>=0?new E(d.uint,e):new E(d.negint,e)},bigint(e,t,r,n){return e>=BigInt(0)?new E(d.uint,e):new E(d.negint,e)},Uint8Array(e,t,r,n){return new E(d.bytes,e)},string(e,t,r,n){return new E(d.string,e)},boolean(e,t,r,n){return e?It.true:It.false},null(e,t,r,n){return It.null},undefined(e,t,r,n){return It.undefined},ArrayBuffer(e,t,r,n){return new E(d.bytes,new Uint8Array(e))},DataView(e,t,r,n){return new E(d.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,t,r,n){if(!e.length)return r.addBreakTokens===!0?[It.emptyArray,new E(d.break)]:It.emptyArray;n=co.createCheck(n,e);let o=[],s=0;for(let i of e)o[s++]=ao(i,r,n);return r.addBreakTokens?[new E(d.array,e.length),o,new E(d.break)]:[new E(d.array,e.length),o]},Object(e,t,r,n){let o=t!=="Object",s=o?e.keys():Object.keys(e),i=o?e.size:s.length;if(!i)return r.addBreakTokens===!0?[It.emptyMap,new E(d.break)]:It.emptyMap;n=co.createCheck(n,e);let a=[],c=0;for(let u of s)a[c++]=[ao(u,r,n),ao(o?e.get(u):e[u],r,n)];return cg(a,r),r.addBreakTokens?[new E(d.map,i),a,new E(d.break)]:[new E(d.map,i),a]}};Bt.Map=Bt.Object;Bt.Buffer=Bt.Uint8Array;for(let e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Bt[`${e}Array`]=Bt.DataView;function ao(e,t={},r){let n=Ef(e),o=t&&t.typeEncoders&&t.typeEncoders[n]||Bt[n];if(typeof o=="function"){let i=o(e,n,t,r);if(i!=null)return i}let s=Bt[n];if(!s)throw new Error(`${dt} unsupported type: ${n}`);return s(e,n,t,r)}function cg(e,t){t.mapSorter&&e.sort(t.mapSorter)}function fg(e,t){let r=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(t[0])?t[0][0]:t[0];if(r.type!==n.type)return r.type.compare(n.type);let o=r.type.major,s=Su[o].compareTokens(r,n);return s===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s}function Au(e,t,r,n){if(Array.isArray(t))for(let o of t)Au(e,o,r,n);else r[t.type.major](e,t,n)}function gi(e,t,r){let n=ao(e,r);if(!Array.isArray(n)&&r.quickEncodeToken){let o=r.quickEncodeToken(n);if(o)return o;let s=t[n.type.major];if(s.encodedSize){let i=s.encodedSize(n,r),a=new cn(i);if(s(a,n,r),a.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return an(a.chunks[0])}}return yi.reset(),Au(yi,n,t,r),yi.toBytes(!0)}function wi(e,t){return t=Object.assign({},ig,t),gi(e,Su,t)}var ug={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},fo=class{constructor(t,r={}){this._pos=0,this.data=t,this.options=r}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){let t=this.data[this._pos],r=Ge[t];if(r===void 0){let n=_[t];if(!n)throw new Error(`${D} no decoder for major type ${t>>>5} (byte 0x${t.toString(16).padStart(2,"0")})`);let o=t&31;r=n(this.data,this._pos,o,this.options)}return this._pos+=r.encodedLength,r}},dn=Symbol.for("DONE"),uo=Symbol.for("BREAK");function lg(e,t,r){let n=[];for(let o=0;o<e.value;o++){let s=wr(t,r);if(s===uo){if(e.value===1/0)break;throw new Error(`${D} got unexpected break to lengthed array`)}if(s===dn)throw new Error(`${D} found array but not enough entries (got ${o}, expected ${e.value})`);n[o]=s}return n}function dg(e,t,r){let n=r.useMaps===!0,o=n?void 0:{},s=n?new Map:void 0;for(let i=0;i<e.value;i++){let a=wr(t,r);if(a===uo){if(e.value===1/0)break;throw new Error(`${D} got unexpected break to lengthed map`)}if(a===dn)throw new Error(`${D} found map but not enough entries (got ${i} [no key], expected ${e.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${D} non-string keys not supported (got ${typeof a})`);if(r.rejectDuplicateMapKeys===!0&&(n&&s.has(a)||!n&&a in o))throw new Error(`${D} found repeat map key "${a}"`);let c=wr(t,r);if(c===dn)throw new Error(`${D} found map but not enough entries (got ${i} [no value], expected ${e.value})`);n?s.set(a,c):o[a]=c}return n?s:o}function wr(e,t){if(e.done())return dn;let r=e.next();if(r.type===d.break)return uo;if(r.type.terminal)return r.value;if(r.type===d.array)return lg(r,e,t);if(r.type===d.map)return dg(r,e,t);if(r.type===d.tag){if(t.tags&&typeof t.tags[r.value]=="function"){let n=wr(e,t);return t.tags[r.value](n)}throw new Error(`${D} tag not supported (${r.value})`)}throw new Error("unsupported")}function bi(e,t){if(!(e instanceof Uint8Array))throw new Error(`${D} data to decode must be a Uint8Array`);t=Object.assign({},ug,t);let r=t.tokenizer||new fo(e,t),n=wr(r,t);if(n===dn)throw new Error(`${D} did not find any content to decode`);if(n===uo)throw new Error(`${D} got unexpected break`);return[n,e.subarray(r.pos())]}function hn(e,t){let[r,n]=bi(e,t);if(n.length>0)throw new Error(`${D} too many terminals, data makes no sense`);return r}var vu=42;function Cu(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}function pg(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;let t=I.asCID(e);if(!t)return null;let r=new Uint8Array(t.bytes.byteLength+1);return r.set(t.bytes,1),[new E(d.tag,vu),new E(d.bytes,r)]}function mg(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function yg(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}function gg(e){for(let t of e.keys())if(typeof t!="string"||t.length===0)throw new Error("Non-string Map keys are not supported by the IPLD Data Model and cannot be encoded");return null}var xi={float64:!0,typeEncoders:{Map:gg,Object:pg,undefined:mg,number:yg}},wg={...xi,typeEncoders:{...xi.typeEncoders}};function bg(e){if(e[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return I.decode(e.subarray(1))}var lo={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};lo.tags[vu]=bg;var xg={...lo,tags:lo.tags.slice()},Eg="dag-cbor",Sg=113,Ei=e=>wi(e,xi),Si=e=>hn(Cu(e),lo);var Pi={};ue(Pi,{code:()=>Rg,decode:()=>Bu,encode:()=>Iu,format:()=>Ng,name:()=>Dg,parse:()=>Lg,stringify:()=>Ng});var Ai=class extends Array{constructor(){super(),this.inRecursive=[]}prefix(t){let r=this.inRecursive[this.inRecursive.length-1];r&&(r.type===d.array&&(r.elements++,r.elements!==1&&t.push([44])),r.type===d.map&&(r.elements++,r.elements!==1&&(r.elements%2===1?t.push([44]):t.push([58]))))}[d.uint.major](t,r){this.prefix(t);let n=String(r.value),o=[];for(let s=0;s<n.length;s++)o[s]=n.charCodeAt(s);t.push(o)}[d.negint.major](t,r){this[d.uint.major](t,r)}[d.bytes.major](t,r){throw new Error(`${dt} unsupported type: Uint8Array`)}[d.string.major](t,r){this.prefix(t);let n=Qn(JSON.stringify(r.value));t.push(n.length>32?an(n):n)}[d.array.major](t,r){this.prefix(t),this.inRecursive.push({type:d.array,elements:0}),t.push([91])}[d.map.major](t,r){this.prefix(t),this.inRecursive.push({type:d.map,elements:0}),t.push([123])}[d.tag.major](t,r){}[d.float.major](t,r){if(r.type.name==="break"){let i=this.inRecursive.pop();if(i){if(i.type===d.array)t.push([93]);else if(i.type===d.map)t.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(r.value===void 0)throw new Error(`${dt} unsupported type: undefined`);if(this.prefix(t),r.type.name==="true"){t.push([116,114,117,101]);return}else if(r.type.name==="false"){t.push([102,97,108,115,101]);return}else if(r.type.name==="null"){t.push([110,117,108,108]);return}let n=String(r.value),o=[],s=!1;for(let i=0;i<n.length;i++)o[i]=n.charCodeAt(i),!s&&(o[i]===46||o[i]===101||o[i]===69)&&(s=!0);s||(o.push(46),o.push(48)),t.push(o)}};function Ag(e,t){if(Array.isArray(e[0])||Array.isArray(t[0]))throw new Error(`${dt} complex map keys are not supported`);let r=e[0],n=t[0];if(r.type!==d.string||n.type!==d.string)throw new Error(`${dt} non-string map keys are not supported`);if(r<n)return-1;if(r>n)return 1;throw new Error(`${dt} unexpected duplicate map keys, this is not supported`)}var vg={addBreakTokens:!0,mapSorter:Ag};function vi(e,t){return t=Object.assign({},vg,t),gi(e,new Ai,t)}var br=class{constructor(t,r={}){this._pos=0,this.data=t,this.options=r,this.modeStack=["value"],this.lastToken=""}pos(){return this._pos}done(){return this._pos>=this.data.length}ch(){return this.data[this._pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let t=this.ch();for(;t===32||t===9||t===13||t===10;)t=this.data[++this._pos]}expect(t){if(this.data.length-this._pos<t.length)throw new Error(`${D} unexpected end of input at position ${this._pos}`);for(let r=0;r<t.length;r++)if(this.data[this._pos++]!==t[r])throw new Error(`${D} unexpected token at position ${this._pos}, expected to find '${String.fromCharCode(...t)}'`)}parseNumber(){let t=this._pos,r=!1,n=!1,o=a=>{for(;!this.done();){let c=this.ch();if(a.includes(c))this._pos++;else break}};if(this.ch()===45&&(r=!0,this._pos++),this.ch()===48)if(this._pos++,this.ch()===46)this._pos++,n=!0;else return new E(d.uint,0,this._pos-t);if(o([48,49,50,51,52,53,54,55,56,57]),r&&this._pos===t+1)throw new Error(`${D} unexpected token at position ${this._pos}`);if(!this.done()&&this.ch()===46){if(n)throw new Error(`${D} unexpected token at position ${this._pos}`);n=!0,this._pos++,o([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(n=!0,this._pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this._pos++,o([48,49,50,51,52,53,54,55,56,57]));let s=String.fromCharCode.apply(null,this.data.subarray(t,this._pos)),i=parseFloat(s);return n?new E(d.float,i,this._pos-t):this.options.allowBigInt!==!0||Number.isSafeInteger(i)?new E(i>=0?d.uint:d.negint,i,this._pos-t):new E(i>=0?d.uint:d.negint,BigInt(s),this._pos-t)}parseString(){if(this.ch()!==34)throw new Error(`${D} unexpected character at position ${this._pos}; this shouldn't happen`);this._pos++;for(let s=this._pos,i=0;s<this.data.length&&i<65536;s++,i++){let a=this.data[s];if(a===92||a<32||a>=128)break;if(a===34){let c=String.fromCharCode.apply(null,this.data.subarray(this._pos,s));return this._pos=s+1,new E(d.string,c,i)}}let t=this._pos,r=[],n=()=>{if(this._pos+4>=this.data.length)throw new Error(`${D} unexpected end of unicode escape sequence at position ${this._pos}`);let s=0;for(let i=0;i<4;i++){let a=this.ch();if(a>=48&&a<=57)a-=48;else if(a>=97&&a<=102)a=a-97+10;else if(a>=65&&a<=70)a=a-65+10;else throw new Error(`${D} unexpected unicode escape character at position ${this._pos}`);s=s*16+a,this._pos++}return s},o=()=>{let s=this.ch(),i=null,a=s>239?4:s>223?3:s>191?2:1;if(this._pos+a>this.data.length)throw new Error(`${D} unexpected unicode sequence at position ${this._pos}`);let c,u,f,l;switch(a){case 1:s<128&&(i=s);break;case 2:c=this.data[this._pos+1],(c&192)===128&&(l=(s&31)<<6|c&63,l>127&&(i=l));break;case 3:c=this.data[this._pos+1],u=this.data[this._pos+2],(c&192)===128&&(u&192)===128&&(l=(s&15)<<12|(c&63)<<6|u&63,l>2047&&(l<55296||l>57343)&&(i=l));break;case 4:c=this.data[this._pos+1],u=this.data[this._pos+2],f=this.data[this._pos+3],(c&192)===128&&(u&192)===128&&(f&192)===128&&(l=(s&15)<<18|(c&63)<<12|(u&63)<<6|f&63,l>65535&&l<1114112&&(i=l))}i===null?(i=65533,a=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|i&1023),r.push(i),this._pos+=a};for(;!this.done();){let s=this.ch(),i;switch(s){case 92:if(this._pos++,this.done())throw new Error(`${D} unexpected string termination at position ${this._pos}`);switch(i=this.ch(),this._pos++,i){case 34:case 39:case 92:case 47:r.push(i);break;case 98:r.push(8);break;case 116:r.push(9);break;case 110:r.push(10);break;case 102:r.push(12);break;case 114:r.push(13);break;case 117:r.push(n());break;default:throw new Error(`${D} unexpected string escape character at position ${this._pos}`)}break;case 34:return this._pos++,new E(d.string,li(r),this._pos-t);default:if(s<32)throw new Error(`${D} invalid control character at position ${this._pos}`);s<128?(r.push(s),this._pos++):o()}}throw new Error(`${D} unexpected end of string at position ${this._pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this._pos++,new E(d.map,1/0,1);case 91:return this.modeStack.push("array-start"),this._pos++,new E(d.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new E(d.null,null,4);case 102:return this.expect([102,97,108,115,101]),new E(d.false,!1,5);case 116:return this.expect([116,114,117,101]),new E(d.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${D} unexpected character at position ${this._pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this._pos++,this.skipWhitespace(),new E(d.break,void 0,1);if(this.ch()!==44)throw new Error(`${D} unexpected character at position ${this._pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this._pos++,this.skipWhitespace(),new E(d.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this._pos++,this.skipWhitespace(),new E(d.break,void 0,1);if(this.ch()!==44)throw new Error(`${D} unexpected character at position ${this._pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this._pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this._pos++,this.skipWhitespace(),new E(d.break,void 0,1);let t=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${D} unexpected character at position ${this._pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("obj-value"),t}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${D} unexpected parse state at position ${this._pos}; this shouldn't happen`)}}};function Ci(e,t){return t=Object.assign({tokenizer:new br(e,t)},t),hn(e,t)}function Ig(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}function Bg(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;let t=I.asCID(e);if(!t)return null;let r=t.toString();return[new E(d.map,1/0,1),new E(d.string,"/",1),new E(d.string,r,r.length),new E(d.break,void 0,1)]}function po(e){let t=ar.encode(e).slice(1);return[new E(d.map,1/0,1),new E(d.string,"/",1),new E(d.map,1/0,1),new E(d.string,"bytes",5),new E(d.string,t,t.length),new E(d.break,void 0,1),new E(d.break,void 0,1)]}function We(e){return po(new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function Pg(e){return po(new Uint8Array(e))}function Tg(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function _g(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}var Ug={typeEncoders:{Object:Bg,Buffer:po,Uint8Array:po,Int8Array:We,Uint16Array:We,Int16Array:We,Uint32Array:We,Int32Array:We,Float32Array:We,Float64Array:We,Uint8ClampedArray:We,BigInt64Array:We,BigUint64Array:We,DataView:We,ArrayBuffer:Pg,undefined:Tg,number:_g}},Ii=class extends br{constructor(t,r){super(t,r),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){let t=this._next();if(t.type===d.map){let r=this._next();if(r.type===d.string&&r.value==="/"){let n=this._next();if(n.type===d.string){if(this._next().type!==d.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new E(d.tag,42,0)}if(n.type===d.map){let o=this._next();if(o.type===d.string&&o.value==="bytes"){let s=this._next();if(s.type===d.string){for(let a=0;a<2;a++)if(this._next().type!==d.break)throw new Error("Invalid encoded Bytes form");let i=ar.decode(`m${s.value}`);return new E(d.bytes,i,s.value.length)}this.tokenBuffer.push(s)}this.tokenBuffer.push(o)}this.tokenBuffer.push(n)}this.tokenBuffer.push(r)}return t}},Bi={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Bi.tags[42]=I.parse;var Dg="dag-json",Rg=297,Iu=e=>vi(e,Ug),Bu=e=>{let t=Ig(e),r=Object.assign(Bi,{tokenizer:new Ii(t,Bi)});return Ci(t,r)},Ng=e=>kg.decode(Iu(e));var kg=new TextDecoder,Lg=e=>Bu(Og.encode(e)),Og=new TextEncoder;var Ri={};ue(Ri,{code:()=>Zg,createLink:()=>Ou,createNode:()=>Lu,decode:()=>Xg,encode:()=>Yg,name:()=>Wg,prepare:()=>Ui,validate:()=>Di});var Kg=new TextDecoder;function Ti(e,t){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(t>=e.length)throw new Error("protobuf: unexpected end of data");let o=e[t++];if(r+=n<28?(o&127)<<n:(o&127)*2**n,o<128)break}return[r,t]}function mo(e,t){let r;[r,t]=Ti(e,t);let n=t+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(t,n),n]}function Pu(e,t){let r;return[r,t]=Ti(e,t),[r&7,r>>3,t]}function $g(e){let t={},r=e.length,n=0;for(;n<r;){let o,s;if([o,s,n]=Pu(e,n),s===1){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Hash`);if(t.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[t.Hash,n]=mo(e,n)}else if(s===2){if(t.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Name`);if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let i;[i,n]=mo(e,n),t.Name=Kg.decode(i)}else if(s===3){if(t.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(o!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Tsize`);[t.Tsize,n]=Ti(e,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${s}`)}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return t}function Tu(e){let t=e.length,r=0,n,o=!1,s;for(;r<t;){let a,c;if([a,c,r]=Pu(e,r),a!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${a}`);if(c===1){if(s)throw new Error("protobuf: (PBNode) duplicate Data section");[s,r]=mo(e,r),n&&(o=!0)}else if(c===2){if(o)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let u;[u,r]=mo(e,r),n.push($g(u))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${c}`)}if(r>t)throw new Error("protobuf: (PBNode) unexpected end of data");let i={};return s&&(i.Data=s),i.Links=n||[],i}var Uu=new TextEncoder,_u=2**32,Mg=2**31;function Fg(e,t){let r=t.length;if(typeof e.Tsize=="number"){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");r=pn(t,r,e.Tsize)-1,t[r]=24}if(typeof e.Name=="string"){let n=Uu.encode(e.Name);r-=n.length,t.set(n,r),r=pn(t,r,n.length)-1,t[r]=18}return e.Hash&&(r-=e.Hash.length,t.set(e.Hash,r),r=pn(t,r,e.Hash.length)-1,t[r]=10),t.length-r}function Du(e){let t=Hg(e),r=new Uint8Array(t),n=t;if(e.Data&&(n-=e.Data.length,r.set(e.Data,n),n=pn(r,n,e.Data.length)-1,r[n]=10),e.Links)for(let o=e.Links.length-1;o>=0;o--){let s=Fg(e.Links[o],r.subarray(0,n));n-=s,n=pn(r,n,s)-1,r[n]=18}return r}function Vg(e){let t=0;if(e.Hash){let r=e.Hash.length;t+=1+r+xr(r)}if(typeof e.Name=="string"){let r=Uu.encode(e.Name).length;t+=1+r+xr(r)}return typeof e.Tsize=="number"&&(t+=1+xr(e.Tsize)),t}function Hg(e){let t=0;if(e.Data){let r=e.Data.length;t+=1+r+xr(r)}if(e.Links)for(let r of e.Links){let n=Vg(r);t+=1+n+xr(n)}return t}function pn(e,t,r){t-=xr(r);let n=t;for(;r>=Mg;)e[t++]=r&127|128,r/=128;for(;r>=128;)e[t++]=r&127|128,r>>>=7;return e[t]=r,n}function xr(e){return e%2===0&&e++,Math.floor((jg(e)+6)/7)}function jg(e){let t=0;return e>=_u&&(e=Math.floor(e/_u),t=32),e>=65536&&(e>>>=16,t+=16),e>=256&&(e>>>=8,t+=8),t+qg[e]}var qg=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];var zg=["Data","Links"],Gg=["Hash","Name","Tsize"],_i=new TextEncoder;function Nu(e,t){if(e===t)return 0;let r=e.Name?_i.encode(e.Name):[],n=t.Name?_i.encode(t.Name):[],o=r.length,s=n.length;for(let i=0,a=Math.min(o,s);i<a;++i)if(r[i]!==n[i]){o=r[i],s=n[i];break}return o<s?-1:s<o?1:0}function Ru(e,t){return!Object.keys(e).some(r=>!t.includes(r))}function ku(e){if(typeof e.asCID=="object"){let r=I.asCID(e);if(!r)throw new TypeError("Invalid DAG-PB form");return{Hash:r}}if(typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");let t={};if(e.Hash){let r=I.asCID(e.Hash);try{r||(typeof e.Hash=="string"?r=I.parse(e.Hash):e.Hash instanceof Uint8Array&&(r=I.decode(e.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}r&&(t.Hash=r)}if(!t.Hash)throw new TypeError("Invalid DAG-PB form");return typeof e.Name=="string"&&(t.Name=e.Name),typeof e.Tsize=="number"&&(t.Tsize=e.Tsize),t}function Ui(e){if((e instanceof Uint8Array||typeof e=="string")&&(e={Data:e}),typeof e!="object"||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");let t={};if(e.Data!==void 0)if(typeof e.Data=="string")t.Data=_i.encode(e.Data);else if(e.Data instanceof Uint8Array)t.Data=e.Data;else throw new TypeError("Invalid DAG-PB form");if(e.Links!==void 0)if(Array.isArray(e.Links))t.Links=e.Links.map(ku),t.Links.sort(Nu);else throw new TypeError("Invalid DAG-PB form");else t.Links=[];return t}function Di(e){if(!e||typeof e!="object"||Array.isArray(e)||e instanceof Uint8Array||e["/"]&&e["/"]===e.bytes)throw new TypeError("Invalid DAG-PB form");if(!Ru(e,zg))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(e.Data!==void 0&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let t=0;t<e.Links.length;t++){let r=e.Links[t];if(!r||typeof r!="object"||Array.isArray(r)||r instanceof Uint8Array||r["/"]&&r["/"]===r.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!Ru(r,Gg))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(r.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash==null||!r.Hash["/"]||r.Hash["/"]!==r.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(r.Name!==void 0&&typeof r.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(r.Tsize!==void 0){if(typeof r.Tsize!="number"||r.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(r.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(t>0&&Nu(r,e.Links[t-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function Lu(e,t=[]){return Ui({Data:e,Links:t})}function Ou(e,t,r){return ku({Hash:r,Name:e,Tsize:t})}function Ku(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}var Wg="dag-pb",Zg=112;function Yg(e){Di(e);let t={};return e.Links&&(t.Links=e.Links.map(r=>{let n={};return r.Hash&&(n.Hash=r.Hash.bytes),r.Name!==void 0&&(n.Name=r.Name),r.Tsize!==void 0&&(n.Tsize=r.Tsize),n})),e.Data&&(t.Data=e.Data),Du(t)}function Xg(e){let t=Ku(e),r=Tu(t),n={};return r.Data&&(n.Data=r.Data),r.Links&&(n.Links=r.Links.map(o=>{let s={};try{s.Hash=I.decode(o.Hash)}catch{}if(!s.Hash)throw new Error("Invalid Hash field found in link, expected CID");return o.Name!==void 0&&(s.Name=o.Name),o.Tsize!==void 0&&(s.Tsize=o.Tsize),s})),n}var Hi={};ue(Hi,{code:()=>Lw,decode:()=>Mw,encode:()=>$w,name:()=>kw,toGeneral:()=>al});var GS=new Uint8Array(0);function $u(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function Er(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function Jg(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<e.length;o++){var s=e.charAt(o),i=s.charCodeAt(0);if(r[i]!==255)throw new TypeError(s+" is ambiguous");r[i]=o}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function l(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var v=0,S=0,m=0,P=p.length;m!==P&&p[m]===0;)m++,v++;for(var b=(P-m)*f+1>>>0,T=new Uint8Array(b);m!==P;){for(var N=p[m],$=0,M=b-1;(N!==0||$<S)&&M!==-1;M--,$++)N+=256*T[M]>>>0,T[M]=N%a>>>0,N=N/a>>>0;if(N!==0)throw new Error("Non-zero carry");S=$,m++}for(var A=b-S;A!==b&&T[A]===0;)A++;for(var C=c.repeat(v);A<b;++A)C+=e.charAt(T[A]);return C}function y(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var v=0;if(p[v]!==" "){for(var S=0,m=0;p[v]===c;)S++,v++;for(var P=(p.length-v)*u+1>>>0,b=new Uint8Array(P);p[v];){var T=r[p.charCodeAt(v)];if(T===255)return;for(var N=0,$=P-1;(T!==0||N<m)&&$!==-1;$--,N++)T+=a*b[$]>>>0,b[$]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");m=N,v++}if(p[v]!==" "){for(var M=P-m;M!==P&&b[M]===0;)M++;for(var A=new Uint8Array(S+(P-M)),C=S;M!==P;)A[C++]=b[M++];return A}}}function B(p){var v=y(p);if(v)return v;throw new Error(`Non-${t} character`)}return{encode:l,decodeUnsafe:y,decode:B}}var Qg=Jg,ew=Qg,Mu=ew;var Ni=class{name;prefix;baseEncode;constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},ki=class{name;prefix;baseDecode;prefixCodePoint;constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Fu(this,t)}},Li=class{decoders;constructor(t){this.decoders=t}or(t){return Fu(this,t)}decode(t){let r=t[0],n=this.decoders[r];if(n!=null)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function Fu(e,t){return new Li({...e.decoders??{[e.prefix]:e},...t.decoders??{[t.prefix]:t}})}var Oi=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(t,r,n,o){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=o,this.encoder=new Ni(t,r,n),this.decoder=new ki(t,r,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}};function Vu({name:e,prefix:t,encode:r,decode:n}){return new Oi(e,t,r,n)}function Ki({name:e,prefix:t,alphabet:r}){let{encode:n,decode:o}=Mu(r,e);return Vu({prefix:t,name:e,encode:n,decode:s=>Er(o(s))})}function tw(e,t,r,n){let o={};for(let f=0;f<t.length;++f)o[t[f]]=f;let s=e.length;for(;e[s-1]==="=";)--s;let i=new Uint8Array(s*r/8|0),a=0,c=0,u=0;for(let f=0;f<s;++f){let l=o[e[f]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|l,a+=r,a>=8&&(a-=8,i[u++]=255&c>>a)}if(a>=r||(255&c<<8-a)!==0)throw new SyntaxError("Unexpected end of data");return i}function rw(e,t,r){let n=t[t.length-1]==="=",o=(1<<r)-1,s="",i=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],i+=8;i>r;)i-=r,s+=t[o&a>>i];if(i!==0&&(s+=t[o&a<<r-i]),n)for(;(s.length*r&7)!==0;)s+="=";return s}function Ie({name:e,prefix:t,bitsPerChar:r,alphabet:n}){return Vu({prefix:t,name:e,encode(o){return rw(o,n,r)},decode(o){return tw(o,n,r,e)}})}var e6=Ie({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),t6=Ie({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),$i=Ie({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),r6=Ie({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function Ze(e){return $i.encode(e).slice(1)}function Fe(e){return $i.decode(`u${e}`)}var mn=Ie({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),a6=Ie({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),c6=Ie({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),f6=Ie({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),u6=Ie({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),l6=Ie({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),d6=Ie({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),h6=Ie({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),p6=Ie({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var pt=Ki({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),g6=Ki({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var nw=qu,Hu=128,ow=127,sw=~ow,iw=Math.pow(2,31);function qu(e,t,r){t=t||[],r=r||0;for(var n=r;e>=iw;)t[r++]=e&255|Hu,e/=128;for(;e&sw;)t[r++]=e&255|Hu,e>>>=7;return t[r]=e|0,qu.bytes=r-n+1,t}var aw=Mi,cw=128,ju=127;function Mi(e,n){var r=0,n=n||0,o=0,s=n,i,a=e.length;do{if(s>=a)throw Mi.bytes=0,new RangeError("Could not decode varint");i=e[s++],r+=o<28?(i&ju)<<o:(i&ju)*Math.pow(2,o),o+=7}while(i>=cw);return Mi.bytes=s-n,r}var fw=Math.pow(2,7),uw=Math.pow(2,14),lw=Math.pow(2,21),dw=Math.pow(2,28),hw=Math.pow(2,35),pw=Math.pow(2,42),mw=Math.pow(2,49),yw=Math.pow(2,56),gw=Math.pow(2,63),ww=function(e){return e<fw?1:e<uw?2:e<lw?3:e<dw?4:e<hw?5:e<pw?6:e<mw?7:e<yw?8:e<gw?9:10},bw={encode:nw,decode:aw,encodingLength:ww},xw=bw,yn=xw;function gn(e,t=0){return[yn.decode(e,t),yn.decode.bytes]}function Sr(e,t,r=0){return yn.encode(e,t,r),t}function Ar(e){return yn.encodingLength(e)}function Gu(e,t){let r=t.byteLength,n=Ar(e),o=n+Ar(r),s=new Uint8Array(o+r);return Sr(e,s,0),Sr(r,s,n),s.set(t,o),new vr(e,r,t,s)}function Wu(e){let t=Er(e),[r,n]=gn(t),[o,s]=gn(t.subarray(n)),i=t.subarray(n+s);if(i.byteLength!==o)throw new Error("Incorrect length");return new vr(r,o,i,t)}function Zu(e,t){if(e===t)return!0;{let r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&$u(e.bytes,r.bytes)}}var vr=class{code;size;digest;bytes;constructor(t,r,n,o){this.code=t,this.size=r,this.digest=n,this.bytes=o}};function Yu(e,t){let{bytes:r,version:n}=e;switch(n){case 0:return Aw(r,Fi(e),t??pt.encoder);default:return vw(r,Fi(e),t??mn.encoder)}}var Xu=new WeakMap;function Fi(e){let t=Xu.get(e);if(t==null){let r=new Map;return Xu.set(e,r),r}return t}var Cr=class e{code;version;multihash;bytes;"/";constructor(t,r,n,o){this.code=r,this.version=t,this.multihash=n,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:t,multihash:r}=this;if(t!==wn)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Cw)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return e.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:t,digest:r}=this.multihash,n=Gu(t,r);return e.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return e.equals(this,t)}static equals(t,r){let n=r;return n!=null&&t.code===n.code&&t.version===n.version&&Zu(t.multihash,n.multihash)}toString(t){return Yu(this,t)}toJSON(){return{"/":Yu(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(t==null)return null;let r=t;if(r instanceof e)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:o,multihash:s,bytes:i}=r;return new e(n,o,s,i??Ju(n,o,s.bytes))}else if(r[Iw]===!0){let{version:n,multihash:o,code:s}=r,i=Wu(o);return e.create(n,s,i)}else return null}static create(t,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:{if(r!==wn)throw new Error(`Version 0 CID must use dag-pb (code: ${wn}) block encoding`);return new e(t,r,n,n.bytes)}case 1:{let o=Ju(t,r,n.bytes);return new e(t,r,n,o)}default:throw new Error("Invalid version")}}static createV0(t){return e.create(0,wn,t)}static createV1(t,r){return e.create(1,t,r)}static decode(t){let[r,n]=e.decodeFirst(t);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(t){let r=e.inspectBytes(t),n=r.size-r.multihashSize,o=Er(t.subarray(n,n+r.multihashSize));if(o.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=o.subarray(r.multihashSize-r.digestSize),i=new vr(r.multihashCode,r.digestSize,s,o);return[r.version===0?e.createV0(i):e.createV1(r.codec,i),t.subarray(r.size)]}static inspectBytes(t){let r=0,n=()=>{let[l,y]=gn(t.subarray(r));return r+=y,l},o=n(),s=wn;if(o===18?(o=0,r=0):s=n(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);let i=r,a=n(),c=n(),u=r+c,f=u-i;return{version:o,codec:s,multihashCode:a,digestSize:c,multihashSize:f,size:u}}static parse(t,r){let[n,o]=Sw(t,r),s=e.decode(o);if(s.version===0&&t[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Fi(s).set(n,t),s}};function Sw(e,t){switch(e[0]){case"Q":{let r=t??pt;return[pt.prefix,r.decode(`${pt.prefix}${e}`)]}case pt.prefix:{let r=t??pt;return[pt.prefix,r.decode(e)]}case mn.prefix:{let r=t??mn;return[mn.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}}function Aw(e,t,r){let{prefix:n}=r;if(n!==pt.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let o=t.get(n);if(o==null){let s=r.encode(e).slice(1);return t.set(n,s),s}else return o}function vw(e,t,r){let{prefix:n}=r,o=t.get(n);if(o==null){let s=r.encode(e);return t.set(n,s),s}else return o}var wn=112,Cw=18;function Ju(e,t,r){let n=Ar(e),o=n+Ar(t),s=new Uint8Array(o+r.byteLength);return Sr(e,s,0),Sr(t,s,n),s.set(r,o),s}var Iw=Symbol.for("@ipld/js-cid/CID");function Qu(e){let[t,r,n]=e;return{payload:r,signatures:[{protected:t,signature:n}],link:Cr.decode(Fe(r))}}function Bw(e){let t={signature:Fe(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=Fe(e.protected)),t}function el(e){return{payload:Fe(e.payload),signatures:e.signatures.map(Bw)}}function Pw(e){let t={signature:Ze(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=Ze(e.protected)),t}function tl(e){let t={payload:Ze(e.payload),signatures:e.signatures.map(Pw)};try{return t.pld=Vi(_w(e.payload)),t}catch{try{return t.link=Cr.decode(new Uint8Array(e.payload)),t}catch{throw new Error("Invalid payload, must be either JSON or CID")}}}function Vi(e){if(typeof e=="string"){if(e.startsWith("ipfs://"))return Cr.parse(e.slice(7))}else{if(Array.isArray(e))return e.map(Vi);if(Tw(e)){let t={};for(let r in e)t[r]=Vi(e[r]);return t}}return e}function Tw(e){return typeof e=="object"&&e!==null}function _w(e){return JSON.parse(new TextDecoder().decode(e))}function rl(e){let[t,r,n,o,s]=e,i={ciphertext:o,iv:n,protected:t,tag:s};return r&&(i.recipients=[{encrypted_key:r}]),i}function Dw(e){let t={};return e.encrypted_key&&(t.encrypted_key=Fe(e.encrypted_key)),e.header&&(t.header=e.header),t}function nl(e){let t={ciphertext:Fe(e.ciphertext),protected:Fe(e.protected),iv:Fe(e.iv),tag:Fe(e.tag)};return e.aad&&(t.aad=Fe(e.aad)),e.recipients&&(t.recipients=e.recipients.map(Dw)),e.unprotected&&(t.unprotected=e.unprotected),t}function Rw(e){let t={};return e.encrypted_key&&(t.encrypted_key=Ze(e.encrypted_key)),e.header&&(t.header=e.header),t}function ol(e){let t={ciphertext:Ze(e.ciphertext),protected:Ze(e.protected),iv:Ze(e.iv),tag:Ze(e.tag)};return e.aad&&(t.aad=Ze(e.aad)),e.recipients&&(t.recipients=e.recipients.map(Rw)),e.unprotected&&(t.unprotected=e.unprotected),t}var kw="dag-jose",Lw=133;function sl(e){return"payload"in e&&typeof e.payload=="string"&&"signatures"in e&&Array.isArray(e.signatures)}function Ow(e){return"payload"in e&&e.payload instanceof Uint8Array&&"signatures"in e&&Array.isArray(e.signatures)}function Kw(e){return"ciphertext"in e&&e.ciphertext instanceof Uint8Array&&"iv"in e&&e.iv instanceof Uint8Array&&"protected"in e&&e.protected instanceof Uint8Array&&"tag"in e&&e.tag instanceof Uint8Array}function il(e){return"ciphertext"in e&&typeof e.ciphertext=="string"&&"iv"in e&&typeof e.iv=="string"&&"protected"in e&&typeof e.protected=="string"&&"tag"in e&&typeof e.tag=="string"}function al(e){if(typeof e=="string"){let t=e.split(".");if(t.length===3)return Qu(t);if(t.length===5)return rl(t);throw new Error("Not a valid JOSE string")}if(sl(e)||il(e))return e;throw new Error("Not a valid unencoded JOSE object")}function $w(e){typeof e=="string"&&(e=al(e));let t;if(sl(e))t=el(e);else if(il(e))t=nl(e);else throw new Error("Not a valid JOSE object");return new Uint8Array(Ei(t))}function Mw(e){let t;try{t=Si(e)}catch{throw new Error("Not a valid DAG-JOSE object")}if(Ow(t))return tl(t);if(Kw(t))return ol(t);throw new Error("Not a valid DAG-JOSE object")}function pe(e){let t=new globalThis.AbortController;function r(){t.abort();for(let s of e)s?.removeEventListener!=null&&s.removeEventListener("abort",r)}for(let s of e){if(s?.aborted===!0){r();break}s?.addEventListener!=null&&s.addEventListener("abort",r)}function n(){for(let s of e)s?.removeEventListener!=null&&s.removeEventListener("abort",r)}let o=t.signal;return o.clear=n,o}var cl="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var fl=(e=21)=>{let t="",r=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=cl[r[e]&63];return t};var dl=Mt(ll(),1),hl=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,ji=(0,dl.default)(),Ir=hl&&!ji;var pl=ji&&hl,ml=typeof globalThis.process<"u"&&typeof globalThis.process.release<"u"&&globalThis.process.release.name==="node"&&!ji,Br=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,k6=typeof globalThis.process<"u"&&typeof globalThis.process.env<"u"&&globalThis.process.env["NODE"+"_"+"ENV"]==="test",L6=typeof navigator<"u"&&navigator.product==="ReactNative";async function*mt(e,t={}){let r=e.getReader();try{for(;;){let n=await r.read();if(n.done)return;yield n.value}}finally{t.preventCancel!==!0&&await r.cancel(),r.releaseLock()}}var En=Mt(bn(),1);function Hw(e){let[t,r]=e[Symbol.asyncIterator]!=null?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>t.next(),push:o=>{n.push(o)},next:()=>n.length>0?{done:!1,value:n.shift()}:t.next(),[r](){return this}}}var Pt=Hw;function jw(e){return e[Symbol.asyncIterator]!=null}function qw(e,t){let r=0;if(jw(e))return(async function*(){for await(let c of e)yield t(c,r++)})();let n=Pt(e),{value:o,done:s}=n.next();if(s===!0)return(function*(){})();let i=t(o,r++);if(typeof i.then=="function")return(async function*(){yield await i;for(let c of n)yield t(c,r++)})();let a=t;return(function*(){yield i;for(let c of n)yield a(c,r++)})()}var qi=qw;var yo=class extends Error{response;constructor(t){super(t.statusText),this.name="HTTPError",this.response=t}},go=class extends Error{constructor(t="Invalid mtime"){super(t),this.name="InvalidMtimeError"}};function yt(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function zt(e){return e.constructor!=null&&(e.constructor.name==="Blob"||e.constructor.name==="File")&&typeof e.stream=="function"}function xn(e){return typeof e=="object"&&(e.path!=null||e.content!=null)}function Gt(e){return typeof e?.getReader=="function"}function wo(e){if(e!=null)return typeof e=="string"&&(e=parseInt(e,8)),e&4095}function zw(e){return Object.prototype.hasOwnProperty.call(e,"secs")}function Gw(e){return Object.prototype.hasOwnProperty.call(e,"Seconds")}function Ww(e){return Array.isArray(e)}function Tt(e){if(e!=null){if(zw(e)&&(e={secs:e.secs,nsecs:e.nsecs}),Gw(e)&&(e={secs:BigInt(e.Seconds),nsecs:e.FractionalNanoseconds}),Ww(e)&&(e={secs:BigInt(e[0]),nsecs:e[1]}),e instanceof Date){let t=e.getTime(),r=Math.floor(t/1e3);e={secs:BigInt(r),nsecs:(t-r*1e3)*1e3}}if(typeof e=="bigint"){let t=e/BigInt(1e9),r=e-t*BigInt(1e9);e={secs:t,nsecs:Number(r)}}if(Object.prototype.hasOwnProperty.call(e,"secs")){if(e.nsecs!=null&&(e.nsecs<0||e.nsecs>999999999))throw new go("mtime-nsecs must be within the range [0,999999999]");return e}}}async function*wl(e,t){if(typeof e=="string"||e instanceof String||yt(e)||zt(e)||e._readableState!=null)throw(0,En.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(Gt(e)&&(e=mt(e)),Symbol.iterator in e||Symbol.asyncIterator in e){let r=Pt(e),{value:n,done:o}=await r.peek();if(o===!0){yield*[];return}if(r.push(n),Number.isInteger(n))throw(0,En.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(n._readableState!=null){yield*qi(r,async s=>zi({content:s},t));return}if(yt(n)){yield zi({content:r},t);return}if(xn(n)||n[Symbol.iterator]||n[Symbol.asyncIterator]||Gt(n)||zt(n)){yield*qi(r,async s=>zi(s,t));return}}throw xn(e)?(0,En.default)(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):(0,En.default)(new Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}async function zi(e,t){let{path:r,mode:n,mtime:o,content:s}=e,i={path:r??"",mode:wo(n),mtime:Tt(o)};return s!=null?i.content=await t(s):r==null&&(i.content=await t(e)),i}var J=class extends Error{static name="InvalidParametersError";constructor(t="Invalid parameters"){super(t),this.name="InvalidParametersError"}},Pr=class extends Error{static name="InvalidPublicKeyError";constructor(t="Invalid public key"){super(t),this.name="InvalidPublicKeyError"}};var bo=class extends Error{static name="InvalidCIDError";constructor(t="Invalid CID"){super(t),this.name="InvalidCIDError"}},xo=class extends Error{static name="InvalidMultihashError";constructor(t="Invalid Multihash"){super(t),this.name="InvalidMultihashError"}};var Tr=class extends Error{static name="UnsupportedKeyTypeError";constructor(t="Unsupported key type"){super(t),this.name="UnsupportedKeyTypeError"}};var Gi=Symbol.for("@libp2p/peer-id");function Zw(e){return e[Symbol.asyncIterator]!=null}function Yw(e){if(Zw(e))return(async()=>{let r=[];for await(let n of e)r.push(n);return r})();let t=[];for(let r of e)t.push(r);return t}var Eo=Yw;async function So(e){if(yt(e))return new Blob([e]);if(typeof e=="string"||e instanceof String)return new Blob([e.toString()]);if(zt(e))return e;if(Gt(e)&&(e=mt(e)),Symbol.iterator in e||Symbol.asyncIterator in e){let t=Pt(e),{value:r,done:n}=await t.peek();if(n===!0)return bl(t);if(t.push(r),Number.isInteger(r))return new Blob([Uint8Array.from(await Eo(t))]);if(yt(r)||typeof r=="string"||r instanceof String)return bl(t)}throw new J(`Unexpected input: ${e}`)}async function bl(e){let t=[];for await(let r of e)t.push(r);return new Blob(t)}function xl(e){return wl(e,So,!0)}function _r(e){if(e!=null)return typeof e=="string"?e:e.toString(8).padStart(4,"0")}async function Ao(e,t,r={},n){let o=[],s=new FormData,i=0,a=0;for await(let{content:c,path:u,mode:f,mtime:l}of xl(e)){let y="",B=c!=null?"file":"dir";i>0&&(y=`-${i}`);let p=B+y,v=[];if(f!=null&&v.push(`mode=${_r(f)}`),l!=null){let{secs:S,nsecs:m}=l;v.push(`mtime=${S}`),m!=null&&v.push(`mtime-nsecs=${m}`)}if(v.length>0&&(p=`${p}?${v.join("&")}`),c!=null){s.set(p,c,u!=null?encodeURIComponent(u):void 0);let S=a+c.size;o.push({name:u,start:a,end:S}),a=S}else if(u!=null)s.set(p,new File([""],encodeURIComponent(u),{type:"application/x-directory"}));else throw new Error("path or content or both must be set");i++}return{total:a,parts:o,headers:r,body:s}}async function ve(e,t,r={},n=`-----------------------------${fl()}`){let o=Ao;return pl&&(o=Ao),o(e,t,r,n)}function G(e){if(e==null)return e;let t=/^[A-Z]+$/,r={};return Object.keys(e).reduce((n,o)=>(t.test(o)?n[o.toLowerCase()]=e[o]:t.test(o[0])?n[o[0].toLowerCase()+o.slice(1)]=e[o]:n[o]=e[o],n),r)}function h({arg:e,searchParams:t,hashAlg:r,mtime:n,mode:o,...s}={}){t!=null&&(s={...s,...t}),r!=null&&(s.hash=r),n!=null&&(n=Tt(n),s.mtime=n.secs,s.mtimeNsecs=n.nsecs),o!=null&&(s.mode=_r(o)),isNaN(s.timeout)||(s.timeout=`${s.timeout}ms`),e==null?e=[]:Array.isArray(e)||(e=[e]);let i={};for(let[c,u]of Object.entries(s))u!=null&&(i[c]=u);let a=new URLSearchParams(i);return e.forEach(c=>{a.append("arg",c)}),a}function vo(e){return async function*(r,n={}){let o=new AbortController,s=pe([o.signal,n.signal]);try{let{headers:i,body:a,total:c,parts:u}=await ve(r,o,n.headers),[f,l]=typeof n.progress=="function"?Xw(c,n.progress,u):[void 0,void 0],y=await e.post("add",{searchParams:h({"stream-channels":!0,...n,progress:!!f}),onUploadProgress:l,signal:s,headers:i,body:a});for await(let B of y.ndjson())B=G(B),B.hash!==void 0?yield Qw(B):f?.(B.bytes??0,B.name)}finally{s.clear()}}}var Xw=(e,t,r)=>r!=null?[void 0,Jw(e,r,t)]:[t,void 0],Jw=(e,t,r)=>{let n=0,o=t.length;return({loaded:s,total:i})=>{let a=Math.floor(s/i*e);for(;n<o;){let{start:c,end:u,name:f}=t[n];if(a<u){r(a-c,f);break}else r(u-c,f),n+=1}}};function Qw({name:e,hash:t,size:r,mode:n,mtime:o,mtimeNsecs:s}){let i={path:e,cid:I.parse(t),size:parseInt(r)};return n!=null&&(i.mode=parseInt(n,8)),o!=null&&(i.mtime={secs:o,nsecs:s??0}),i}function eb(e){return e[Symbol.asyncIterator]!=null}function tb(e){if(eb(e))return(async()=>{let r;for await(let n of e)r=n;return r})();let t;for(let r of e)t=r;return t}var _t=tb;var Io=Mt(bn(),1);async function*El(e,t){if(e==null)throw(0,Io.default)(new Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");if(typeof e=="string"||e instanceof String){yield Co(e.toString(),t);return}if(yt(e)||zt(e)){yield Co(e,t);return}if(Gt(e)&&(e=mt(e)),Symbol.iterator in e||Symbol.asyncIterator in e){let r=Pt(e),{value:n,done:o}=await r.peek();if(o===!0){yield{content:[]};return}if(r.push(n),Number.isInteger(n)||yt(n)||typeof n=="string"||n instanceof String){yield Co(r,t);return}throw(0,Io.default)(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(xn(e)){yield Co(e,t);return}throw(0,Io.default)(new Error('Unexpected input: cannot convert "'+typeof e+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function Co(e,t){let{path:r,mode:n,mtime:o,content:s}=e,i={path:r??"",mode:wo(n),mtime:Tt(o)};return s!=null?i.content=await t(s):r==null&&(i.content=await t(e)),i}function Sl(e){return El(e,So)}function Al(e){let t=vo(e);return async function(n,o={}){let s=Sl(n),i=t(s,o),a=await _t(i);if(a==null)throw new Error("Invalid body");return a}}var Cl=Symbol.for("@achingbrain/uint8arraylist");function vl(e,t){if(t==null||t<0)throw new RangeError("index is out of bounds");let r=0;for(let n of e){let o=r+n.byteLength;if(t<o)return{buf:n,index:t-r};r=o}throw new RangeError("index is out of bounds")}function Bo(e){return!!e?.[Cl]}var Oe=class e{bufs;length;[Cl]=!0;constructor(...t){this.bufs=[],this.length=0,t.length>0&&this.appendAll(t)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...t){this.appendAll(t)}appendAll(t){let r=0;for(let n of t)if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.push(n);else if(Bo(n))r+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}prepend(...t){this.prependAll(t)}prependAll(t){let r=0;for(let n of t.reverse())if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.unshift(n);else if(Bo(n))r+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}get(t){let r=vl(this.bufs,t);return r.buf[r.index]}set(t,r){let n=vl(this.bufs,t);n.buf[n.index]=r}write(t,r=0){if(t instanceof Uint8Array)for(let n=0;n<t.length;n++)this.set(r+n,t[n]);else if(Bo(t))for(let n=0;n<t.length;n++)this.set(r+n,t.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(t){if(t=Math.trunc(t),!(Number.isNaN(t)||t<=0)){if(t===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(t>=this.bufs[0].byteLength)t-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(t),this.length-=t;break}}}slice(t,r){let{bufs:n,length:o}=this._subList(t,r);return ft(n,o)}subarray(t,r){let{bufs:n,length:o}=this._subList(t,r);return n.length===1?n[0]:ft(n,o)}sublist(t,r){let{bufs:n,length:o}=this._subList(t,r),s=new e;return s.length=o,s.bufs=[...n],s}_subList(t,r){if(t=t??0,r=r??this.length,t<0&&(t=this.length+t),r<0&&(r=this.length+r),t<0||r>this.length)throw new RangeError("index is out of bounds");if(t===r)return{bufs:[],length:0};if(t===0&&r===this.length)return{bufs:this.bufs,length:this.length};let n=[],o=0;for(let s=0;s<this.bufs.length;s++){let i=this.bufs[s],a=o,c=a+i.byteLength;if(o=c,t>=c)continue;let u=t>=a&&t<c,f=r>a&&r<=c;if(u&&f){if(t===a&&r===c){n.push(i);break}let l=t-a;n.push(i.subarray(l,l+(r-t)));break}if(u){if(t===0){n.push(i);continue}n.push(i.subarray(t-a));continue}if(f){if(r===c){n.push(i);break}n.push(i.subarray(0,r-a));break}n.push(i)}return{bufs:n,length:r-t}}indexOf(t,r=0){if(!Bo(t)&&!(t instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');let n=t instanceof Uint8Array?t:t.subarray();if(r=Number(r??0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),t.length===0)return r>this.length?this.length:r;let o=n.byteLength;if(o===0)throw new TypeError("search must be at least 1 byte long");let s=256,i=new Int32Array(s);for(let l=0;l<s;l++)i[l]=-1;for(let l=0;l<o;l++)i[n[l]]=l;let a=i,c=this.byteLength-n.byteLength,u=n.byteLength-1,f;for(let l=r;l<=c;l+=f){f=0;for(let y=u;y>=0;y--){let B=this.get(l+y);if(n[y]!==B){f=Math.max(1,y-a[B]);break}}if(f===0)return l}return-1}getInt8(t){let r=this.subarray(t,t+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt8(0)}setInt8(t,r){let n=De(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,r),this.write(n,t)}getInt16(t,r){let n=this.subarray(t,t+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,r)}setInt16(t,r,n){let o=ct(2);new DataView(o.buffer,o.byteOffset,o.byteLength).setInt16(0,r,n),this.write(o,t)}getInt32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,r)}setInt32(t,r,n){let o=ct(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setInt32(0,r,n),this.write(o,t)}getBigInt64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,r)}setBigInt64(t,r,n){let o=ct(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setBigInt64(0,r,n),this.write(o,t)}getUint8(t){let r=this.subarray(t,t+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint8(0)}setUint8(t,r){let n=De(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,r),this.write(n,t)}getUint16(t,r){let n=this.subarray(t,t+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,r)}setUint16(t,r,n){let o=ct(2);new DataView(o.buffer,o.byteOffset,o.byteLength).setUint16(0,r,n),this.write(o,t)}getUint32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,r)}setUint32(t,r,n){let o=ct(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setUint32(0,r,n),this.write(o,t)}getBigUint64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,r)}setBigUint64(t,r,n){let o=ct(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setBigUint64(0,r,n),this.write(o,t)}getFloat32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,r)}setFloat32(t,r,n){let o=ct(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setFloat32(0,r,n),this.write(o,t)}getFloat64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,r)}setFloat64(t,r,n){let o=ct(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setFloat64(0,r,n),this.write(o,t)}equals(t){if(t==null||!(t instanceof e)||t.bufs.length!==this.bufs.length)return!1;for(let r=0;r<this.bufs.length;r++)if(!Se(this.bufs[r],t.bufs[r]))return!1;return!0}static fromUint8Arrays(t,r){let n=new e;return n.bufs=t,r==null&&(r=t.reduce((o,s)=>o+s.byteLength,0)),n.length=r,n}};var rb=parseInt("11111",2),Wi=parseInt("10000000",2),nb=parseInt("01111111",2),Il={0:Sn,1:Sn,2:ob,3:ab,4:cb,5:ib,6:sb,16:Sn,22:Sn,48:Sn};function gt(e,t={offset:0}){let r=e[t.offset]&rb;if(t.offset++,Il[r]!=null)return Il[r](e,t);throw new Error("No decoder for tag "+r)}function An(e,t){let r=0;if((e[t.offset]&Wi)===Wi){let n=e[t.offset]&nb,o="0x";t.offset++;for(let s=0;s<n;s++,t.offset++)o+=e[t.offset].toString(16).padStart(2,"0");r=parseInt(o,16)}else r=e[t.offset],t.offset++;return r}function Sn(e,t){An(e,t);let r=[];for(;!(t.offset>=e.byteLength);){let n=gt(e,t);if(n===null)break;r.push(n)}return r}function ob(e,t){let r=An(e,t),n=t.offset,o=t.offset+r,s=[];for(let i=n;i<o;i++)i===n&&e[i]===0||s.push(e[i]);return t.offset+=r,Uint8Array.from(s)}function sb(e,t){let r=An(e,t),n=t.offset+r,o=e[t.offset];t.offset++;let s=0,i=0;o<40?(s=0,i=o):o<80?(s=1,i=o-40):(s=2,i=o-80);let a=`${s}.${i}`,c=[];for(;t.offset<n;){let u=e[t.offset];if(t.offset++,c.push(u&127),u<128){c.reverse();let f=0;for(let l=0;l<c.length;l++)f+=c[l]<<l*7;a+=`.${f}`,c=[]}}return a}function ib(e,t){return t.offset++,null}function ab(e,t){let r=An(e,t),n=e[t.offset];t.offset++;let o=e.subarray(t.offset,t.offset+r-1);if(t.offset+=r,n!==0)throw new Error("Unused bits in bit string is unimplemented");return o}function cb(e,t){let r=An(e,t),n=e.subarray(t.offset,t.offset+r);return t.offset+=r,n}function fb(e){let t=e.toString(16);t.length%2===1&&(t="0"+t);let r=new Oe;for(let n=0;n<t.length;n+=2)r.append(Uint8Array.from([parseInt(`${t[n]}${t[n+1]}`,16)]));return r}function Zi(e){if(e.byteLength<128)return Uint8Array.from([e.byteLength]);let t=fb(e.byteLength);return new Oe(Uint8Array.from([t.byteLength|Wi]),t)}function Te(e){let t=new Oe,r=128;return(e.subarray()[0]&r)===r&&t.append(Uint8Array.from([0])),t.append(e),new Oe(Uint8Array.from([2]),Zi(t),t)}function Po(e){let t=Uint8Array.from([0]),r=new Oe(t,e);return new Oe(Uint8Array.from([3]),Zi(r),r)}function Ut(e,t=48){let r=new Oe;for(let n of e)r.append(n);return new Oe(Uint8Array.from([t]),Zi(r),r)}async function Bl(e,t,r,n){let o=await crypto.subtle.importKey("jwk",e,{name:"ECDSA",namedCurve:e.crv??"P-256"},!1,["verify"]);n?.signal?.throwIfAborted();let s=await crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},o,t,r.subarray());return n?.signal?.throwIfAborted(),s}var ub=Uint8Array.from([6,8,42,134,72,206,61,3,1,7]),lb=Uint8Array.from([6,5,43,129,4,0,34]),db=Uint8Array.from([6,5,43,129,4,0,35]),hb={ext:!0,kty:"EC",crv:"P-256"},pb={ext:!0,kty:"EC",crv:"P-384"},mb={ext:!0,kty:"EC",crv:"P-521"},Yi=32,Xi=48,Ji=66;function Qi(e){let t=gt(e);return Pl(t)}function Pl(e){let t=e[1][1][0],r=1,n,o;if(t.byteLength===Yi*2+1)return n=q(t.subarray(r,r+Yi),"base64url"),o=q(t.subarray(r+Yi),"base64url"),new Ur({...hb,key_ops:["verify"],x:n,y:o});if(t.byteLength===Xi*2+1)return n=q(t.subarray(r,r+Xi),"base64url"),o=q(t.subarray(r+Xi),"base64url"),new Ur({...pb,key_ops:["verify"],x:n,y:o});if(t.byteLength===Ji*2+1)return n=q(t.subarray(r,r+Ji),"base64url"),o=q(t.subarray(r+Ji),"base64url"),new Ur({...mb,key_ops:["verify"],x:n,y:o});throw new J(`coordinates were wrong length, got ${t.byteLength}, expected 65, 97 or 133`)}function Tl(e){return Ut([Te(Uint8Array.from([1])),Ut([yb(e.crv)],160),Ut([Po(new Oe(Uint8Array.from([4]),Y(e.x??"","base64url"),Y(e.y??"","base64url")))],161)]).subarray()}function yb(e){if(e==="P-256")return ub;if(e==="P-384")return lb;if(e==="P-521")return db;throw new J(`Invalid curve ${e}`)}var Ur=class{type="ECDSA";jwk;_raw;constructor(t){this.jwk=t}get raw(){return this._raw==null&&(this._raw=Tl(this.jwk)),this._raw}toMultihash(){return Pe.digest(Dr(this))}toCID(){return I.createV1(114,this.toMultihash())}toString(){return te.encode(this.toMultihash().bytes).substring(1)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:Se(this.raw,t.raw)}async verify(t,r,n){return Bl(this.jwk,r,t,n)}};function Wt(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function st(e,t=""){if(!Number.isSafeInteger(e)||e<0){let r=t&&`"${t}" `;throw new Error(`${r}expected integer >= 0, got ${e}`)}}function j(e,t,r=""){let n=Wt(e),o=e?.length,s=t!==void 0;if(!n||s&&o!==t){let i=r&&`"${r}" `,a=s?` of length ${t}`:"",c=n?`length=${o}`:`type=${typeof e}`;throw new Error(i+"expected Uint8Array"+a+", got "+c)}return e}function To(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash must wrapped by utils.createHasher");st(e.outputLen),st(e.blockLen)}function Rr(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Ul(e,t){j(e,void 0,"digestInto() output");let r=t.outputLen;if(e.length<r)throw new Error('"digestInto() output" expected to be of length >='+r)}function bt(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function _o(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Ye(e,t){return e<<32-t|e>>>t}var Dl=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",gb=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function xt(e){if(j(e),Dl)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=gb[e[r]];return t}var wt={_0:48,_9:57,A:65,F:70,a:97,f:102};function _l(e){if(e>=wt._0&&e<=wt._9)return e-wt._0;if(e>=wt.A&&e<=wt.F)return e-(wt.A-10);if(e>=wt.a&&e<=wt.f)return e-(wt.a-10)}function Et(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(Dl)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let o=0,s=0;o<r;o++,s+=2){let i=_l(e.charCodeAt(s)),a=_l(e.charCodeAt(s+1));if(i===void 0||a===void 0){let c=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}n[o]=i*16+a}return n}function _e(...e){let t=0;for(let n=0;n<e.length;n++){let o=e[n];j(o),t+=o.length}let r=new Uint8Array(t);for(let n=0,o=0;n<e.length;n++){let s=e[n];r.set(s,o),o+=s.length}return r}function ea(e,t={}){let r=(o,s)=>e(s).update(o).digest(),n=e(void 0);return r.outputLen=n.outputLen,r.blockLen=n.blockLen,r.create=o=>e(o),Object.assign(r,t),Object.freeze(r)}function Nr(e=32){let t=typeof globalThis=="object"?globalThis.crypto:null;if(typeof t?.getRandomValues!="function")throw new Error("crypto.getRandomValues must be defined");return t.getRandomValues(new Uint8Array(e))}var ta=e=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,e])});function Rl(e,t,r){return e&t^~e&r}function Nl(e,t,r){return e&t^e&r^t&r}var vn=class{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor(t,r,n,o){this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=o,this.buffer=new Uint8Array(t),this.view=_o(this.buffer)}update(t){Rr(this),j(t);let{view:r,buffer:n,blockLen:o}=this,s=t.length;for(let i=0;i<s;){let a=Math.min(o-this.pos,s-i);if(a===o){let c=_o(t);for(;o<=s-i;i+=o)this.process(c,i);continue}n.set(t.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Rr(this),Ul(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:o,isLE:s}=this,{pos:i}=this;r[i++]=128,bt(this.buffer.subarray(i)),this.padOffset>o-i&&(this.process(n,0),i=0);for(let l=i;l<o;l++)r[l]=0;n.setBigUint64(o-8,BigInt(this.length*8),s),this.process(n,0);let a=_o(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen must be aligned to 32bit");let u=c/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)a.setUint32(4*l,f[l],s)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||=new this.constructor,t.set(...this.get());let{blockLen:r,buffer:n,length:o,finished:s,destroyed:i,pos:a}=this;return t.destroyed=i,t.finished=s,t.length=o,t.pos=a,o%r&&t.buffer.set(n),t}clone(){return this._cloneInto()}},St=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);var xe=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]);var Uo=BigInt(4294967295),kl=BigInt(32);function wb(e,t=!1){return t?{h:Number(e&Uo),l:Number(e>>kl&Uo)}:{h:Number(e>>kl&Uo)|0,l:Number(e&Uo)|0}}function Ll(e,t=!1){let r=e.length,n=new Uint32Array(r),o=new Uint32Array(r);for(let s=0;s<r;s++){let{h:i,l:a}=wb(e[s],t);[n[s],o[s]]=[i,a]}return[n,o]}var ra=(e,t,r)=>e>>>r,na=(e,t,r)=>e<<32-r|t>>>r,Zt=(e,t,r)=>e>>>r|t<<32-r,Yt=(e,t,r)=>e<<32-r|t>>>r,Cn=(e,t,r)=>e<<64-r|t>>>r-32,In=(e,t,r)=>e>>>r-32|t<<64-r;function it(e,t,r,n){let o=(t>>>0)+(n>>>0);return{h:e+r+(o/2**32|0)|0,l:o|0}}var Ol=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),Kl=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,$l=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),Ml=(e,t,r,n,o)=>t+r+n+o+(e/2**32|0)|0,Fl=(e,t,r,n,o)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(o>>>0),Vl=(e,t,r,n,o,s)=>t+r+n+o+s+(e/2**32|0)|0;var xb=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Dt=new Uint32Array(64),oa=class extends vn{constructor(t){super(64,t,8,!1)}get(){let{A:t,B:r,C:n,D:o,E:s,F:i,G:a,H:c}=this;return[t,r,n,o,s,i,a,c]}set(t,r,n,o,s,i,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=o|0,this.E=s|0,this.F=i|0,this.G=a|0,this.H=c|0}process(t,r){for(let l=0;l<16;l++,r+=4)Dt[l]=t.getUint32(r,!1);for(let l=16;l<64;l++){let y=Dt[l-15],B=Dt[l-2],p=Ye(y,7)^Ye(y,18)^y>>>3,v=Ye(B,17)^Ye(B,19)^B>>>10;Dt[l]=v+Dt[l-7]+p+Dt[l-16]|0}let{A:n,B:o,C:s,D:i,E:a,F:c,G:u,H:f}=this;for(let l=0;l<64;l++){let y=Ye(a,6)^Ye(a,11)^Ye(a,25),B=f+y+Rl(a,c,u)+xb[l]+Dt[l]|0,v=(Ye(n,2)^Ye(n,13)^Ye(n,22))+Nl(n,o,s)|0;f=u,u=c,c=a,a=i+B|0,i=s,s=o,o=n,n=B+v|0}n=n+this.A|0,o=o+this.B|0,s=s+this.C|0,i=i+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,o,s,i,a,c,u,f)}roundClean(){bt(Dt)}destroy(){this.set(0,0,0,0,0,0,0,0),bt(this.buffer)}},sa=class extends oa{A=St[0]|0;B=St[1]|0;C=St[2]|0;D=St[3]|0;E=St[4]|0;F=St[5]|0;G=St[6]|0;H=St[7]|0;constructor(){super(32)}};var Hl=Ll(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Eb=Hl[0],Sb=Hl[1],Rt=new Uint32Array(80),Nt=new Uint32Array(80),ia=class extends vn{constructor(t){super(128,t,16,!1)}get(){let{Ah:t,Al:r,Bh:n,Bl:o,Ch:s,Cl:i,Dh:a,Dl:c,Eh:u,El:f,Fh:l,Fl:y,Gh:B,Gl:p,Hh:v,Hl:S}=this;return[t,r,n,o,s,i,a,c,u,f,l,y,B,p,v,S]}set(t,r,n,o,s,i,a,c,u,f,l,y,B,p,v,S){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=o|0,this.Ch=s|0,this.Cl=i|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=f|0,this.Fh=l|0,this.Fl=y|0,this.Gh=B|0,this.Gl=p|0,this.Hh=v|0,this.Hl=S|0}process(t,r){for(let b=0;b<16;b++,r+=4)Rt[b]=t.getUint32(r),Nt[b]=t.getUint32(r+=4);for(let b=16;b<80;b++){let T=Rt[b-15]|0,N=Nt[b-15]|0,$=Zt(T,N,1)^Zt(T,N,8)^ra(T,N,7),M=Yt(T,N,1)^Yt(T,N,8)^na(T,N,7),A=Rt[b-2]|0,C=Nt[b-2]|0,V=Zt(A,C,19)^Cn(A,C,61)^ra(A,C,6),z=Yt(A,C,19)^In(A,C,61)^na(A,C,6),O=$l(M,z,Nt[b-7],Nt[b-16]),w=Ml(O,$,V,Rt[b-7],Rt[b-16]);Rt[b]=w|0,Nt[b]=O|0}let{Ah:n,Al:o,Bh:s,Bl:i,Ch:a,Cl:c,Dh:u,Dl:f,Eh:l,El:y,Fh:B,Fl:p,Gh:v,Gl:S,Hh:m,Hl:P}=this;for(let b=0;b<80;b++){let T=Zt(l,y,14)^Zt(l,y,18)^Cn(l,y,41),N=Yt(l,y,14)^Yt(l,y,18)^In(l,y,41),$=l&B^~l&v,M=y&p^~y&S,A=Fl(P,N,M,Sb[b],Nt[b]),C=Vl(A,m,T,$,Eb[b],Rt[b]),V=A|0,z=Zt(n,o,28)^Cn(n,o,34)^Cn(n,o,39),O=Yt(n,o,28)^In(n,o,34)^In(n,o,39),w=n&s^n&a^s&a,x=o&i^o&c^i&c;m=v|0,P=S|0,v=B|0,S=p|0,B=l|0,p=y|0,{h:l,l:y}=it(u|0,f|0,C|0,V|0),u=a|0,f=c|0,a=s|0,c=i|0,s=n|0,i=o|0;let g=Ol(V,O,x);n=Kl(g,C,z,w),o=g|0}({h:n,l:o}=it(this.Ah|0,this.Al|0,n|0,o|0)),{h:s,l:i}=it(this.Bh|0,this.Bl|0,s|0,i|0),{h:a,l:c}=it(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:f}=it(this.Dh|0,this.Dl|0,u|0,f|0),{h:l,l:y}=it(this.Eh|0,this.El|0,l|0,y|0),{h:B,l:p}=it(this.Fh|0,this.Fl|0,B|0,p|0),{h:v,l:S}=it(this.Gh|0,this.Gl|0,v|0,S|0),{h:m,l:P}=it(this.Hh|0,this.Hl|0,m|0,P|0),this.set(n,o,s,i,a,c,u,f,l,y,B,p,v,S,m,P)}roundClean(){bt(Rt,Nt)}destroy(){bt(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},aa=class extends ia{Ah=xe[0]|0;Al=xe[1]|0;Bh=xe[2]|0;Bl=xe[3]|0;Ch=xe[4]|0;Cl=xe[5]|0;Dh=xe[6]|0;Dl=xe[7]|0;Eh=xe[8]|0;El=xe[9]|0;Fh=xe[10]|0;Fl=xe[11]|0;Gh=xe[12]|0;Gl=xe[13]|0;Hh=xe[14]|0;Hl=xe[15]|0;constructor(){super(64)}};var kr=ea(()=>new sa,ta(1));var jl=ea(()=>new aa,ta(3));var fa=BigInt(0),ca=BigInt(1);function At(e,t=""){if(typeof e!="boolean"){let r=t&&`"${t}" `;throw new Error(r+"expected boolean, got type="+typeof e)}return e}function ql(e){if(typeof e=="bigint"){if(!Do(e))throw new Error("positive bigint expected, got "+e)}else st(e);return e}function Bn(e){let t=ql(e).toString(16);return t.length&1?"0"+t:t}function zl(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?fa:BigInt("0x"+e)}function Lr(e){return zl(xt(e))}function Xt(e){return zl(xt(No(j(e)).reverse()))}function Ro(e,t){st(t),e=ql(e);let r=Et(e.toString(16).padStart(t*2,"0"));if(r.length!==t)throw new Error("number too large");return r}function ua(e,t){return Ro(e,t).reverse()}function No(e){return Uint8Array.from(e)}var Do=e=>typeof e=="bigint"&&fa<=e;function Ab(e,t,r){return Do(e)&&Do(t)&&Do(r)&&t<=e&&e<r}function Pn(e,t,r,n){if(!Ab(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function la(e){let t;for(t=0;e>fa;e>>=ca,t+=1);return t}var Tn=e=>(ca<<BigInt(e))-ca;function Gl(e,t,r){if(st(e,"hashLen"),st(t,"qByteLen"),typeof r!="function")throw new Error("hmacFn must be a function");let n=S=>new Uint8Array(S),o=Uint8Array.of(),s=Uint8Array.of(0),i=Uint8Array.of(1),a=1e3,c=n(e),u=n(e),f=0,l=()=>{c.fill(1),u.fill(0),f=0},y=(...S)=>r(u,_e(c,...S)),B=(S=o)=>{u=y(s,S),c=y(),S.length!==0&&(u=y(i,S),c=y())},p=()=>{if(f++>=a)throw new Error("drbg: tried max amount of iterations");let S=0,m=[];for(;S<t;){c=y();let P=c.slice();m.push(P),S+=c.length}return _e(...m)};return(S,m)=>{l(),B(S);let P;for(;!(P=m(p()));)B();return l(),P}}function kt(e,t={},r={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function n(s,i,a){let c=e[s];if(a&&c===void 0)return;let u=typeof c;if(u!==i||c===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${u}`)}let o=(s,i)=>Object.entries(s).forEach(([a,c])=>n(a,c,i));o(t,!1),o(r,!0)}function Or(e){let t=new WeakMap;return(r,...n)=>{let o=t.get(r);if(o!==void 0)return o;let s=e(r,...n);return t.set(r,s),s}}var Be=BigInt(0),me=BigInt(1),Jt=BigInt(2),Yl=BigInt(3),Xl=BigInt(4),Jl=BigInt(5),vb=BigInt(7),Ql=BigInt(8),Cb=BigInt(9),ed=BigInt(16);function ce(e,t){let r=e%t;return r>=Be?r:t+r}function re(e,t,r){let n=e;for(;t-- >Be;)n*=n,n%=r;return n}function Wl(e,t){if(e===Be)throw new Error("invert: expected non-zero number");if(t<=Be)throw new Error("invert: expected positive modulus, got "+t);let r=ce(e,t),n=t,o=Be,s=me,i=me,a=Be;for(;r!==Be;){let u=n/r,f=n%r,l=o-i*u,y=s-a*u;n=r,r=f,o=i,s=a,i=l,a=y}if(n!==me)throw new Error("invert: does not exist");return ce(o,t)}function ha(e,t,r){if(!e.eql(e.sqr(t),r))throw new Error("Cannot find square root")}function td(e,t){let r=(e.ORDER+me)/Xl,n=e.pow(t,r);return ha(e,n,t),n}function Ib(e,t){let r=(e.ORDER-Jl)/Ql,n=e.mul(t,Jt),o=e.pow(n,r),s=e.mul(t,o),i=e.mul(e.mul(s,Jt),o),a=e.mul(s,e.sub(i,e.ONE));return ha(e,a,t),a}function Bb(e){let t=Kr(e),r=rd(e),n=r(t,t.neg(t.ONE)),o=r(t,n),s=r(t,t.neg(n)),i=(e+vb)/ed;return(a,c)=>{let u=a.pow(c,i),f=a.mul(u,n),l=a.mul(u,o),y=a.mul(u,s),B=a.eql(a.sqr(f),c),p=a.eql(a.sqr(l),c);u=a.cmov(u,f,B),f=a.cmov(y,l,p);let v=a.eql(a.sqr(f),c),S=a.cmov(u,f,v);return ha(a,S,c),S}}function rd(e){if(e<Yl)throw new Error("sqrt is not defined for small field");let t=e-me,r=0;for(;t%Jt===Be;)t/=Jt,r++;let n=Jt,o=Kr(e);for(;Zl(o,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return td;let s=o.pow(n,t),i=(t+me)/Jt;return function(c,u){if(c.is0(u))return u;if(Zl(c,u)!==1)throw new Error("Cannot find square root");let f=r,l=c.mul(c.ONE,s),y=c.pow(u,t),B=c.pow(u,i);for(;!c.eql(y,c.ONE);){if(c.is0(y))return c.ZERO;let p=1,v=c.sqr(y);for(;!c.eql(v,c.ONE);)if(p++,v=c.sqr(v),p===f)throw new Error("Cannot find square root");let S=me<<BigInt(f-p-1),m=c.pow(l,S);f=p,l=c.sqr(m),y=c.mul(y,l),B=c.mul(B,m)}return B}}function Pb(e){return e%Xl===Yl?td:e%Ql===Jl?Ib:e%ed===Cb?Bb(e):rd(e)}var nd=(e,t)=>(ce(e,t)&me)===me,Tb=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function pa(e){let t={ORDER:"bigint",BYTES:"number",BITS:"number"},r=Tb.reduce((n,o)=>(n[o]="function",n),t);return kt(e,r),e}function _b(e,t,r){if(r<Be)throw new Error("invalid exponent, negatives unsupported");if(r===Be)return e.ONE;if(r===me)return t;let n=e.ONE,o=t;for(;r>Be;)r&me&&(n=e.mul(n,o)),o=e.sqr(o),r>>=me;return n}function _n(e,t,r=!1){let n=new Array(t.length).fill(r?e.ZERO:void 0),o=t.reduce((i,a,c)=>e.is0(a)?i:(n[c]=i,e.mul(i,a)),e.ONE),s=e.inv(o);return t.reduceRight((i,a,c)=>e.is0(a)?i:(n[c]=e.mul(i,n[c]),e.mul(i,a)),s),n}function Zl(e,t){let r=(e.ORDER-me)/Jt,n=e.pow(t,r),o=e.eql(n,e.ONE),s=e.eql(n,e.ZERO),i=e.eql(n,e.neg(e.ONE));if(!o&&!s&&!i)throw new Error("invalid Legendre symbol result");return o?1:s?0:-1}function Ub(e,t){t!==void 0&&st(t);let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}var da=class{ORDER;BITS;BYTES;isLE;ZERO=Be;ONE=me;_lengths;_sqrt;_mod;constructor(t,r={}){if(t<=Be)throw new Error("invalid field: expected ORDER > 0, got "+t);let n;this.isLE=!1,r!=null&&typeof r=="object"&&(typeof r.BITS=="number"&&(n=r.BITS),typeof r.sqrt=="function"&&(this.sqrt=r.sqrt),typeof r.isLE=="boolean"&&(this.isLE=r.isLE),r.allowedLengths&&(this._lengths=r.allowedLengths?.slice()),typeof r.modFromBytes=="boolean"&&(this._mod=r.modFromBytes));let{nBitLength:o,nByteLength:s}=Ub(t,n);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");this.ORDER=t,this.BITS=o,this.BYTES=s,this._sqrt=void 0,Object.preventExtensions(this)}create(t){return ce(t,this.ORDER)}isValid(t){if(typeof t!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof t);return Be<=t&&t<this.ORDER}is0(t){return t===Be}isValidNot0(t){return!this.is0(t)&&this.isValid(t)}isOdd(t){return(t&me)===me}neg(t){return ce(-t,this.ORDER)}eql(t,r){return t===r}sqr(t){return ce(t*t,this.ORDER)}add(t,r){return ce(t+r,this.ORDER)}sub(t,r){return ce(t-r,this.ORDER)}mul(t,r){return ce(t*r,this.ORDER)}pow(t,r){return _b(this,t,r)}div(t,r){return ce(t*Wl(r,this.ORDER),this.ORDER)}sqrN(t){return t*t}addN(t,r){return t+r}subN(t,r){return t-r}mulN(t,r){return t*r}inv(t){return Wl(t,this.ORDER)}sqrt(t){return this._sqrt||(this._sqrt=Pb(this.ORDER)),this._sqrt(this,t)}toBytes(t){return this.isLE?ua(t,this.BYTES):Ro(t,this.BYTES)}fromBytes(t,r=!1){j(t);let{_lengths:n,BYTES:o,isLE:s,ORDER:i,_mod:a}=this;if(n){if(!n.includes(t.length)||t.length>o)throw new Error("Field.fromBytes: expected "+n+" bytes, got "+t.length);let u=new Uint8Array(o);u.set(t,s?0:u.length-t.length),t=u}if(t.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+t.length);let c=s?Xt(t):Lr(t);if(a&&(c=ce(c,i)),!r&&!this.isValid(c))throw new Error("invalid field element: outside of range 0..ORDER");return c}invertBatch(t){return _n(this,t)}cmov(t,r,n){return n?r:t}};function Kr(e,t={}){return new da(e,t)}function od(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function ma(e){let t=od(e);return t+Math.ceil(t/2)}function ya(e,t,r=!1){j(e);let n=e.length,o=od(t),s=ma(t);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);let i=r?Xt(e):Lr(e),a=ce(i,t-me)+me;return r?ua(a,o):Ro(a,o)}var $r=BigInt(0),Qt=BigInt(1);function Un(e,t){let r=t.negate();return e?r:t}function er(e,t){let r=_n(e.Fp,t.map(n=>n.Z));return t.map((n,o)=>e.fromAffine(n.toAffine(r[o])))}function cd(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function ga(e,t){cd(e,t);let r=Math.ceil(t/e)+1,n=2**(e-1),o=2**e,s=Tn(e),i=BigInt(e);return{windows:r,windowSize:n,mask:s,maxNumber:o,shiftBy:i}}function sd(e,t,r){let{windowSize:n,mask:o,maxNumber:s,shiftBy:i}=r,a=Number(e&o),c=e>>i;a>n&&(a-=s,c+=Qt);let u=t*n,f=u+Math.abs(a)-1,l=a===0,y=a<0,B=t%2!==0;return{nextN:c,offset:f,isZero:l,isNeg:y,isNegF:B,offsetF:u}}var wa=new WeakMap,fd=new WeakMap;function ba(e){return fd.get(e)||1}function id(e){if(e!==$r)throw new Error("invalid wNAF")}var Mr=class{BASE;ZERO;Fn;bits;constructor(t,r){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=r}_unsafeLadder(t,r,n=this.ZERO){let o=t;for(;r>$r;)r&Qt&&(n=n.add(o)),o=o.double(),r>>=Qt;return n}precomputeWindow(t,r){let{windows:n,windowSize:o}=ga(r,this.bits),s=[],i=t,a=i;for(let c=0;c<n;c++){a=i,s.push(a);for(let u=1;u<o;u++)a=a.add(i),s.push(a);i=a.double()}return s}wNAF(t,r,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let o=this.ZERO,s=this.BASE,i=ga(t,this.bits);for(let a=0;a<i.windows;a++){let{nextN:c,offset:u,isZero:f,isNeg:l,isNegF:y,offsetF:B}=sd(n,a,i);n=c,f?s=s.add(Un(y,r[B])):o=o.add(Un(l,r[u]))}return id(n),{p:o,f:s}}wNAFUnsafe(t,r,n,o=this.ZERO){let s=ga(t,this.bits);for(let i=0;i<s.windows&&n!==$r;i++){let{nextN:a,offset:c,isZero:u,isNeg:f}=sd(n,i,s);if(n=a,!u){let l=r[c];o=o.add(f?l.negate():l)}}return id(n),o}getPrecomputes(t,r,n){let o=wa.get(r);return o||(o=this.precomputeWindow(r,t),t!==1&&(typeof n=="function"&&(o=n(o)),wa.set(r,o))),o}cached(t,r,n){let o=ba(t);return this.wNAF(o,this.getPrecomputes(o,t,n),r)}unsafe(t,r,n,o){let s=ba(t);return s===1?this._unsafeLadder(t,r,o):this.wNAFUnsafe(s,this.getPrecomputes(s,t,n),r,o)}createCache(t,r){cd(r,this.bits),fd.set(t,r),wa.delete(t)}hasCache(t){return ba(t)!==1}};function ud(e,t,r,n){let o=t,s=e.ZERO,i=e.ZERO;for(;r>$r||n>$r;)r&Qt&&(s=s.add(o)),n&Qt&&(i=i.add(o)),o=o.double(),r>>=Qt,n>>=Qt;return{p1:s,p2:i}}function ad(e,t,r){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return pa(t),t}else return Kr(e,{isLE:r})}function ko(e,t,r={},n){if(n===void 0&&(n=e==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(let c of["p","n","h"]){let u=t[c];if(!(typeof u=="bigint"&&u>$r))throw new Error(`CURVE.${c} must be positive bigint`)}let o=ad(t.p,r.Fp,n),s=ad(t.n,r.Fn,n),a=["Gx","Gy","a",e==="weierstrass"?"b":"d"];for(let c of a)if(!o.isValid(t[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:o,Fn:s}}function Lo(e,t){return function(n){let o=e(n);return{secretKey:o,publicKey:t(o)}}}var Lt=BigInt(0),ye=BigInt(1),xa=BigInt(2),Db=BigInt(8);function Rb(e,t,r,n){let o=e.sqr(r),s=e.sqr(n),i=e.add(e.mul(t.a,o),s),a=e.add(e.ONE,e.mul(t.d,e.mul(o,s)));return e.eql(i,a)}function ld(e,t={}){let r=ko("edwards",e,t,t.FpFnLE),{Fp:n,Fn:o}=r,s=r.CURVE,{h:i}=s;kt(t,{},{uvRatio:"function"});let a=xa<<BigInt(o.BYTES*8)-ye,c=S=>n.create(S),u=t.uvRatio||((S,m)=>{try{return{isValid:!0,value:n.sqrt(n.div(S,m))}}catch{return{isValid:!1,value:Lt}}});if(!Rb(n,s,s.Gx,s.Gy))throw new Error("bad curve params: generator point");function f(S,m,P=!1){let b=P?ye:Lt;return Pn("coordinate "+S,m,b,a),m}function l(S){if(!(S instanceof p))throw new Error("EdwardsPoint expected")}let y=Or((S,m)=>{let{X:P,Y:b,Z:T}=S,N=S.is0();m==null&&(m=N?Db:n.inv(T));let $=c(P*m),M=c(b*m),A=n.mul(T,m);if(N)return{x:Lt,y:ye};if(A!==ye)throw new Error("invZ was invalid");return{x:$,y:M}}),B=Or(S=>{let{a:m,d:P}=s;if(S.is0())throw new Error("bad point: ZERO");let{X:b,Y:T,Z:N,T:$}=S,M=c(b*b),A=c(T*T),C=c(N*N),V=c(C*C),z=c(M*m),O=c(C*c(z+A)),w=c(V+c(P*c(M*A)));if(O!==w)throw new Error("bad point: equation left != right (1)");let x=c(b*T),g=c(N*$);if(x!==g)throw new Error("bad point: equation left != right (2)");return!0});class p{static BASE=new p(s.Gx,s.Gy,ye,c(s.Gx*s.Gy));static ZERO=new p(Lt,ye,ye,Lt);static Fp=n;static Fn=o;X;Y;Z;T;constructor(m,P,b,T){this.X=f("x",m),this.Y=f("y",P),this.Z=f("z",b,!0),this.T=f("t",T),Object.freeze(this)}static CURVE(){return s}static fromAffine(m){if(m instanceof p)throw new Error("extended point not allowed");let{x:P,y:b}=m||{};return f("x",P),f("y",b),new p(P,b,ye,c(P*b))}static fromBytes(m,P=!1){let b=n.BYTES,{a:T,d:N}=s;m=No(j(m,b,"point")),At(P,"zip215");let $=No(m),M=m[b-1];$[b-1]=M&-129;let A=Xt($),C=P?a:n.ORDER;Pn("point.y",A,Lt,C);let V=c(A*A),z=c(V-ye),O=c(N*V-T),{isValid:w,value:x}=u(z,O);if(!w)throw new Error("bad point: invalid y coordinate");let g=(x&ye)===ye,U=(M&128)!==0;if(!P&&x===Lt&&U)throw new Error("bad point: x=0 and x_0=1");return U!==g&&(x=c(-x)),p.fromAffine({x,y:A})}static fromHex(m,P=!1){return p.fromBytes(Et(m),P)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(m=8,P=!0){return v.createCache(this,m),P||this.multiply(xa),this}assertValidity(){B(this)}equals(m){l(m);let{X:P,Y:b,Z:T}=this,{X:N,Y:$,Z:M}=m,A=c(P*M),C=c(N*T),V=c(b*M),z=c($*T);return A===C&&V===z}is0(){return this.equals(p.ZERO)}negate(){return new p(c(-this.X),this.Y,this.Z,c(-this.T))}double(){let{a:m}=s,{X:P,Y:b,Z:T}=this,N=c(P*P),$=c(b*b),M=c(xa*c(T*T)),A=c(m*N),C=P+b,V=c(c(C*C)-N-$),z=A+$,O=z-M,w=A-$,x=c(V*O),g=c(z*w),U=c(V*w),R=c(O*z);return new p(x,g,R,U)}add(m){l(m);let{a:P,d:b}=s,{X:T,Y:N,Z:$,T:M}=this,{X:A,Y:C,Z:V,T:z}=m,O=c(T*A),w=c(N*C),x=c(M*b*z),g=c($*V),U=c((T+N)*(A+C)-O-w),R=g-x,L=g+x,K=c(w-P*O),k=c(U*R),F=c(L*K),H=c(U*K),oe=c(R*L);return new p(k,F,oe,H)}subtract(m){return this.add(m.negate())}multiply(m){if(!o.isValidNot0(m))throw new Error("invalid scalar: expected 1 <= sc < curve.n");let{p:P,f:b}=v.cached(this,m,T=>er(p,T));return er(p,[P,b])[0]}multiplyUnsafe(m,P=p.ZERO){if(!o.isValid(m))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return m===Lt?p.ZERO:this.is0()||m===ye?this:v.unsafe(this,m,b=>er(p,b),P)}isSmallOrder(){return this.multiplyUnsafe(i).is0()}isTorsionFree(){return v.unsafe(this,s.n).is0()}toAffine(m){return y(this,m)}clearCofactor(){return i===ye?this:this.multiplyUnsafe(i)}toBytes(){let{x:m,y:P}=this.toAffine(),b=n.toBytes(P);return b[b.length-1]|=m&ye?128:0,b}toHex(){return xt(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}let v=new Mr(p,o.BITS);return p.BASE.precompute(8),p}function dd(e,t,r={}){if(typeof t!="function")throw new Error('"hash" function param is required');kt(r,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});let{prehash:n}=r,{BASE:o,Fp:s,Fn:i}=e,a=r.randomBytes||Nr,c=r.adjustScalarBytes||(A=>A),u=r.domain||((A,C,V)=>{if(At(V,"phflag"),C.length||V)throw new Error("Contexts/pre-hash are not supported");return A});function f(A){return i.create(Xt(A))}function l(A){let C=b.secretKey;j(A,b.secretKey,"secretKey");let V=j(t(A),2*C,"hashedSecretKey"),z=c(V.slice(0,C)),O=V.slice(C,2*C),w=f(z);return{head:z,prefix:O,scalar:w}}function y(A){let{head:C,prefix:V,scalar:z}=l(A),O=o.multiply(z),w=O.toBytes();return{head:C,prefix:V,scalar:z,point:O,pointBytes:w}}function B(A){return y(A).pointBytes}function p(A=Uint8Array.of(),...C){let V=_e(...C);return f(t(u(V,j(A,void 0,"context"),!!n)))}function v(A,C,V={}){A=j(A,void 0,"message"),n&&(A=n(A));let{prefix:z,scalar:O,pointBytes:w}=y(C),x=p(V.context,z,A),g=o.multiply(x).toBytes(),U=p(V.context,g,w,A),R=i.create(x+U*O);if(!i.isValid(R))throw new Error("sign failed: invalid s");let L=_e(g,i.toBytes(R));return j(L,b.signature,"result")}let S={zip215:!0};function m(A,C,V,z=S){let{context:O,zip215:w}=z,x=b.signature;A=j(A,x,"signature"),C=j(C,void 0,"message"),V=j(V,b.publicKey,"publicKey"),w!==void 0&&At(w,"zip215"),n&&(C=n(C));let g=x/2,U=A.subarray(0,g),R=Xt(A.subarray(g,x)),L,K,k;try{L=e.fromBytes(V,w),K=e.fromBytes(U,w),k=o.multiplyUnsafe(R)}catch{return!1}if(!w&&L.isSmallOrder())return!1;let F=p(O,K.toBytes(),L.toBytes(),C);return K.add(L.multiplyUnsafe(F)).subtract(k).clearCofactor().is0()}let P=s.BYTES,b={secretKey:P,publicKey:P,signature:2*P,seed:P};function T(A=a(b.seed)){return j(A,b.seed,"seed")}function N(A){return Wt(A)&&A.length===i.BYTES}function $(A,C){try{return!!e.fromBytes(A,C)}catch{return!1}}let M={getExtendedPublicKey:y,randomSecretKey:T,isValidSecretKey:N,isValidPublicKey:$,toMontgomery(A){let{y:C}=e.fromBytes(A),V=b.publicKey,z=V===32;if(!z&&V!==57)throw new Error("only defined for 25519 and 448");let O=z?s.div(ye+C,ye-C):s.div(C-ye,C+ye);return s.toBytes(O)},toMontgomerySecret(A){let C=b.secretKey;j(A,C);let V=t(A.subarray(0,C));return c(V).subarray(0,C)}};return Object.freeze({keygen:Lo(T,B),getPublicKey:B,sign:v,verify:m,utils:M,Point:e,lengths:b})}var Nb=BigInt(1),hd=BigInt(2);var kb=BigInt(5),Lb=BigInt(8),Ea=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Ob={p:Ea,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Lb,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Kb(e){let t=BigInt(10),r=BigInt(20),n=BigInt(40),o=BigInt(80),s=Ea,a=e*e%s*e%s,c=re(a,hd,s)*a%s,u=re(c,Nb,s)*e%s,f=re(u,kb,s)*u%s,l=re(f,t,s)*f%s,y=re(l,r,s)*l%s,B=re(y,n,s)*y%s,p=re(B,o,s)*B%s,v=re(p,o,s)*B%s,S=re(v,t,s)*f%s;return{pow_p_5_8:re(S,hd,s)*e%s,b2:a}}function $b(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}var pd=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Mb(e,t){let r=Ea,n=ce(t*t*t,r),o=ce(n*n*t,r),s=Kb(e*o).pow_p_5_8,i=ce(e*n*s,r),a=ce(t*i*i,r),c=i,u=ce(i*pd,r),f=a===e,l=a===ce(-e,r),y=a===ce(-e*pd,r);return f&&(i=c),(l||y)&&(i=u),nd(i,r)&&(i=ce(-i,r)),{isValid:f||l,value:i}}var Fb=ld(Ob,{uvRatio:Mb});function Vb(e){return dd(Fb,jl,Object.assign({adjustScalarBytes:$b},e))}var md=Vb({});var Dn=class extends Error{constructor(t="An error occurred while verifying a message"){super(t),this.name="VerificationError"}},Oo=class extends Error{constructor(t="Missing Web Crypto API"){super(t),this.name="WebCryptoMissingError"}};var yd={get(e=globalThis){let t=e.crypto;if(t?.subtle==null)throw new Oo("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api");return t}};var Ve=yd;var Ko=32;var Sa,Hb=(async()=>{try{return await Ve.get().subtle.generateKey({name:"Ed25519"},!0,["sign","verify"]),!0}catch{return!1}})();async function jb(e,t,r){if(e.buffer instanceof ArrayBuffer){let n=await Ve.get().subtle.importKey("raw",e.buffer,{name:"Ed25519"},!1,["verify"]);return await Ve.get().subtle.verify({name:"Ed25519"},n,t,r instanceof Uint8Array?r:r.subarray())}throw new TypeError("WebCrypto does not support SharedArrayBuffer for Ed25519 keys")}function qb(e,t,r){return md.verify(t,r instanceof Uint8Array?r:r.subarray(),e)}async function gd(e,t,r){return Sa==null&&(Sa=await Hb),Sa?jb(e,t,r):qb(e,t,r)}function $o(e){return e==null?!1:typeof e.then=="function"&&typeof e.catch=="function"&&typeof e.finally=="function"}var Mo=class{type="Ed25519";raw;constructor(t){this.raw=Aa(t,Ko)}toMultihash(){return Pe.digest(Dr(this))}toCID(){return I.createV1(114,this.toMultihash())}toString(){return te.encode(this.toMultihash().bytes).substring(1)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:Se(this.raw,t.raw)}verify(t,r,n){n?.signal?.throwIfAborted();let o=gd(this.raw,r,t);return $o(o)?o.then(s=>(n?.signal?.throwIfAborted(),s)):o}};function va(e){return e=Aa(e,Ko),new Mo(e)}function Aa(e,t){if(e=Uint8Array.from(e??[]),e.length!==t)throw new J(`Key must be a Uint8Array of length ${t}, got ${e.length}`);return e}var Ca=new Float32Array([-0]),Ot=new Uint8Array(Ca.buffer);function bd(e,t,r){Ca[0]=e,t[r]=Ot[0],t[r+1]=Ot[1],t[r+2]=Ot[2],t[r+3]=Ot[3]}function xd(e,t){return Ot[0]=e[t],Ot[1]=e[t+1],Ot[2]=e[t+2],Ot[3]=e[t+3],Ca[0]}var Ia=new Float64Array([-0]),Ce=new Uint8Array(Ia.buffer);function Ed(e,t,r){Ia[0]=e,t[r]=Ce[0],t[r+1]=Ce[1],t[r+2]=Ce[2],t[r+3]=Ce[3],t[r+4]=Ce[4],t[r+5]=Ce[5],t[r+6]=Ce[6],t[r+7]=Ce[7]}function Sd(e,t){return Ce[0]=e[t],Ce[1]=e[t+1],Ce[2]=e[t+2],Ce[3]=e[t+3],Ce[4]=e[t+4],Ce[5]=e[t+5],Ce[6]=e[t+6],Ce[7]=e[t+7],Ia[0]}var Gb=BigInt(Number.MAX_SAFE_INTEGER),Wb=BigInt(Number.MIN_SAFE_INTEGER),Ke=class e{lo;hi;constructor(t,r){this.lo=t|0,this.hi=r|0}toNumber(t=!1){if(!t&&this.hi>>>31>0){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(t=!1){if(t)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(BigInt(r)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(t=!1){return this.toBigInt(t).toString()}zzEncode(){let t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this}zzDecode(){let t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this}length(){let t=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?t<16384?t<128?1:2:t<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}static fromBigInt(t){if(t===0n)return tr;if(t<Gb&&t>Wb)return this.fromNumber(Number(t));let r=t<0n;r&&(t=-t);let n=t>>32n,o=t-(n<<32n);return r&&(n=~n|0n,o=~o|0n,++o>Ad&&(o=0n,++n>Ad&&(n=0n))),new e(Number(o),Number(n))}static fromNumber(t){if(t===0)return tr;let r=t<0;r&&(t=-t);let n=t>>>0,o=(t-n)/4294967296>>>0;return r&&(o=~o>>>0,n=~n>>>0,++n>4294967295&&(n=0,++o>4294967295&&(o=0))),new e(n,o)}static from(t){return typeof t=="number"?e.fromNumber(t):typeof t=="bigint"?e.fromBigInt(t):typeof t=="string"?e.fromBigInt(BigInt(t)):t.low!=null||t.high!=null?new e(t.low>>>0,t.high>>>0):tr}},tr=new Ke(0,0);tr.toBigInt=function(){return 0n};tr.zzEncode=tr.zzDecode=function(){return this};tr.length=function(){return 1};var Ad=4294967296n;function vd(e){let t=0,r=0;for(let n=0;n<e.length;++n)r=e.charCodeAt(n),r<128?t+=1:r<2048?t+=2:(r&64512)===55296&&(e.charCodeAt(n+1)&64512)===56320?(++n,t+=4):t+=3;return t}function Cd(e,t,r){if(r-t<1)return"";let o,s=[],i=0,a;for(;t<r;)a=e[t++],a<128?s[i++]=a:a>191&&a<224?s[i++]=(a&31)<<6|e[t++]&63:a>239&&a<365?(a=((a&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536,s[i++]=55296+(a>>10),s[i++]=56320+(a&1023)):s[i++]=(a&15)<<12|(e[t++]&63)<<6|e[t++]&63,i>8191&&((o??(o=[])).push(String.fromCharCode.apply(String,s)),i=0);return o!=null?(i>0&&o.push(String.fromCharCode.apply(String,s.slice(0,i))),o.join("")):String.fromCharCode.apply(String,s.slice(0,i))}function Ba(e,t,r){let n=r,o,s;for(let i=0;i<e.length;++i)o=e.charCodeAt(i),o<128?t[r++]=o:o<2048?(t[r++]=o>>6|192,t[r++]=o&63|128):(o&64512)===55296&&((s=e.charCodeAt(i+1))&64512)===56320?(o=65536+((o&1023)<<10)+(s&1023),++i,t[r++]=o>>18|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=o&63|128):(t[r++]=o>>12|224,t[r++]=o>>6&63|128,t[r++]=o&63|128);return r-n}function Xe(e,t){return RangeError(`index out of range: ${e.pos} + ${t??1} > ${e.len}`)}function Fo(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}var Pa=class{buf;pos;len;_slice=Uint8Array.prototype.subarray;constructor(t){this.buf=t,this.pos=0,this.len=t.length}uint32(){let t=4294967295;if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,Xe(this,10);return t}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw Xe(this,4);return Fo(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw Xe(this,4);return Fo(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw Xe(this,4);let t=xd(this.buf,this.pos);return this.pos+=4,t}double(){if(this.pos+8>this.len)throw Xe(this,4);let t=Sd(this.buf,this.pos);return this.pos+=8,t}bytes(){let t=this.uint32(),r=this.pos,n=this.pos+t;if(n>this.len)throw Xe(this,t);return this.pos+=t,r===n?new Uint8Array(0):this.buf.subarray(r,n)}string(){let t=this.bytes();return Cd(t,0,t.length)}skip(t){if(typeof t=="number"){if(this.pos+t>this.len)throw Xe(this,t);this.pos+=t}else do if(this.pos>=this.len)throw Xe(this);while((this.buf[this.pos++]&128)!==0);return this}skipType(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${t} at offset ${this.pos}`)}return this}readLongVarint(){let t=new Ke(0,0),r=0;if(this.len-this.pos>4){for(;r<4;++r)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;r=0}else{for(;r<3;++r){if(this.pos>=this.len)throw Xe(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<r*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<r*7)>>>0,t}if(this.len-this.pos>4){for(;r<5;++r)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;r<5;++r){if(this.pos>=this.len)throw Xe(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<r*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw Xe(this,8);let t=Fo(this.buf,this.pos+=4),r=Fo(this.buf,this.pos+=4);return new Ke(t,r)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){let t=Is(this.buf,this.pos);return this.pos+=tt(t),t}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}};function Ta(e){return new Pa(e instanceof Uint8Array?e:e.subarray())}function Vo(e,t,r){let n=Ta(e);return t.decode(n,void 0,r)}function _a(e){let t=e??8192,r=t>>>1,n,o=t;return function(i){if(i<1||i>r)return De(i);o+i>t&&(n=De(t),o=0);let a=n.subarray(o,o+=i);return(o&7)!==0&&(o=(o|7)+1),a}}var rr=class{fn;len;next;val;constructor(t,r,n){this.fn=t,this.len=r,this.next=void 0,this.val=n}};function Ua(){}var Ra=class{head;tail;len;next;constructor(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}},Zb=_a();function Yb(e){return globalThis.Buffer!=null?De(e):Zb(e)}var Nn=class{len;head;tail;states;constructor(){this.len=0,this.head=new rr(Ua,0,0),this.tail=this.head,this.states=null}_push(t,r,n){return this.tail=this.tail.next=new rr(t,r,n),this.len+=r,this}uint32(t){return this.len+=(this.tail=this.tail.next=new Na((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this}int32(t){return t<0?this._push(Ho,10,Ke.fromNumber(t)):this.uint32(t)}sint32(t){return this.uint32((t<<1^t>>31)>>>0)}uint64(t){let r=Ke.fromBigInt(t);return this._push(Ho,r.length(),r)}uint64Number(t){return this._push(Jr,tt(t),t)}uint64String(t){return this.uint64(BigInt(t))}int64(t){return this.uint64(t)}int64Number(t){return this.uint64Number(t)}int64String(t){return this.uint64String(t)}sint64(t){let r=Ke.fromBigInt(t).zzEncode();return this._push(Ho,r.length(),r)}sint64Number(t){let r=Ke.fromNumber(t).zzEncode();return this._push(Ho,r.length(),r)}sint64String(t){return this.sint64(BigInt(t))}bool(t){return this._push(Da,1,t?1:0)}fixed32(t){return this._push(Rn,4,t>>>0)}sfixed32(t){return this.fixed32(t)}fixed64(t){let r=Ke.fromBigInt(t);return this._push(Rn,4,r.lo)._push(Rn,4,r.hi)}fixed64Number(t){let r=Ke.fromNumber(t);return this._push(Rn,4,r.lo)._push(Rn,4,r.hi)}fixed64String(t){return this.fixed64(BigInt(t))}sfixed64(t){return this.fixed64(t)}sfixed64Number(t){return this.fixed64Number(t)}sfixed64String(t){return this.fixed64String(t)}float(t){return this._push(bd,4,t)}double(t){return this._push(Ed,8,t)}bytes(t){let r=t.length>>>0;return r===0?this._push(Da,1,0):this.uint32(r)._push(Jb,r,t)}string(t){let r=vd(t);return r!==0?this.uint32(r)._push(Ba,r,t):this._push(Da,1,0)}fork(){return this.states=new Ra(this),this.head=this.tail=new rr(Ua,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new rr(Ua,0,0),this.len=0),this}ldelim(){let t=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=t.next,this.tail=r,this.len+=n),this}finish(){let t=this.head.next,r=Yb(this.len),n=0;for(;t!=null;)t.fn(t.val,r,n),n+=t.len,t=t.next;return r}};function Da(e,t,r){t[r]=e&255}function Xb(e,t,r){for(;e>127;)t[r++]=e&127|128,e>>>=7;t[r]=e}var Na=class extends rr{next;constructor(t,r){super(Xb,t,r),this.next=void 0}};function Ho(e,t,r){for(;e.hi!==0;)t[r++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=e.lo&127|128,e.lo=e.lo>>>7;t[r++]=e.lo}function Rn(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function Jb(e,t,r){t.set(e,r)}globalThis.Buffer!=null&&(Nn.prototype.bytes=function(e){let t=e.length>>>0;return this.uint32(t),t>0&&this._push(Qb,t,e),this},Nn.prototype.string=function(e){let t=globalThis.Buffer.byteLength(e);return this.uint32(t),t>0&&this._push(ex,t,e),this});function Qb(e,t,r){t.set(e,r)}function ex(e,t,r){e.length<40?Ba(e,t,r):t.utf8Write!=null?t.utf8Write(e,r):t.set(Y(e),r)}function ka(){return new Nn}function jo(e,t){let r=ka();return t.encode(e,r,{lengthDelimited:!1}),r.finish()}var Fr;(function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"})(Fr||(Fr={}));function qo(e,t,r,n){return{name:e,type:t,encode:r,decode:n}}function La(e){function t(o){if(e[o.toString()]==null)throw new Error("Invalid enum value");return e[o]}let r=function(s,i){let a=t(s);i.int32(a)},n=function(s){let i=s.int32();return t(i)};return qo("enum",Fr.VARINT,r,n)}function zo(e,t){return qo("message",Fr.LENGTH_DELIMITED,e,t)}var fe;(function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.secp256k1="secp256k1",e.ECDSA="ECDSA"})(fe||(fe={}));var Oa;(function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.secp256k1=2]="secp256k1",e[e.ECDSA=3]="ECDSA"})(Oa||(Oa={}));(function(e){e.codec=()=>La(Oa)})(fe||(fe={}));var at;(function(e){let t;e.codec=()=>(t==null&&(t=zo((r,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),fe.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),o.lengthDelimited!==!1&&n.ldelim()},(r,n,o={})=>{let s={},i=n==null?r.len:r.pos+n;for(;r.pos<i;){let a=r.uint32();switch(a>>>3){case 1:{s.Type=fe.codec().decode(r);break}case 2:{s.Data=r.bytes();break}default:{r.skipType(a&7);break}}}return s})),t),e.encode=r=>jo(r,e.codec()),e.decode=(r,n)=>Vo(r,e.codec(),n)})(at||(at={}));var Ka;(function(e){let t;e.codec=()=>(t==null&&(t=zo((r,n,o={})=>{o.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),fe.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),o.lengthDelimited!==!1&&n.ldelim()},(r,n,o={})=>{let s={},i=n==null?r.len:r.pos+n;for(;r.pos<i;){let a=r.uint32();switch(a>>>3){case 1:{s.Type=fe.codec().decode(r);break}case 2:{s.Data=r.bytes();break}default:{r.skipType(a&7);break}}}return s})),t),e.encode=r=>jo(r,e.codec()),e.decode=(r,n)=>Vo(r,e.codec(),n)})(Ka||(Ka={}));var Ln={};ue(Ln,{MAX_RSA_KEY_SIZE:()=>$a,generateRSAKeyPair:()=>Ud,jwkToJWKKeyPair:()=>Dd,jwkToPkcs1:()=>ox,jwkToPkix:()=>Ha,jwkToRSAPrivateKey:()=>Ga,pkcs1MessageToJwk:()=>Fa,pkcs1MessageToRSAPrivateKey:()=>ja,pkcs1ToJwk:()=>nx,pkcs1ToRSAPrivateKey:()=>_d,pkixMessageToJwk:()=>Va,pkixMessageToRSAPublicKey:()=>za,pkixToJwk:()=>sx,pkixToRSAPublicKey:()=>qa});var Vr=class{type="RSA";jwk;_raw;_multihash;constructor(t,r){this.jwk=t,this._multihash=r}get raw(){return this._raw==null&&(this._raw=Ln.jwkToPkix(this.jwk)),this._raw}toMultihash(){return this._multihash}toCID(){return I.createV1(114,this._multihash)}toString(){return te.encode(this.toMultihash().bytes).substring(1)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:Se(this.raw,t.raw)}verify(t,r,n){return Td(this.jwk,r,t,n)}},kn=class{type="RSA";jwk;_raw;publicKey;constructor(t,r){this.jwk=t,this.publicKey=r}get raw(){return this._raw==null&&(this._raw=Ln.jwkToPkcs1(this.jwk)),this._raw}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:Se(this.raw,t.raw)}sign(t,r){return Pd(this.jwk,t,r)}};var $a=8192,Ma=18,tx=1062,rx=Uint8Array.from([48,13,6,9,42,134,72,134,247,13,1,1,1,5,0]);function nx(e){let t=gt(e);return Fa(t)}function Fa(e){return{n:q(e[1],"base64url"),e:q(e[2],"base64url"),d:q(e[3],"base64url"),p:q(e[4],"base64url"),q:q(e[5],"base64url"),dp:q(e[6],"base64url"),dq:q(e[7],"base64url"),qi:q(e[8],"base64url"),kty:"RSA"}}function ox(e){if(e.n==null||e.e==null||e.d==null||e.p==null||e.q==null||e.dp==null||e.dq==null||e.qi==null)throw new J("JWK was missing components");return Ut([Te(Uint8Array.from([0])),Te(Y(e.n,"base64url")),Te(Y(e.e,"base64url")),Te(Y(e.d,"base64url")),Te(Y(e.p,"base64url")),Te(Y(e.q,"base64url")),Te(Y(e.dp,"base64url")),Te(Y(e.dq,"base64url")),Te(Y(e.qi,"base64url"))]).subarray()}function sx(e){let t=gt(e,{offset:0});return Va(t)}function Va(e){let t=gt(e[1],{offset:0});return{kty:"RSA",n:q(t[0],"base64url"),e:q(t[1],"base64url")}}function Ha(e){if(e.n==null||e.e==null)throw new J("JWK was missing components");return Ut([rx,Po(Ut([Te(Y(e.n,"base64url")),Te(Y(e.e,"base64url"))]))]).subarray()}function _d(e){let t=gt(e);return ja(t)}function ja(e){let t=Fa(e);return Ga(t)}function qa(e,t){if(e.byteLength>=tx)throw new Pr("Key size is too large");let r=gt(e,{offset:0});return za(r,e,t)}function za(e,t,r){let n=Va(e);if(r==null){let o=kr(at.encode({Type:fe.RSA,Data:t}));r=nt(Ma,o)}return new Vr(n,r)}function Ga(e){if(Nd(e)>$a)throw new J("Key size is too large");let t=Dd(e),r=kr(at.encode({Type:fe.RSA,Data:Ha(t.publicKey)})),n=nt(Ma,r);return new kn(t.privateKey,new Vr(t.publicKey,n))}async function Ud(e){if(e>$a)throw new J("Key size is too large");let t=await Rd(e),r=kr(at.encode({Type:fe.RSA,Data:Ha(t.publicKey)})),n=nt(Ma,r);return new kn(t.privateKey,new Vr(t.publicKey,n))}function Dd(e){if(e==null)throw new J("Missing key parameter");return{privateKey:e,publicKey:{kty:e.kty,n:e.n,e:e.e}}}async function Rd(e,t){let r=await Ve.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]);t?.signal?.throwIfAborted();let n=await ix(r,t);return{privateKey:n[0],publicKey:n[1]}}async function Pd(e,t,r){let n=await Ve.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]);r?.signal?.throwIfAborted();let o=await Ve.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},n,t instanceof Uint8Array?t:t.subarray());return r?.signal?.throwIfAborted(),new Uint8Array(o,0,o.byteLength)}async function Td(e,t,r,n){let o=await Ve.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);n?.signal?.throwIfAborted();let s=await Ve.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},o,t,r instanceof Uint8Array?r:r.subarray());return n?.signal?.throwIfAborted(),s}async function ix(e,t){if(e.privateKey==null||e.publicKey==null)throw new J("Private and public key are required");let r=await Promise.all([Ve.get().subtle.exportKey("jwk",e.privateKey),Ve.get().subtle.exportKey("jwk",e.publicKey)]);return t?.signal?.throwIfAborted(),r}function Nd(e){if(e.kty!=="RSA")throw new J("invalid key type");if(e.n==null)throw new J("invalid key modulus");return Y(e.n,"base64url").length*8}var Go=class{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor(t,r){if(To(t),j(r,void 0,"key"),this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,o=new Uint8Array(n);o.set(r.length>n?t.create().update(r).digest():r);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),bt(o)}update(t){return Rr(this),this.iHash.update(t),this}digestInto(t){Rr(this),j(t,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||=Object.create(Object.getPrototypeOf(this),{});let{oHash:r,iHash:n,finished:o,destroyed:s,blockLen:i,outputLen:a}=this;return t=t,t.finished=o,t.destroyed=s,t.blockLen=i,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Wa=(e,t,r)=>new Go(e,t).update(r).digest();Wa.create=(e,t)=>new Go(e,t);var kd=(e,t)=>(e+(e>=0?t:-t)/Ld)/t;function ax(e,t,r){let[[n,o],[s,i]]=t,a=kd(i*e,r),c=kd(-o*e,r),u=e-a*n-c*s,f=-a*o-c*i,l=u<vt,y=f<vt;l&&(u=-u),y&&(f=-f);let B=Tn(Math.ceil(la(r)/2))+Hr;if(u<vt||u>=B||f<vt||f>=B)throw new Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:l,k1:u,k2neg:y,k2:f}}function Ya(e){if(!["compact","recovered","der"].includes(e))throw new Error('Signature format must be "compact", "recovered", or "der"');return e}function Za(e,t){let r={};for(let n of Object.keys(t))r[n]=e[n]===void 0?t[n]:e[n];return At(r.lowS,"lowS"),At(r.prehash,"prehash"),r.format!==void 0&&Ya(r.format),r}var Xa=class extends Error{constructor(t=""){super(t)}},Kt={Err:Xa,_tlv:{encode:(e,t)=>{let{Err:r}=Kt;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length&1)throw new r("tlv.encode: unpadded data");let n=t.length/2,o=Bn(n);if(o.length/2&128)throw new r("tlv.encode: long form length too big");let s=n>127?Bn(o.length/2|128):"";return Bn(e)+s+o+t},decode(e,t){let{Err:r}=Kt,n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");let o=t[n++],s=!!(o&128),i=0;if(!s)i=o;else{let c=o&127;if(!c)throw new r("tlv.decode(long): indefinite length not supported");if(c>4)throw new r("tlv.decode(long): byte length is too big");let u=t.subarray(n,n+c);if(u.length!==c)throw new r("tlv.decode: length bytes not complete");if(u[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(let f of u)i=i<<8|f;if(n+=c,i<128)throw new r("tlv.decode(long): not minimal encoding")}let a=t.subarray(n,n+i);if(a.length!==i)throw new r("tlv.decode: wrong value length");return{v:a,l:t.subarray(n+i)}}},_int:{encode(e){let{Err:t}=Kt;if(e<vt)throw new t("integer: negative integers are not allowed");let r=Bn(e);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=Kt;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Lr(e)}},toSig(e){let{Err:t,_int:r,_tlv:n}=Kt,o=j(e,void 0,"signature"),{v:s,l:i}=n.decode(48,o);if(i.length)throw new t("invalid signature: left bytes after parsing");let{v:a,l:c}=n.decode(2,s),{v:u,l:f}=n.decode(2,c);if(f.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(e){let{_tlv:t,_int:r}=Kt,n=t.encode(2,r.encode(e.r)),o=t.encode(2,r.encode(e.s)),s=n+o;return t.encode(48,s)}},vt=BigInt(0),Hr=BigInt(1),Ld=BigInt(2),Wo=BigInt(3),cx=BigInt(4);function Od(e,t={}){let r=ko("weierstrass",e,t),{Fp:n,Fn:o}=r,s=r.CURVE,{h:i,n:a}=s;kt(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object"});let{endo:c}=t;if(c&&(!n.is0(s.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');let u=$d(n,o);function f(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function l(O,w,x){let{x:g,y:U}=w.toAffine(),R=n.toBytes(g);if(At(x,"isCompressed"),x){f();let L=!n.isOdd(U);return _e(Kd(L),R)}else return _e(Uint8Array.of(4),R,n.toBytes(U))}function y(O){j(O,void 0,"Point");let{publicKey:w,publicKeyUncompressed:x}=u,g=O.length,U=O[0],R=O.subarray(1);if(g===w&&(U===2||U===3)){let L=n.fromBytes(R);if(!n.isValid(L))throw new Error("bad point: is not on curve, wrong x");let K=v(L),k;try{k=n.sqrt(K)}catch(oe){let ee=oe instanceof Error?": "+oe.message:"";throw new Error("bad point: is not on curve, sqrt error"+ee)}f();let F=n.isOdd(k);return(U&1)===1!==F&&(k=n.neg(k)),{x:L,y:k}}else if(g===x&&U===4){let L=n.BYTES,K=n.fromBytes(R.subarray(0,L)),k=n.fromBytes(R.subarray(L,L*2));if(!S(K,k))throw new Error("bad point: is not on curve");return{x:K,y:k}}else throw new Error(`bad point: got length ${g}, expected compressed=${w} or uncompressed=${x}`)}let B=t.toBytes||l,p=t.fromBytes||y;function v(O){let w=n.sqr(O),x=n.mul(w,O);return n.add(n.add(x,n.mul(O,s.a)),s.b)}function S(O,w){let x=n.sqr(w),g=v(O);return n.eql(x,g)}if(!S(s.Gx,s.Gy))throw new Error("bad curve params: generator point");let m=n.mul(n.pow(s.a,Wo),cx),P=n.mul(n.sqr(s.b),BigInt(27));if(n.is0(n.add(m,P)))throw new Error("bad curve params: a or b");function b(O,w,x=!1){if(!n.isValid(w)||x&&n.is0(w))throw new Error(`bad point coordinate ${O}`);return w}function T(O){if(!(O instanceof C))throw new Error("Weierstrass Point expected")}function N(O){if(!c||!c.basises)throw new Error("no endo");return ax(O,c.basises,o.ORDER)}let $=Or((O,w)=>{let{X:x,Y:g,Z:U}=O;if(n.eql(U,n.ONE))return{x,y:g};let R=O.is0();w==null&&(w=R?n.ONE:n.inv(U));let L=n.mul(x,w),K=n.mul(g,w),k=n.mul(U,w);if(R)return{x:n.ZERO,y:n.ZERO};if(!n.eql(k,n.ONE))throw new Error("invZ was invalid");return{x:L,y:K}}),M=Or(O=>{if(O.is0()){if(t.allowInfinityPoint&&!n.is0(O.Y))return;throw new Error("bad point: ZERO")}let{x:w,y:x}=O.toAffine();if(!n.isValid(w)||!n.isValid(x))throw new Error("bad point: x or y not field elements");if(!S(w,x))throw new Error("bad point: equation left != right");if(!O.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function A(O,w,x,g,U){return x=new C(n.mul(x.X,O),x.Y,x.Z),w=Un(g,w),x=Un(U,x),w.add(x)}class C{static BASE=new C(s.Gx,s.Gy,n.ONE);static ZERO=new C(n.ZERO,n.ONE,n.ZERO);static Fp=n;static Fn=o;X;Y;Z;constructor(w,x,g){this.X=b("x",w),this.Y=b("y",x,!0),this.Z=b("z",g),Object.freeze(this)}static CURVE(){return s}static fromAffine(w){let{x,y:g}=w||{};if(!w||!n.isValid(x)||!n.isValid(g))throw new Error("invalid affine point");if(w instanceof C)throw new Error("projective point not allowed");return n.is0(x)&&n.is0(g)?C.ZERO:new C(x,g,n.ONE)}static fromBytes(w){let x=C.fromAffine(p(j(w,void 0,"point")));return x.assertValidity(),x}static fromHex(w){return C.fromBytes(Et(w))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(w=8,x=!0){return z.createCache(this,w),x||this.multiply(Wo),this}assertValidity(){M(this)}hasEvenY(){let{y:w}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(w)}equals(w){T(w);let{X:x,Y:g,Z:U}=this,{X:R,Y:L,Z:K}=w,k=n.eql(n.mul(x,K),n.mul(R,U)),F=n.eql(n.mul(g,K),n.mul(L,U));return k&&F}negate(){return new C(this.X,n.neg(this.Y),this.Z)}double(){let{a:w,b:x}=s,g=n.mul(x,Wo),{X:U,Y:R,Z:L}=this,K=n.ZERO,k=n.ZERO,F=n.ZERO,H=n.mul(U,U),oe=n.mul(R,R),ee=n.mul(L,L),Z=n.mul(U,R);return Z=n.add(Z,Z),F=n.mul(U,L),F=n.add(F,F),K=n.mul(w,F),k=n.mul(g,ee),k=n.add(K,k),K=n.sub(oe,k),k=n.add(oe,k),k=n.mul(K,k),K=n.mul(Z,K),F=n.mul(g,F),ee=n.mul(w,ee),Z=n.sub(H,ee),Z=n.mul(w,Z),Z=n.add(Z,F),F=n.add(H,H),H=n.add(F,H),H=n.add(H,ee),H=n.mul(H,Z),k=n.add(k,H),ee=n.mul(R,L),ee=n.add(ee,ee),H=n.mul(ee,Z),K=n.sub(K,H),F=n.mul(ee,oe),F=n.add(F,F),F=n.add(F,F),new C(K,k,F)}add(w){T(w);let{X:x,Y:g,Z:U}=this,{X:R,Y:L,Z:K}=w,k=n.ZERO,F=n.ZERO,H=n.ZERO,oe=s.a,ee=n.mul(s.b,Wo),Z=n.mul(x,R),se=n.mul(g,L),ge=n.mul(U,K),et=n.add(x,g),ie=n.add(R,L);et=n.mul(et,ie),ie=n.add(Z,se),et=n.sub(et,ie),ie=n.add(x,U);let Ee=n.add(R,K);return ie=n.mul(ie,Ee),Ee=n.add(Z,ge),ie=n.sub(ie,Ee),Ee=n.add(g,U),k=n.add(L,K),Ee=n.mul(Ee,k),k=n.add(se,ge),Ee=n.sub(Ee,k),H=n.mul(oe,ie),k=n.mul(ee,ge),H=n.add(k,H),k=n.sub(se,H),H=n.add(se,H),F=n.mul(k,H),se=n.add(Z,Z),se=n.add(se,Z),ge=n.mul(oe,ge),ie=n.mul(ee,ie),se=n.add(se,ge),ge=n.sub(Z,ge),ge=n.mul(oe,ge),ie=n.add(ie,ge),Z=n.mul(se,ie),F=n.add(F,Z),Z=n.mul(Ee,ie),k=n.mul(et,k),k=n.sub(k,Z),Z=n.mul(et,se),H=n.mul(Ee,H),H=n.add(H,Z),new C(k,F,H)}subtract(w){return this.add(w.negate())}is0(){return this.equals(C.ZERO)}multiply(w){let{endo:x}=t;if(!o.isValidNot0(w))throw new Error("invalid scalar: out of range");let g,U,R=L=>z.cached(this,L,K=>er(C,K));if(x){let{k1neg:L,k1:K,k2neg:k,k2:F}=N(w),{p:H,f:oe}=R(K),{p:ee,f:Z}=R(F);U=oe.add(Z),g=A(x.beta,H,ee,L,k)}else{let{p:L,f:K}=R(w);g=L,U=K}return er(C,[g,U])[0]}multiplyUnsafe(w){let{endo:x}=t,g=this;if(!o.isValid(w))throw new Error("invalid scalar: out of range");if(w===vt||g.is0())return C.ZERO;if(w===Hr)return g;if(z.hasCache(this))return this.multiply(w);if(x){let{k1neg:U,k1:R,k2neg:L,k2:K}=N(w),{p1:k,p2:F}=ud(C,g,R,K);return A(x.beta,k,F,U,L)}else return z.unsafe(g,w)}toAffine(w){return $(this,w)}isTorsionFree(){let{isTorsionFree:w}=t;return i===Hr?!0:w?w(C,this):z.unsafe(this,a).is0()}clearCofactor(){let{clearCofactor:w}=t;return i===Hr?this:w?w(C,this):this.multiplyUnsafe(i)}isSmallOrder(){return this.multiplyUnsafe(i).is0()}toBytes(w=!0){return At(w,"isCompressed"),this.assertValidity(),B(C,this,w)}toHex(w=!0){return xt(this.toBytes(w))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}let V=o.BITS,z=new Mr(C,t.endo?Math.ceil(V/2):V);return C.BASE.precompute(8),C}function Kd(e){return Uint8Array.of(e?2:3)}function $d(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function fx(e,t={}){let{Fn:r}=e,n=t.randomBytes||Nr,o=Object.assign($d(e.Fp,r),{seed:ma(r.ORDER)});function s(B){try{let p=r.fromBytes(B);return r.isValidNot0(p)}catch{return!1}}function i(B,p){let{publicKey:v,publicKeyUncompressed:S}=o;try{let m=B.length;return p===!0&&m!==v||p===!1&&m!==S?!1:!!e.fromBytes(B)}catch{return!1}}function a(B=n(o.seed)){return ya(j(B,o.seed,"seed"),r.ORDER)}function c(B,p=!0){return e.BASE.multiply(r.fromBytes(B)).toBytes(p)}function u(B){let{secretKey:p,publicKey:v,publicKeyUncompressed:S}=o;if(!Wt(B)||"_lengths"in r&&r._lengths||p===v)return;let m=j(B,void 0,"key").length;return m===v||m===S}function f(B,p,v=!0){if(u(B)===!0)throw new Error("first arg must be private key");if(u(p)===!1)throw new Error("second arg must be public key");let S=r.fromBytes(B);return e.fromBytes(p).multiply(S).toBytes(v)}let l={isValidSecretKey:s,isValidPublicKey:i,randomSecretKey:a},y=Lo(a,c);return Object.freeze({getPublicKey:c,getSharedSecret:f,keygen:y,Point:e,utils:l,lengths:o})}function Md(e,t,r={}){To(t),kt(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"}),r=Object.assign({},r);let n=r.randomBytes||Nr,o=r.hmac||((x,g)=>Wa(t,x,g)),{Fp:s,Fn:i}=e,{ORDER:a,BITS:c}=i,{keygen:u,getPublicKey:f,getSharedSecret:l,utils:y,lengths:B}=fx(e,r),p={prehash:!0,lowS:typeof r.lowS=="boolean"?r.lowS:!0,format:"compact",extraEntropy:!1},v=a*Ld<s.ORDER;function S(x){let g=a>>Hr;return x>g}function m(x,g){if(!i.isValidNot0(g))throw new Error(`invalid signature ${x}: out of range 1..Point.Fn.ORDER`);return g}function P(){if(v)throw new Error('"recovered" sig type is not supported for cofactor >2 curves')}function b(x,g){Ya(g);let U=B.signature,R=g==="compact"?U:g==="recovered"?U+1:void 0;return j(x,R)}class T{r;s;recovery;constructor(g,U,R){if(this.r=m("r",g),this.s=m("s",U),R!=null){if(P(),![0,1,2,3].includes(R))throw new Error("invalid recovery id");this.recovery=R}Object.freeze(this)}static fromBytes(g,U=p.format){b(g,U);let R;if(U==="der"){let{r:F,s:H}=Kt.toSig(j(g));return new T(F,H)}U==="recovered"&&(R=g[0],U="compact",g=g.subarray(1));let L=B.signature/2,K=g.subarray(0,L),k=g.subarray(L,L*2);return new T(i.fromBytes(K),i.fromBytes(k),R)}static fromHex(g,U){return this.fromBytes(Et(g),U)}assertRecovery(){let{recovery:g}=this;if(g==null)throw new Error("invalid recovery id: must be present");return g}addRecoveryBit(g){return new T(this.r,this.s,g)}recoverPublicKey(g){let{r:U,s:R}=this,L=this.assertRecovery(),K=L===2||L===3?U+a:U;if(!s.isValid(K))throw new Error("invalid recovery id: sig.r+curve.n != R.x");let k=s.toBytes(K),F=e.fromBytes(_e(Kd((L&1)===0),k)),H=i.inv(K),oe=$(j(g,void 0,"msgHash")),ee=i.create(-oe*H),Z=i.create(R*H),se=e.BASE.multiplyUnsafe(ee).add(F.multiplyUnsafe(Z));if(se.is0())throw new Error("invalid recovery: point at infinify");return se.assertValidity(),se}hasHighS(){return S(this.s)}toBytes(g=p.format){if(Ya(g),g==="der")return Et(Kt.hexFromSig(this));let{r:U,s:R}=this,L=i.toBytes(U),K=i.toBytes(R);return g==="recovered"?(P(),_e(Uint8Array.of(this.assertRecovery()),L,K)):_e(L,K)}toHex(g){return xt(this.toBytes(g))}}let N=r.bits2int||function(g){if(g.length>8192)throw new Error("input is too large");let U=Lr(g),R=g.length*8-c;return R>0?U>>BigInt(R):U},$=r.bits2int_modN||function(g){return i.create(N(g))},M=Tn(c);function A(x){return Pn("num < 2^"+c,x,vt,M),i.toBytes(x)}function C(x,g){return j(x,void 0,"message"),g?j(t(x),void 0,"prehashed message"):x}function V(x,g,U){let{lowS:R,prehash:L,extraEntropy:K}=Za(U,p);x=C(x,L);let k=$(x),F=i.fromBytes(g);if(!i.isValidNot0(F))throw new Error("invalid private key");let H=[A(F),A(k)];if(K!=null&&K!==!1){let se=K===!0?n(B.secretKey):K;H.push(j(se,void 0,"extraEntropy"))}let oe=_e(...H),ee=k;function Z(se){let ge=N(se);if(!i.isValidNot0(ge))return;let et=i.inv(ge),ie=e.BASE.multiply(ge).toAffine(),Ee=i.create(ie.x);if(Ee===vt)return;let Vn=i.create(et*i.create(ee+Ee*F));if(Vn===vt)return;let Rc=(ie.x===Ee?0:2)|Number(ie.y&Hr),Nc=Vn;return R&&S(Vn)&&(Nc=i.neg(Vn),Rc^=1),new T(Ee,Nc,v?void 0:Rc)}return{seed:oe,k2sig:Z}}function z(x,g,U={}){let{seed:R,k2sig:L}=V(x,g,U);return Gl(t.outputLen,i.BYTES,o)(R,L).toBytes(U.format)}function O(x,g,U,R={}){let{lowS:L,prehash:K,format:k}=Za(R,p);if(U=j(U,void 0,"publicKey"),g=C(g,K),!Wt(x)){let F=x instanceof T?", use sig.toBytes()":"";throw new Error("verify expects Uint8Array signature"+F)}b(x,k);try{let F=T.fromBytes(x,k),H=e.fromBytes(U);if(L&&F.hasHighS())return!1;let{r:oe,s:ee}=F,Z=$(g),se=i.inv(ee),ge=i.create(Z*se),et=i.create(oe*se),ie=e.BASE.multiplyUnsafe(ge).add(H.multiplyUnsafe(et));return ie.is0()?!1:i.create(ie.x)===oe}catch{return!1}}function w(x,g,U={}){let{prehash:R}=Za(U,p);return g=C(g,R),T.fromBytes(x,"recovered").recoverPublicKey(g).toBytes()}return Object.freeze({keygen:u,getPublicKey:f,getSharedSecret:l,utils:y,lengths:B,Point:e,sign:z,verify:O,recoverPublicKey:w,Signature:T,hash:t})}var Qa={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},ux={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]};var Fd=BigInt(2);function lx(e){let t=Qa.p,r=BigInt(3),n=BigInt(6),o=BigInt(11),s=BigInt(22),i=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,f=u*u*e%t,l=re(f,r,t)*f%t,y=re(l,r,t)*f%t,B=re(y,Fd,t)*u%t,p=re(B,o,t)*B%t,v=re(p,s,t)*p%t,S=re(v,a,t)*v%t,m=re(S,c,t)*S%t,P=re(m,a,t)*v%t,b=re(P,r,t)*f%t,T=re(b,i,t)*p%t,N=re(T,n,t)*u%t,$=re(N,Fd,t);if(!Ja.eql(Ja.sqr($),e))throw new Error("Cannot find square root");return $}var Ja=Kr(Qa.p,{sqrt:lx}),dx=Od(Qa,{Fp:Ja,endo:ux}),jr=Md(dx,kr);function Vd(e,t,r,n){let o=nn.digest(r instanceof Uint8Array?r:r.subarray());if($o(o))return o.then(({digest:s})=>(n?.signal?.throwIfAborted(),jr.verify(t,s,e,{prehash:!1,format:"der"}))).catch(s=>{throw s.name==="AbortError"?s:new Dn(String(s))});try{return n?.signal?.throwIfAborted(),jr.verify(t,o.digest,e,{prehash:!1,format:"der"})}catch(s){throw new Dn(String(s))}}var Zo=class{type="secp256k1";raw;_key;constructor(t){this._key=jd(t),this.raw=Hd(this._key)}toMultihash(){return Pe.digest(Dr(this))}toCID(){return I.createV1(114,this.toMultihash())}toString(){return te.encode(this.toMultihash().bytes).substring(1)}equals(t){return t==null||!(t.raw instanceof Uint8Array)?!1:Se(this.raw,t.raw)}verify(t,r,n){return Vd(this._key,r,t,n)}};function ec(e){return new Zo(e)}function Hd(e){return jr.Point.fromBytes(e).toBytes()}function jd(e){try{return jr.Point.fromBytes(e),e}catch(t){throw new Pr(String(t))}}function qd(e,t){let{Type:r,Data:n}=at.decode(e),o=n??new Uint8Array;switch(r){case fe.RSA:return qa(o,t);case fe.Ed25519:return va(o);case fe.secp256k1:return ec(o);case fe.ECDSA:return Qi(o);default:throw new Tr}}function zd(e){let{Type:t,Data:r}=at.decode(e.digest),n=r??new Uint8Array;switch(t){case fe.Ed25519:return va(n);case fe.secp256k1:return ec(n);case fe.ECDSA:return Qi(n);default:throw new Tr}}function Dr(e){return at.encode({Type:fe[e.type],Data:e.raw})}var Gd=Symbol.for("nodejs.util.inspect.custom"),hx=114,On=class{type;multihash;publicKey;string;constructor(t){this.type=t.type,this.multihash=t.multihash,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}[Gi]=!0;toString(){return this.string==null&&(this.string=te.encode(this.multihash.bytes).slice(1)),this.string}toMultihash(){return this.multihash}toCID(){return I.createV1(hx,this.multihash)}toJSON(){return this.toString()}equals(t){if(t==null)return!1;if(t instanceof Uint8Array)return Se(this.multihash.bytes,t);if(typeof t=="string")return this.toString()===t;if(t?.toMultihash()?.bytes!=null)return Se(this.multihash.bytes,t.toMultihash().bytes);throw new Error("not valid Id")}[Gd](){return`PeerId(${this.toString()})`}},Yo=class extends On{type="RSA";publicKey;constructor(t){super({...t,type:"RSA"}),this.publicKey=t.publicKey}},Xo=class extends On{type="Ed25519";publicKey;constructor(t){super({...t,type:"Ed25519"}),this.publicKey=t.publicKey}},Jo=class extends On{type="secp256k1";publicKey;constructor(t){super({...t,type:"secp256k1"}),this.publicKey=t.publicKey}},px=2336,Kn=class{type="url";multihash;publicKey;url;constructor(t){this.url=t.toString(),this.multihash=Pe.digest(Y(this.url))}[Gd](){return`PeerId(${this.url})`}[Gi]=!0;toString(){return this.toCID().toString()}toMultihash(){return this.multihash}toCID(){return I.createV1(px,this.toMultihash())}toJSON(){return this.toString()}equals(t){return t==null?!1:(t instanceof Uint8Array&&(t=q(t)),t.toString()===this.toString())}};var mx=114,Wd=2336;function le(e,t){let r;if(e.charAt(0)==="1"||e.charAt(0)==="Q")r=rn(te.decode(`z${e}`));else{if(e.startsWith("k51qzi5uqu5")||e.startsWith("kzwfwjn5ji4")||e.startsWith("k2k4r8")||e.startsWith("bafz"))return yx(I.parse(e));if(t==null)throw new J('Please pass a multibase decoder for strings that do not start with "1" or "Q"');r=rn(t.decode(e))}return Zd(r)}function Zd(e){if(wx(e))return new Yo({multihash:e});if(gx(e))try{let t=zd(e);if(t.type==="Ed25519")return new Xo({multihash:e,publicKey:t});if(t.type==="secp256k1")return new Jo({multihash:e,publicKey:t})}catch{let r=q(e.digest);return new Kn(new URL(r))}throw new xo("Supplied PeerID Multihash is invalid")}function yx(e){if(e?.multihash==null||e.version==null||e.version===1&&e.code!==mx&&e.code!==Wd)throw new bo("Supplied PeerID CID is invalid");if(e.code===Wd){let t=q(e.multihash.digest);return new Kn(new URL(t))}return Zd(e.multihash)}function gx(e){return e.code===Pe.code}function wx(e){return e.code===nn.code}function Qo(e){return async function(r={}){let n=await e.post("bitswap/stat",{searchParams:h(r),signal:r.signal,headers:r.headers});return bx(await n.json())}}function bx(e){return{provideBufLen:e.ProvideBufLen??0,wantlist:(e.Wantlist??[]).map(t=>I.parse(t["/"])),peers:(e.Peers??[]).map(t=>le(t)),blocksReceived:BigInt(e.BlocksReceived),dataReceived:BigInt(e.DataReceived),blocksSent:BigInt(e.BlocksSent),dataSent:BigInt(e.DataSent),dupBlksReceived:BigInt(e.DupBlksReceived),dupDataReceived:BigInt(e.DupDataReceived)}}function Yd(e){return async function(r,n={}){return((await(await e.post("bitswap/wantlist",{signal:n.signal,searchParams:h({...n,peer:r.toString()}),headers:n.headers})).json()).Keys??[]).map(s=>I.parse(s["/"]))}}function Xd(e){return async function(r={}){return((await(await e.post("bitswap/wantlist",{signal:r.signal,searchParams:h(r),headers:r.headers})).json()).Keys??[]).map(o=>I.parse(o["/"]))}}function tc(e){return{wantlist:Xd(e),wantlistForPeer:Yd(e),stat:Qo(e)}}function es(e){return async function(r,n={}){let o=await e.post("block/get",{signal:n.signal,searchParams:h({arg:r.toString(),...n}),headers:n.headers});return new Uint8Array(await o.arrayBuffer())}}function Jd(e){return async function t(r,n={}){let o=new AbortController,s=pe([o.signal,n.signal]),i;try{i=await(await e.post("block/put",{signal:s,searchParams:h(n),...await ve([r],o,n.headers)})).json()}catch(a){if(n.format==="dag-pb")return await t(r,{...n,format:"protobuf"});if(n.format==="dag-cbor")return await t(r,{...n,format:"cbor"});throw a}finally{s.clear()}return I.parse(i.Key)}}function Qd(e){return async function*(r,n={}){Array.isArray(r)||(r=[r]);let o=await e.post("block/rm",{signal:n.signal,searchParams:h({arg:r.map(s=>s.toString()),"stream-channels":!0,...n}),headers:n.headers});for await(let s of o.ndjson())yield xx(s)}}function xx(e){let t={cid:I.parse(e.Hash)};return e.Error!=null&&(t.error=new Error(e.Error)),t}function eh(e){return async function(r,n={}){let s=await(await e.post("block/stat",{signal:n.signal,searchParams:h({arg:r.toString(),...n}),headers:n.headers})).json();return{cid:I.parse(s.Key),size:s.Size}}}function rc(e){return{get:es(e),put:Jd(e),rm:Qd(e),stat:eh(e)}}function th(e){return async function(r,n={}){let o=await e.post("bootstrap/add",{signal:n.signal,searchParams:h({arg:r,...n}),headers:n.headers}),{Peers:s}=await o.json();return{Peers:s.map(i=>Q(i))}}}function rh(e){return async function(r={}){let n=await e.post("bootstrap/list",{signal:r.signal,searchParams:h(r),headers:r.headers}),{Peers:o}=await n.json();return{Peers:o.map(s=>Q(s))}}}function nh(e){return async function(r,n={}){let o=await e.post("bootstrap/rm",{signal:n.signal,searchParams:h({arg:r,...n}),headers:n.headers}),{Peers:s}=await o.json();return{Peers:s.map(i=>Q(i))}}}function nc(e){return{add:th(e),list:rh(e),rm:nh(e)}}function oh(e){return async function*(r,n={}){yield*(await e.post("cat",{signal:n.signal,searchParams:h({arg:r.toString(),...n}),headers:n.headers})).iterator()}}function sh(e){return async function(r={}){return(await e.post("commands",{signal:r.signal,searchParams:h(r),headers:r.headers})).json()}}function ih(e){return async function(r={}){return await(await e.post("config/show",{signal:r.signal,searchParams:h({...r}),headers:r.headers})).json()}}function ah(e){return async function(r,n={}){if(r==null)throw new Error("key argument is required");return(await(await e.post("config",{signal:n.signal,searchParams:h({arg:r,...n}),headers:n.headers})).json()).Value}}function ch(e){return async function(r,n={}){let s=await(await e.post("config/profile/apply",{signal:n.signal,searchParams:h({arg:r,...n}),headers:n.headers})).json();return{original:s.OldCfg,updated:s.NewCfg}}}function fh(e){return{apply:ch(e)}}function uh(e){return async function(r,n={}){let o=new AbortController,s=pe([o.signal,n.signal]);try{await(await e.post("config/replace",{signal:s,searchParams:h(n),...await ve([Y(JSON.stringify(r))],o,n.headers)})).text()}finally{s.clear()}}}function lh(e){return async function(r,n,o={}){if(typeof r!="string")throw new Error("Invalid key type");let s={...o,...Ex(r,n)};await(await e.post("config",{signal:o.signal,searchParams:h(s),headers:o.headers})).text()}}function Ex(e,t){switch(typeof t){case"boolean":return{arg:[e,t.toString()],bool:!0};case"string":return{arg:[e,t]};default:return{arg:[e,JSON.stringify(t)],json:!0}}}function oc(e){return{getAll:ih(e),get:ah(e),set:lh(e),replace:uh(e),profiles:fh(e)}}function dh(e){return async function*(r,n={}){yield*(await e.post("dag/export",{signal:n.signal,searchParams:h({arg:r.toString()}),headers:n.headers})).iterator()}}var ph=Mt(bn(),1);function Sx(e){return e[Symbol.asyncIterator]!=null}function Ax(e){if(Sx(e))return(async()=>{for await(let t of e)return t})();for(let t of e)return t}var hh=Ax;var sc=Mt(bn(),1);async function*ic(e,t,r,n,o){let s=async u=>{let f=await r.getCodec(u.code),l=await n(u,o);return f.decode(l)},i=t.split("/").filter(Boolean),a=await s(e),c=e;for(;i.length>0;){let u=i.shift();if(u==null)throw(0,sc.default)(new Error(`Could not resolve path "${t}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(a,u))a=a[u],yield{value:a,remainderPath:i.join("/")};else throw(0,sc.default)(new Error(`no link named "${u}" under ${c}`),"ERR_NO_LINK");let f=I.asCID(a);f!=null&&(c=f,a=await s(a))}yield{value:a,remainderPath:""}}function mh(e,t){let r=es(e);return async function(o,s={}){if(s.path!=null){let f=s.localResolve===!0?await hh(ic(o,s.path,t,r,s)):await _t(ic(o,s.path,t,r,s));if(f==null)throw(0,ph.default)(new Error("Not found"),"ERR_NOT_FOUND");return f}let i=await t.getCodec(o.code),a=await r(o,s);return{value:i.decode(a),remainderPath:""}}}function yh(e){return async function*(r,n={}){let o=new AbortController,s=pe([o.signal,n.signal]);try{let{headers:i,body:a}=await ve(r,o,n.headers),c=await e.post("dag/import",{signal:s,headers:i,body:a,searchParams:h({"pin-roots":n.pinRoots})});for await(let{Root:u}of c.ndjson())if(u!==void 0){let{Cid:{"/":f},PinErrorMsg:l}=u;yield{root:{cid:I.parse(f),pinErrorMsg:l}}}}finally{s.clear()}}}function gh(e,t){return async function(n,o={}){let s={storeCodec:"dag-cbor",hashAlg:"sha2-256",...o},i;if(s.inputCodec!=null){if(!(n instanceof Uint8Array))throw new Error("Can only inputCodec on raw bytes that can be decoded");i=n}else i=(await t.getCodec(s.storeCodec??"dag-cbor")).encode(n),s.inputCodec=s.storeCodec;let a=new AbortController,c=pe([a.signal,s.signal]);try{let f=await(await e.post("dag/put",{timeout:s.timeout,signal:c,searchParams:h(s),...await ve([i],a,s.headers)})).json();return I.parse(f.Cid["/"])}finally{c.clear()}}}function wh(e){return async function(r,n={}){let s=await(await e.post("dag/resolve",{signal:n.signal,searchParams:h({arg:`${r}${n.path!=null?`/${n.path}`.replace(/\/[/]+/g,"/"):""}`,...n}),headers:n.headers})).json();return{cid:I.parse(s.Cid["/"]),remainderPath:s.RemPath}}}function ac(e,t){return{export:dh(e),get:mh(e,t),import:yh(e),put:gh(e,t),resolve:wh(e)}}function He(e){if(e.Type===0)return{name:"SENDING_QUERY",type:e.Type};if(e.Type===1)return{from:le(e.ID),name:"PEER_RESPONSE",type:e.Type,messageType:0,messageName:"PUT_VALUE",closer:(e.Responses??[]).map(({ID:t,Addrs:r})=>({id:le(t),multiaddrs:r.map(n=>Q(n)),protocols:[]})),providers:(e.Responses??[]).map(({ID:t,Addrs:r})=>({id:le(t),multiaddrs:r.map(n=>Q(n)),protocols:[]}))};if(e.Type===2){let t={id:e.ID??le(e.ID),multiaddrs:[],protocols:[]};return e.Responses?.length>0&&(t={id:le(e.Responses[0].ID),multiaddrs:e.Responses[0].Addrs.map(r=>Q(r)),protocols:[]}),{name:"FINAL_PEER",type:e.Type,peer:t}}if(e.Type===3)return{name:"QUERY_ERROR",type:e.Type,error:new Error(e.Extra)};if(e.Type===4)return{name:"PROVIDER",type:e.Type,providers:e.Responses.map(({ID:t,Addrs:r})=>({id:le(t),multiaddrs:r.map(n=>Q(n)),protocols:[]}))};if(e.Type===5)return{name:"VALUE",type:e.Type,value:Y(e.Extra,"base64pad")};if(e.Type===6){let t=e.Responses.map(({ID:r})=>le(r));if(t.length===0)throw new Error("No peer found");return{name:"ADDING_PEER",type:e.Type,peer:t[0]}}if(e.Type===7)return{name:"DIALING_PEER",type:e.Type,peer:le(e.ID)};throw new Error("Unknown DHT event type")}function bh(e){return async function*(r,n={}){let o=await e.post("dht/query",{signal:n.signal,searchParams:h({arg:r.toString(),...n}),headers:n.headers});for await(let s of o.ndjson())yield He(s)}}var cc;(function(e){e[e.SENDING_QUERY=0]="SENDING_QUERY",e[e.PEER_RESPONSE=1]="PEER_RESPONSE",e[e.FINAL_PEER=2]="FINAL_PEER",e[e.QUERY_ERROR=3]="QUERY_ERROR",e[e.PROVIDER=4]="PROVIDER",e[e.VALUE=5]="VALUE",e[e.ADDING_PEER=6]="ADDING_PEER",e[e.DIALING_PEER=7]="DIALING_PEER"})(cc||(cc={}));var fc;(function(e){e[e.PUT_VALUE=0]="PUT_VALUE",e[e.GET_VALUE=1]="GET_VALUE",e[e.ADD_PROVIDER=2]="ADD_PROVIDER",e[e.GET_PROVIDERS=3]="GET_PROVIDERS",e[e.FIND_NODE=4]="FIND_NODE",e[e.PING=5]="PING"})(fc||(fc={}));function uc(e){return{query:bh(e)}}function xh(e){return async function(r={}){return(await e.post("diag/cmds",{signal:r.signal,searchParams:h(r),headers:r.headers})).json()}}function Eh(e){return async function(r={}){return(await e.post("diag/net",{signal:r.signal,searchParams:h(r),headers:r.headers})).json()}}function Sh(e){return async function(r={}){return(await e.post("diag/sys",{signal:r.signal,searchParams:h(r),headers:r.headers})).json()}}function lc(e){return{cmds:xh(e),net:Eh(e),sys:Sh(e)}}function Ah(e){return async function(r,n,o={}){let s=Array.isArray(r)?r:[r];await(await e.post("files/cp",{signal:o.signal,searchParams:h({arg:s.concat(n).map(a=>I.asCID(a)!=null?`/ipfs/${a}`:a),...o}),headers:o.headers})).text()}}function vh(e){return async function(r,n={}){if(typeof r!="string")throw new Error("ipfs.files.flush requires a path");let s=await(await e.post("files/flush",{signal:n.signal,searchParams:h({arg:r,...n}),headers:n.headers})).json();return I.parse(s.Cid)}}function $n(e){let t=G(e);return Object.prototype.hasOwnProperty.call(t,"mode")&&(t.mode=parseInt(t.mode,8)),Object.prototype.hasOwnProperty.call(t,"mtime")&&(t.mtime={secs:t.mtime,nsecs:t.mtimeNsecs??0},delete t.mtimeNsecs),t}function Ih(e){return async function*(r,n={}){if(r==null)throw new Error("ipfs.files.ls requires a path");let o=await e.post("files/ls",{signal:n.signal,searchParams:h({arg:I.asCID(r)!=null?`/ipfs/${r}`:r,long:!0,...n,stream:!0}),headers:n.headers});for await(let s of o.ndjson())if("Entries"in s)for(let i of s.Entries??[])yield Ch($n(i));else yield Ch($n(s))}}function Ch(e){return e.hash!=null&&(e.cid=I.parse(e.hash)),delete e.hash,e.type=e.type===1?"directory":"file",e}function Bh(e){return async function(r,n={}){await(await e.post("files/mkdir",{signal:n.signal,searchParams:h({arg:r,...n}),headers:n.headers})).text()}}function Ph(e){return async function(r,n,o={}){Array.isArray(r)||(r=[r]),await(await e.post("files/mv",{signal:o.signal,searchParams:h({arg:r.concat(n),...o}),headers:o.headers})).text()}}function dc(e){if(Cx(e))return(async function*(){let t=e.getReader();try{for(;;){let{done:r,value:n}=await t.read();if(r)return;yield n}}finally{t.releaseLock()}})();if(vx(e))return e;throw new Error("unknown stream")}function vx(e){return e[Symbol.asyncIterator]!=null}function Cx(e){return typeof e?.getReader=="function"}function Th(e){return async function*(r,n={}){let o=await e.post("files/read",{signal:n.signal,searchParams:h({arg:r,count:n.length,...n}),headers:n.headers});if(o.body==null)throw new Error("Invalid response body");yield*dc(o.body)}}function _h(e){return async function(r,n={}){let o=await e.post("files/rm",{signal:n.signal,searchParams:h({arg:r,...n}),headers:n.headers}),s=await o.text();if(s!==""){let i=new yo(o);throw i.message=s,i}}}function ts(e){return async function(r,n={}){let s=await(await e.post("files/stat",{signal:n.signal,searchParams:h({arg:r,...n}),headers:n.headers})).json();return s.WithLocality=s.WithLocality??!1,Ix($n(s))}}function Ix(e){return e.cid=I.parse(e.hash),delete e.hash,e}function Uh(e){return async function(r,n,o={}){let s=new AbortController,i=pe([s.signal,o.signal]);try{await(await e.post("files/write",{signal:i,searchParams:h({arg:r,streamChannels:!0,count:o.length,...o}),...await ve([{content:n,path:"arg",mode:_r(o.mode),mtime:Tt(o.mtime)}],s,o.headers)})).text()}finally{i.clear()}}}function hc(e){return{cp:Ah(e),flush:vh(e),ls:Ih(e),mkdir:Bh(e),mv:Ph(e),read:Th(e),rm:_h(e),stat:ts(e),write:Uh(e)}}function Dh(e){return function(){let r=new URL(e.opts.base??"");return{host:r.hostname,port:r.port,protocol:r.protocol,pathname:r.pathname,"api-path":r.pathname}}}function Rh(e){return async function*(r,n={}){let o={arg:`${r instanceof Uint8Array?I.decode(r):r}`,...n};yield*(await e.post("get",{signal:n.signal,searchParams:h(o),headers:n.headers})).iterator()}}function rs(e){return async function(r={}){let o=await(await e.post("id",{signal:r.signal,searchParams:h({arg:r.peerId!=null?r.peerId.toString():void 0,...r}),headers:r.headers})).json(),s={...G(o)};return s.id=le(s.id),s.addresses!=null&&(s.addresses=s.addresses.map(i=>Q(i))),s}}function Nh(e){let t=rs(e);return async function(n={}){try{return!!(await t(n))?.addresses?.length}catch{return!1}}}var Bx={type:"ed25519"};function kh(e){return async function(r,n=Bx){let s=await(await e.post("key/gen",{signal:n.signal,searchParams:h({arg:r,...n}),headers:n.headers})).json();return G(s)}}function Lh(e){return async function(r,n,o,s={}){let a=await(await e.post("key/import",{signal:s.signal,searchParams:h({arg:r,pem:n,password:o,...s}),headers:s.headers})).json();return G(a)}}function Oh(e){return async function(r={}){return((await(await e.post("key/list",{signal:r.signal,searchParams:h(r),headers:r.headers})).json()).Keys??[]).map(s=>G(s))}}function Kh(e){return async function(r,n,o={}){let s=await e.post("key/rename",{signal:o.signal,searchParams:h({arg:[r,n],...o}),headers:o.headers});return G(await s.json())}}function $h(e){return async function(r,n={}){let s=await(await e.post("key/rm",{signal:n.signal,searchParams:h({arg:r,...n}),headers:n.headers})).json();return G(s.Keys[0])}}function pc(e){return{gen:kh(e),import:Lh(e),list:Oh(e),rename:Kh(e),rm:$h(e)}}function Px(e,t){if(typeof e=="string")return Tx(e);if(typeof e=="number")return Dx(e,t);throw Error(`Value provided to ms() must be a string or number. value=${JSON.stringify(e)}`)}var ns=Px;function Tx(e){if(typeof e!="string"||e.length===0||e.length>100)throw Error(`Value provided to ms.parse() must be a string with length between 1 and 99. value=${JSON.stringify(e)}`);let t=/^(?<value>-?\d*\.?\d+) *(?<unit>milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|months?|mo|years?|yrs?|y)?$/i.exec(e);if(!t?.groups)return NaN;let{value:r,unit:n="ms"}=t.groups,o=parseFloat(r),s=n.toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return o*315576e5;case"months":case"month":case"mo":return o*26298e5;case"weeks":case"week":case"w":return o*6048e5;case"days":case"day":case"d":return o*864e5;case"hours":case"hour":case"hrs":case"hr":case"h":return o*36e5;case"minutes":case"minute":case"mins":case"min":case"m":return o*6e4;case"seconds":case"second":case"secs":case"sec":case"s":return o*1e3;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:throw Error(`Unknown unit "${s}" provided to ms.parse(). value=${JSON.stringify(e)}`)}}function _x(e){let t=Math.abs(e);return t>=315576e5?`${Math.round(e/315576e5)}y`:t>=26298e5?`${Math.round(e/26298e5)}mo`:t>=6048e5?`${Math.round(e/6048e5)}w`:t>=864e5?`${Math.round(e/864e5)}d`:t>=36e5?`${Math.round(e/36e5)}h`:t>=6e4?`${Math.round(e/6e4)}m`:t>=1e3?`${Math.round(e/1e3)}s`:`${e}ms`}function Ux(e){let t=Math.abs(e);return t>=315576e5?nr(e,t,315576e5,"year"):t>=26298e5?nr(e,t,26298e5,"month"):t>=6048e5?nr(e,t,6048e5,"week"):t>=864e5?nr(e,t,864e5,"day"):t>=36e5?nr(e,t,36e5,"hour"):t>=6e4?nr(e,t,6e4,"minute"):t>=1e3?nr(e,t,1e3,"second"):`${e} ms`}function Dx(e,t){if(typeof e!="number"||!Number.isFinite(e))throw Error("Value provided to ms.format() must be of type number.");return t?.long?Ux(e):_x(e)}function nr(e,t,r,n){let o=t>=r*1.5;return`${Math.round(e/r)} ${n}${o?"s":""}`}function mc(e){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=o,r.enabled=i,r.humanize=ns,r.destroy=u,Object.keys(e).forEach(f=>{r[f]=e[f]}),r.names=[],r.skips=[],r.formatters={};function t(f){let l=0;for(let y=0;y<f.length;y++)l=(l<<5)-l+f.charCodeAt(y),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=t;function r(f){let l,y=null,B,p;function v(...S){if(!v.enabled)return;let m=v,P=Number(new Date),b=P-(l||P);m.diff=b,m.prev=l,m.curr=P,l=P,S[0]=r.coerce(S[0]),typeof S[0]!="string"&&S.unshift("%O");let T=0;S[0]=S[0].replace(/%([a-zA-Z%])/g,($,M)=>{if($==="%%")return"%";T++;let A=r.formatters[M];if(typeof A=="function"){let C=S[T];$=A.call(m,C),S.splice(T,1),T--}return $}),r.formatArgs.call(m,S),(m.log||r.log).apply(m,S)}return v.namespace=f,v.useColors=r.useColors(),v.color=r.selectColor(f),v.extend=n,v.destroy=r.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>y!==null?y:(B!==r.namespaces&&(B=r.namespaces,p=r.enabled(f)),p),set:S=>{y=S}}),typeof r.init=="function"&&r.init(v),v}function n(f,l){let y=r(this.namespace+(typeof l>"u"?":":l)+f);return y.log=this.log,y}function o(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let l,y=(typeof f=="string"?f:"").split(/[\s,]+/),B=y.length;for(l=0;l<B;l++)y[l]&&(f=y[l].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.substr(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function s(){let f=[...r.names.map(a),...r.skips.map(a).map(l=>"-"+l)].join(",");return r.enable(""),f}function i(f){if(f[f.length-1]==="*")return!0;let l,y;for(l=0,y=r.skips.length;l<y;l++)if(r.skips[l].test(f))return!1;for(l=0,y=r.names.length;l<y;l++)if(r.names[l].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function c(f){return f instanceof Error?f.stack??f.message:f}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.setupFormatters(r.formatters),r.enable(r.load()),r}var os=$x(),Rx=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Nx(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/(edge|trident)\/(\d+)/)!=null?!1:typeof document<"u"&&document.documentElement?.style?.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/firefox\/(\d+)/)!=null&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/applewebkit\/(\d+)/)}function kx(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+ns(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(r++,o==="%c"&&(n=r))}),e.splice(n,0,t)}var Lx=console.debug??console.log??(()=>{});function Ox(e){try{e?os?.setItem("debug",e):os?.removeItem("debug")}catch{}}function Kx(){let e;try{e=os?.getItem("debug")}catch{}return!e&&typeof globalThis.process<"u"&&"env"in globalThis.process&&(e=globalThis.process.env.DEBUG),e}function $x(){try{return localStorage}catch{}}function Mx(e){e.j=function(t){try{return JSON.stringify(t)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}}var Mh=mc({formatArgs:kx,save:Ox,load:Kx,useColors:Nx,setupFormatters:Mx,colors:Rx,storage:os,log:Lx});var Ue=Mh;Ue.formatters.b=e=>e==null?"undefined":te.baseEncode(e);Ue.formatters.t=e=>e==null?"undefined":rt.baseEncode(e);Ue.formatters.m=e=>e==null?"undefined":ar.baseEncode(e);Ue.formatters.p=e=>e==null?"undefined":e.toString();Ue.formatters.c=e=>e==null?"undefined":e.toString();Ue.formatters.k=e=>e==null?"undefined":e.toString();Ue.formatters.a=e=>e==null?"undefined":e.toString();Ue.formatters.e=e=>{if(e==null)return"undefined";let t=Fh(e.message),r=Fh(e.stack);return t!=null&&r!=null?r.includes(t)?r:`${t}
${r}`:r??t??e.toString()};function Fx(e){let t=()=>{};return t.enabled=!1,t.color="",t.diff=0,t.log=()=>{},t.namespace=e,t.destroy=()=>!0,t.extend=()=>t,t}function or(e){let t=Fx(`${e}:trace`);return Ue.enabled(`${e}:trace`)&&Ue.names.map(r=>r.toString()).find(r=>r.includes(":trace"))!=null&&(t=Ue(`${e}:trace`)),Object.assign(Ue(e),{error:Ue(`${e}:error`),trace:t,newScope:r=>or(`${e}:${r}`)})}function Fh(e){if(e!=null&&(e=e.trim(),e.length!==0))return e}var Yh=Mt(Zh(),1),as=Yh.default;var W=Object.create(null),Xh=6e4,Jh=Xh*60,gc=Jh*24,Qh=gc*365.25;W.year=W.yr=W.y=Qh;W.month=W.mo=W.mth=Qh/12;W.week=W.wk=W.w=gc*7;W.day=W.d=gc;W.hour=W.hr=W.h=Jh;W.minute=W.min=W.m=Xh;W.second=W.sec=W.s=1e3;W.millisecond=W.millisec=W.ms=1;W.microsecond=W.microsec=W.us=W.\u00B5s=.001;W.nanosecond=W.nanosec=W.ns=1e-6;W.group=",";W.decimal=".";W.placeholder=" _";var ep=W;var Gx=/((?:\d{1,16}(?:\.\d{1,16})?|\.\d{1,16})(?:[eE][-+]?\d{1,4})?)\s?([\p{L}]{0,14})/gu;je.unit=ep;function je(e="",t="ms"){let r=null,n;return String(e).replace(new RegExp(`(\\d)[${je.unit.placeholder}${je.unit.group}](\\d)`,"g"),"$1$2").replace(je.unit.decimal,".").replace(Gx,(o,s,i)=>{if(i)i=i.toLowerCase();else if(n){for(let a in je.unit)if(je.unit[a]<n){i=a;break}}else i=t;n=i=je.unit[i]||je.unit[i.replace(/s$/,"")],i&&(r=(r||0)+s*i)}),r&&r/(je.unit[t]||1)*(e[0]==="-"?-1:1)}var tp=()=>{};var Wr=Mt(cp(),1);var Gr=class extends Error{constructor(t="Request timed out"){super(t),this.name="TimeoutError"}},cs=class extends Error{constructor(t="The operation was aborted."){super(t),this.name="AbortError"}},Fn=class extends Error{response;constructor(t){super(t.statusText),this.name="HTTPError",this.response=t}};var n1=async(e,t={})=>{let r=new XMLHttpRequest;r.open(t.method??"GET",e.toString(),!0);let{timeout:n,headers:o}=t,s=Number(n);if(!isNaN(s)&&s>0&&s<1/0&&(r.timeout=s),t.overrideMimeType!=null&&r.overrideMimeType(t.overrideMimeType),o!=null)for(let[i,a]of new Headers(o))r.setRequestHeader(i,a);return t.signal!=null&&(t.signal.onabort=()=>{r.abort()}),t.onUploadProgress!=null&&(r.upload.onprogress=t.onUploadProgress),r.responseType="arraybuffer",new Promise((i,a)=>{let c=u=>{switch(u.type){case"error":{i(Response.error());break}case"load":{i(new xc(r.responseURL,r.response,{status:r.status,statusText:r.statusText,headers:s1(r.getAllResponseHeaders())}));break}case"timeout":{a(new Gr);break}case"abort":{a(new cs);break}default:break}};r.onerror=c,r.onload=c,r.ontimeout=c,r.onabort=c,r.send(t.body)})},o1=fetch,fp=(e,t={})=>t.onUploadProgress!=null?n1(e,t):o1(e,t),s1=e=>{let t=new Headers;for(let r of e.trim().split(/[\r\n]+/)){let n=r.indexOf(": ");n>0&&t.set(r.slice(0,n),r.slice(n+1))}return t},xc=class extends Response{constructor(t,r,n){super(r,n),Object.defineProperty(this,"url",{value:t})}};var up=as.bind({ignoreUndefined:!0}),fs=or("kubo-rpc-client:fetch"),i1={throwHttpErrors:!0,credentials:"same-origin"},Je=class e{static HTTPError=Fn;static TimeoutError=Gr;static post=async(t,r)=>new e(r).post(t,r);static get=async(t,r)=>new e(r).get(t,r);static put=async(t,r)=>new e(r).put(t,r);static delete=async(t,r)=>new e(r).delete(t,r);static options=async(t,r)=>new e(r).options(t,r);opts;constructor(t={}){this.opts=up({},i1,t)}async fetch(t,r={}){let n=up({},this.opts,r),o=new Headers(n.headers);if(typeof t!="string"&&!(t instanceof Wr.URL||t instanceof Request))throw new TypeError("`resource` must be a string, URL, or Request");let s=new Wr.URL(t.toString(),n.base),{searchParams:i,transformSearchParams:a,json:c}=n;i!=null&&(typeof a=="function"?s.search=a(new Wr.URLSearchParams(n.searchParams)):s.search=new Wr.URLSearchParams(n.searchParams).toString()),c!=null&&(n.body=JSON.stringify(n.json),o.set("content-type","application/json"));let u=[n.signal];n.timeout!=null&&isNaN(n.timeout)&&n.timeout>0&&u.push(AbortSignal.timeout(n.timeout));let f=pe(u);try{globalThis.ReadableStream!=null&&n.body instanceof globalThis.ReadableStream&&(Ir||Br)&&(n.body=new Blob(await Eo(mt(n.body)))),fs.trace("outgoing headers",n.headers),fs.trace("%s %s",n.method,s);let l=await fp(s.toString(),{...n,signal:n.signal,timeout:void 0,headers:o,duplex:"half"});if(fs("%s %s %d",n.method,s,l.status),fs.trace("incoming headers",l.headers),!l.ok&&n.throwHttpErrors===!0)throw n.handleError!=null&&await n.handleError(l),new Fn(l);return l.iterator=async function*(){yield*c1(l.body)},l.ndjson=async function*(){for await(let y of a1(l.iterator()))r.transform!=null?yield r.transform(y):yield y},l}finally{f.clear()}}async post(t,r={}){return this.fetch(t,{...r,method:"POST"})}async get(t,r={}){return this.fetch(t,{...r,method:"GET"})}async put(t,r={}){return this.fetch(t,{...r,method:"PUT"})}async delete(t,r={}){return this.fetch(t,{...r,method:"DELETE"})}async options(t,r={}){return this.fetch(t,{...r,method:"OPTIONS"})}},a1=async function*(e){let t=new TextDecoder,r="";for await(let n of e){r+=t.decode(n,{stream:!0});let o=r.split(/\r?\n/);for(let s=0;s<o.length-1;s++){let i=o[s].trim();i.length>0&&(yield JSON.parse(i))}r=o[o.length-1]}r+=t.decode(),r=r.trim(),r.length!==0&&(yield JSON.parse(r))},c1=e=>{if(f1(e))return e;if(l1(e)){let t=e[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:t.next.bind(t),return(r){return e.destroy(),typeof t.return=="function"?t.return():Promise.resolve({done:!0,value:r})}}}}}if(u1(e)){let t=e.getReader();return(async function*(){try{for(;;){let{done:r,value:n}=await t.read();if(r)return;n!=null&&(yield n)}}finally{t.releaseLock()}})()}throw new TypeError("Body can't be converted to AsyncIterable")},f1=e=>e!==null&&typeof e[Symbol.asyncIterator]=="function",u1=e=>e!=null&&typeof e.getReader=="function",l1=e=>Object.prototype.hasOwnProperty.call(e,"readable")&&Object.prototype.hasOwnProperty.call(e,"writable");var d1=[6,53,56,54,55];function lp(e){return pp("sni",e)?.value}function dp(e){let t=pp("tcp",e)?.value;return t==null?"":`:${t}`}function pp(e,t){return t.find(r=>r.name===e)}function hp(e){return e.some(({code:t})=>t===448)}function Qe(e,t){let r=mp[e.name];if(r==null)throw new Error(`Can't interpret protocol ${e.name}`);let n=r(e,t);return e.code===41?`[${n}]`:n}var mp={ip4:(e,t)=>e.value,ip6:(e,t)=>t.length===0?e.value:`[${e.value}]`,tcp:(e,t)=>{let r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`tcp://${Qe(r,t)}:${e.value}`},udp:(e,t)=>{let r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`udp://${Qe(r,t)}:${e.value}`},dnsaddr:(e,t)=>e.value,dns4:(e,t)=>e.value,dns6:(e,t)=>e.value,dns:(e,t)=>e.value,ipfs:(e,t)=>{let r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`${Qe(r,t)}`},p2p:(e,t)=>{let r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return`${Qe(r,t)}`},http:(e,t)=>{let r=hp(t),n=lp(t),o=dp(t);if(r&&n!=null)return`https://${n}${o}`;let s=r?"https://":"http://",i=t.pop();if(i==null)throw new Error("Unexpected end of multiaddr");let a=Qe(i,t);return a=a?.replace("tcp://",""),`${s}${a}`},"http-path":(e,t)=>{let r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");let n=Qe(r,t),o=decodeURIComponent(e.value??"");return`${n}${o}`},tls:(e,t)=>{let r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return Qe(r,t)},sni:(e,t)=>{let r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");return Qe(r,t)},https:(e,t)=>{let r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");let n=Qe(r,t);return n=n?.replace("tcp://",""),`https://${n}`},ws:(e,t)=>{let r=hp(t),n=lp(t),o=dp(t);if(r&&n!=null)return`wss://${n}${o}`;let s=r?"wss://":"ws://",i=t.pop();if(i==null)throw new Error("Unexpected end of multiaddr");let a=Qe(i,t);return a=a?.replace("tcp://",""),`${s}${a}`},wss:(e,t)=>{let r=t.pop();if(r==null)throw new Error("Unexpected end of multiaddr");let n=Qe(r,t);return n=n?.replace("tcp://",""),`wss://${n}`}};function yp(e,t){let n=Q(e).getComponents(),o=n.pop();if(o==null)throw new Error("Unexpected end of multiaddr");let s=mp[o.name];if(s==null)throw new Error(`No interpreter found for ${o.name}`);let i=s(o,n)??"";return t?.assumeHttp!==!1&&d1.includes(o.code)&&(i=i.replace(/^.*:\/\//,""),o.value==="443"?i=`https://${i}`:i=`http://${i}`),(i.startsWith("http://")||i.startsWith("https://")||i.startsWith("ws://")||i.startsWith("wss://"))&&(i=new URL(i).toString(),i.endsWith("/")&&(i=i.substring(0,i.length-1))),i}function Ec(e){try{e=yp(Q(e))}catch{}return e=e.toString(),e}var gp=or("js-kubo-rpc-client:lib:error-handler"),h1=as.bind({ignoreUndefined:!0}),p1=Ir||Br?location.protocol:"http",m1=Ir||Br?location.hostname:"localhost",y1=Ir||Br?location.port:"5001",g1=(e={})=>{let t,r={},n;if(typeof e=="string"||jt(e))t=new URL(Ec(e));else if(e instanceof URL)t=e;else if(typeof e.url=="string"||jt(e.url))t=new URL(Ec(e.url)),r=e;else if(e.url instanceof URL)t=e.url,r=e;else{r=e??{};let o=(r.protocol??p1).replace(":",""),s=(r.host??m1).split(":")[0],i=r.port??y1;t=new URL(`${o}://${s}:${i}`)}if(r.apiPath!=null?t.pathname=r.apiPath:(t.pathname==="/"||t.pathname===void 0)&&(t.pathname="api/v0"),ml){let o=tp(t);n=r.agent??new o({keepAlive:!0,maxSockets:6})}return{...r,host:t.host,protocol:t.protocol.replace(":",""),port:Number(t.port),apiPath:t.pathname,url:t,agent:n}},w1=async e=>{let t;try{if((e.headers.get("Content-Type")??"").startsWith("application/json")){let n=await e.json();gp(n),t=n.Message??n.message}else t=await e.text()}catch(n){gp("Failed to parse error response",n),t=n.message}let r=new Je.HTTPError(e);throw t!=null&&(t.includes("deadline has elapsed")&&(r=new Je.TimeoutError),t.includes("context deadline exceeded")&&(r=new Je.TimeoutError),t.includes("request timed out")&&(r=new Je.TimeoutError),r.message=t),r},b1=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,wp=e=>e.replace(b1,function(t){return"-"+t.toLowerCase()}),x1=e=>typeof e=="string"?je(e)??0:e,us=class extends Je{constructor(t={}){let r=g1(t);super({timeout:r.timeout!=null?x1(r.timeout):void 0,headers:r.headers,base:`${r.url}`,handleError:w1,transformSearchParams:o=>{let s=new URLSearchParams;for(let[i,a]of o)a!=="undefined"&&a!=="null"&&i!=="signal"&&i!=="timeout"&&s.append(wp(i),a),i==="timeout"&&!isNaN(parseInt(a))&&s.append(wp(i),a);return s},agent:r.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;let n=this.fetch;this.fetch=async(o,s={})=>(typeof o=="string"&&!o.startsWith("/")&&(o=`${r.url}/${o}`),n.call(this,o,h1(s,{method:"POST"})))}},JB=Je.HTTPError;var E1=async e=>Promise.reject(new Error(`No base found for "${e}"`)),ls=class{_basesByName;_basesByPrefix;_loadBase;constructor(t){this._basesByName={},this._basesByPrefix={},this._loadBase=t.loadBase??E1;for(let r of t.bases)this.addBase(r)}addBase(t){if(this._basesByName[t.name]!=null&&this._basesByPrefix[t.prefix]!=null)throw new Error(`Codec already exists for codec "${t.name}"`);this._basesByName[t.name]=t,this._basesByPrefix[t.prefix]=t}removeBase(t){delete this._basesByName[t.name],delete this._basesByPrefix[t.prefix]}async getBase(t){if(this._basesByName[t]!=null)return this._basesByName[t];if(this._basesByPrefix[t]!=null)return this._basesByPrefix[t];let r=await this._loadBase(t);return this._basesByName[r.name]==null&&this._basesByPrefix[r.prefix]==null&&this.addBase(r),r}listBases(){return Object.values(this._basesByName)}};var S1=async e=>Promise.reject(new Error(`No codec found for "${e}"`)),ds=class{_codecsByName;_codecsByCode;_loadCodec;constructor(t){this._codecsByName={},this._codecsByCode={},this._loadCodec=t.loadCodec??S1;for(let r of t.codecs)this.addCodec(r)}addCodec(t){if(this._codecsByName[t.name]!=null||this._codecsByCode[t.code]!=null)throw new Error(`Resolver already exists for codec "${t.name}"`);this._codecsByName[t.name]=t,this._codecsByCode[t.code]=t}removeCodec(t){delete this._codecsByName[t.name],delete this._codecsByCode[t.code]}async getCodec(t){let r=typeof t=="string"?this._codecsByName:this._codecsByCode;if(r[t]!=null)return r[t];let n=await this._loadCodec(t);return r[t]==null&&this.addCodec(n),n}listCodecs(){return Object.values(this._codecsByName)}};var A1=async e=>Promise.reject(new Error(`No hasher found for "${e}"`)),hs=class{_hashersByName;_hashersByCode;_loadHasher;constructor(t){this._hashersByName={},this._hashersByCode={},this._loadHasher=t.loadHasher??A1;for(let r of t.hashers)this.addHasher(r)}addHasher(t){if(this._hashersByName[t.name]!=null||this._hashersByCode[t.code]!=null)throw new Error(`Resolver already exists for codec "${t.name}"`);this._hashersByName[t.name]=t,this._hashersByCode[t.code]=t}removeHasher(t){delete this._hashersByName[t.name],delete this._hashersByCode[t.code]}async getHasher(t){let r=typeof t=="string"?this._hashersByName:this._hashersByCode;if(r[t]!=null)return r[t];let n=await this._loadHasher(t);return r[t]==null&&this.addHasher(n),n}listHashers(){return Object.values(this._hashersByName)}};function bp(e){return async function(t,r,n={}){let o=await e.post("log/level",{signal:n.signal,searchParams:h({arg:[t,r],...n}),headers:n.headers});return G(await o.json())}}function xp(e){return async function(r={}){return(await(await e.post("log/ls",{signal:r.signal,searchParams:h(r),headers:r.headers})).json()).Strings}}function Ep(e){return async function*(r={}){yield*(await e.post("log/tail",{signal:r.signal,searchParams:h(r),headers:r.headers})).ndjson()}}function Sc(e){return{level:bp(e),ls:xp(e),tail:Ep(e)}}function Sp(e){return async function*(r,n={}){let o=`${r instanceof Uint8Array?I.decode(r):r}`;async function s(a){let c=a.Hash;if(c.includes("/")===!0){let f=c.startsWith("/ipfs/")===!0?c:`/ipfs/${c}`;c=(await ts(e)(f)).cid}else c=I.parse(c);return{name:a.Name,path:o+(a.Name!=null?`/${a.Name}`:""),size:a.Size,cid:c,type:v1(a)}}let i=await e.post("ls",{signal:n.signal,searchParams:h({arg:o,...n}),headers:n.headers});for await(let a of i.ndjson()){if(a=a.Objects,a==null)throw new Error("expected .Objects in results");if(a=a[0],a==null)throw new Error("expected one array in results.Objects");let c=a.Links;if(!Array.isArray(c))throw new Error("expected one array in results.Objects[0].Links");if(c.length===0){yield s(a);return}yield*c.map(s)}}}function v1(e){switch(e.Type){case 1:case 5:return"dir";case 2:return"file";default:return"file"}}function Ap(e){return async function(r={}){let n=await e.post("dns",{signal:r.signal,searchParams:h(r),headers:r.headers});return G(await n.json())}}function vp(e){return async function(r,n={}){let o=await e.post("name/publish",{signal:n.signal,searchParams:h({arg:`${r}`,...n}),headers:n.headers});return G(await o.json())}}function Cp(e){return async function(r,n={}){let o=await e.post("name/pubsub/cancel",{signal:n.signal,searchParams:h({arg:r,...n}),headers:n.headers});return G(await o.json())}}function Ip(e){return async function(r={}){let n=await e.post("name/pubsub/state",{signal:r.signal,searchParams:h(r),headers:r.headers});return G(await n.json())}}function Bp(e){return async function(r={}){return(await(await e.post("name/pubsub/subs",{signal:r.signal,searchParams:h(r),headers:r.headers})).json()).Strings??[]}}function Pp(e){return{cancel:Cp(e),state:Ip(e),subs:Bp(e)}}function Tp(e){return async function*(r,n={}){let o=await e.post("name/resolve",{signal:n.signal,searchParams:h({arg:r,stream:!0,...n}),headers:n.headers});for await(let s of o.ndjson())yield s.Path}}function Ac(e){return{publish:vp(e),resolve:Tp(e),pubsub:Pp(e)}}function _p(e){return async function(r,n,o={}){let s=await e.post("object/patch/add-link",{signal:o.signal,searchParams:h({arg:[`${r}`,n.Name??n.name??"",(n.Hash??n.cid??"").toString()??null],...o}),headers:o.headers}),{Hash:i}=await s.json();return I.parse(i)}}function Up(e){return async function(r,n,o={}){let s=await e.post("object/patch/rm-link",{signal:o.signal,searchParams:h({arg:[`${r}`,n.Name??n.name??null],...o}),headers:o.headers}),{Hash:i}=await s.json();return I.parse(i)}}function Dp(e){return{addLink:_p(e),rmLink:Up(e)}}function vc(e,t){return{patch:Dp(e)}}function C1(e){return Symbol.iterator in e}function I1(e){return Symbol.asyncIterator in e}function B1(e){return I.asCID(e)!=null}async function*ms(e){if(e==null)throw new J(`Unexpected input: ${e}`);let t=I.asCID(e);if(t!=null){yield sr({cid:t});return}if(typeof e=="string"){yield sr({path:e});return}if(e.cid!=null||e.path!=null)return yield sr(e);if(C1(e)){let r=e[Symbol.iterator](),n=r.next();if(n.done===!0)return r;yield sr(ps(n.value));for(let o of r)yield sr(ps(o));return}if(I1(e)){let r=e[Symbol.asyncIterator](),n=await r.next();if(n.done===!0)return r;yield sr(ps(n.value));for await(let o of r)yield sr(ps(o));return}throw new J(`Unexpected input: ${typeof e}`)}function ps(e){if(B1(e))return{cid:e};if(typeof e=="string")return{path:e};if(typeof e=="object"&&(e.cid!=null||e.path!=null))return e;throw new J(`Unexpected input: ${typeof e}`)}function sr(e){let t=e.cid??(e.path!=null?`${e.path}`:void 0);if(t==null)throw new J("Unexpected input: Please pass either a CID or an IPFS path");let r={path:t,recursive:e.recursive!==!1};return e.metadata!=null&&(r.metadata=e.metadata),e.name!=null&&(r.name=e.name),r}function ys(e){return async function*(r,n={}){for await(let{path:o,recursive:s,metadata:i,name:a}of ms(r)){let c=await e.post("pin/add",{signal:n.signal,searchParams:h({...n,arg:o.toString(),recursive:s,metadata:i!=null?JSON.stringify(i):void 0,name:a??n.name,stream:!0}),headers:n.headers});for await(let u of c.ndjson()){if(u.Pins!=null){for(let f of u.Pins)yield I.parse(f);continue}yield I.parse(u)}}}}function Rp(e){let t=ys(e);return async function(n,o={}){let s=await _t(t([{path:n.toString(),...o}],o));if(s==null)throw new Error("No response received");return s}}function Np(e,t,r,n){let o={type:e,cid:I.parse(t)};return r!=null&&(o.metadata=r),n!=null&&(o.name=n),o}function kp(e){return async function*(r={}){let n=[];if(r.paths!=null&&(n=Array.isArray(r.paths)?r.paths:[r.paths]),r.name!=null&&r.names===!1)throw new Error("Cannot use name filter when names is explicitly set to false");if(r.name==="")throw new Error("Name filter cannot be empty string");let o=r.names??r.name!=null,s=await e.post("pin/ls",{signal:r.signal,searchParams:h({...r,arg:n.map(i=>`${i}`),names:o,stream:!0}),headers:r.headers});for await(let i of s.ndjson()){if(i.Keys!=null){for(let a of Object.keys(i.Keys))yield Np(i.Keys[a].Type,a,i.Keys[a].Metadata,i.Keys[a].Name);return}yield Np(i.Type,i.Cid,i.Metadata,i.Name)}}}var gs=({Name:e,Status:t,Cid:r})=>({cid:I.parse(r),name:e,status:t}),Lp=e=>{if(typeof e=="string"&&e!=="")return e;throw new TypeError("service name must be passed")},Op=e=>{if(I.asCID(e)!=null)return e.toString();throw new TypeError(`CID instance expected instead of ${typeof e}`)},Zr=({service:e,cid:t,name:r,status:n,all:o})=>{let s=h({service:Lp(e),name:r,force:o===!0?!0:void 0});if(t!=null)for(let i of t)s.append("cid",Op(i));if(n!=null)for(let i of n)s.append("status",i);return s},Kp=(e,{service:t,background:r,name:n,origins:o})=>{let s=h({arg:Op(e),service:Lp(t),name:n,background:r===!0?!0:void 0});if(o!=null)for(let i of o)s.append("origin",i.toString());return s};function $p(e){return async function(r,{timeout:n,signal:o,headers:s,...i}){let a=await e.post("pin/remote/add",{timeout:n,signal:o,headers:s,searchParams:Kp(r,i)});return gs(await a.json())}}function Mp(e){return async function*({timeout:r,signal:n,headers:o,...s}){let i=await e.post("pin/remote/ls",{timeout:r,signal:n,headers:o,searchParams:Zr(s)});for await(let a of i.ndjson())yield gs(a)}}function Fp(e){return async function({timeout:r,signal:n,headers:o,...s}){await e.post("pin/remote/rm",{timeout:r,signal:n,headers:o,searchParams:Zr({...s,all:!0})})}}function Vp(e){return async function({timeout:r,signal:n,headers:o,...s}){await e.post("pin/remote/rm",{timeout:r,signal:n,headers:o,searchParams:Zr({...s,all:!1})})}}function Hp(e){let t=String(e);if(t==="undefined")throw Error("endpoint is required");return t[t.length-1]==="/"?t.slice(0,-1):t}function jp(e){let t={service:e.Service,endpoint:new URL(e.ApiEndpoint)};return e.Stat!=null&&(t.stat=P1(e.Stat)),t}function P1(e){switch(e.Status){case"valid":{let{Pinning:t,Pinned:r,Queued:n,Failed:o}=e.PinCount;return{status:"valid",pinCount:{queued:n,pinning:t,pinned:r,failed:o}}}case"invalid":return{status:"invalid"};default:return{status:e.Status}}}function qp(e){return async function(r,n){let{endpoint:o,key:s,headers:i,timeout:a,signal:c}=n;await e.post("pin/remote/service/add",{timeout:a,signal:c,searchParams:h({arg:[r,Hp(o),s]}),headers:i})}}function zp(e){return async function(r={}){let{stat:n,headers:o,timeout:s,signal:i}=r;return(await(await e.post("pin/remote/service/ls",{timeout:s,signal:i,headers:o,searchParams:n===!0?h({stat:n}):void 0})).json()).RemoteServices.map(jp)}}function Gp(e){return async function(r,n={}){await e.post("pin/remote/service/rm",{signal:n.signal,headers:n.headers,searchParams:h({arg:r})})}}function Wp(e){return{add:qp(e),ls:zp(e),rm:Gp(e)}}function Zp(e){return{add:$p(e),ls:Mp(e),rm:Vp(e),rmAll:Fp(e),service:Wp(e)}}function ws(e){return async function*(r,n={}){for await(let{path:o,recursive:s}of ms(r)){let i=new URLSearchParams(n.searchParams);i.append("arg",`${o}`),s!=null&&i.set("recursive",String(s));let a=await e.post("pin/rm",{signal:n.signal,headers:n.headers,searchParams:h({...n,arg:`${o}`,recursive:s})});for await(let c of a.ndjson()){if(c.Pins!=null){yield*c.Pins.map(u=>I.parse(u));continue}yield I.parse(c)}}}}function Yp(e){let t=ws(e);return async function(n,o={}){let s=await _t(t([{path:n.toString(),...o}],o));if(s==null)throw new Error("No response received");return s}}function Xp(e){return async function(r,n,o={}){let s=await e.post("pin/update",{signal:o.signal,searchParams:h({...o,arg:[r.toString(),n.toString()]}),headers:o.headers}),{Pins:i}=await s.json();return i.map(a=>I.parse(a))}}function Cc(e){return{addAll:ys(e),add:Rp(e),ls:kp(e),rmAll:ws(e),rm:Yp(e),update:Xp(e),remote:Zp(e)}}function Jp(e){return async function*(r,n={}){yield*(await e.post("ping",{signal:n.signal,searchParams:h({arg:`${r}`,...n}),headers:n.headers,transform:G})).ndjson()}}var Qp=e=>Array.isArray(e)?e.map(bs):e,bs=e=>q(Yr(e)),Yr=e=>Ft.decode(e),em=e=>BigInt(`0x${q(Ft.decode(e),"base16")}`),Xr=e=>Ft.encode(Y(e));function tm(e){return async function(r={}){let{Strings:n}=await(await e.post("pubsub/ls",{signal:r.signal,searchParams:h(r),headers:r.headers})).json();return Qp(n)??[]}}function rm(e){return async function(r,n={}){let o=await e.post("pubsub/peers",{signal:n.signal,searchParams:h({arg:Xr(r),...n}),headers:n.headers}),{Strings:s}=await o.json();return s??[]}}function nm(e){return async function(r,n,o={}){let s=h({arg:Xr(r),...o}),i=new AbortController,a=pe([i.signal,o.signal]);try{await(await e.post("pubsub/pub",{signal:a,searchParams:s,...await ve([n],i,o.headers)})).text()}finally{a.clear()}}}var T1=or("js-kubo-rpc-client:pubsub:subscribe");function om(e,t){return async function(n,o,s={}){s.signal=t.subscribe(n,o,s.signal);let i,a,c=new Promise((f,l)=>{i=f,a=l}),u=setTimeout(()=>{i()},1e3);return e.post("pubsub/sub",{signal:s.signal,searchParams:h({arg:Xr(n),...s}),headers:s.headers}).catch(f=>{t.unsubscribe(n,o),a(f)}).then(f=>{clearTimeout(u),f!=null&&(_1(f,{onMessage:l=>{if(o!=null){if(typeof o=="function"){o(l);return}typeof o.handleEvent=="function"&&o.handleEvent(l)}},onEnd:()=>{t.unsubscribe(n,o)},onError:s.onError}),i())}),c}}async function _1(e,{onMessage:t,onEnd:r,onError:n}){n=n??T1;try{for await(let o of e.ndjson())try{if(o.from==null)continue;o.from!=null&&o.seqno!=null?t({type:"signed",from:le(o.from),data:Yr(o.data),sequenceNumber:em(o.seqno),topic:bs(o.topicIDs[0]),key:o.key!=null?qd(Yr(o.key??"u")):void 0,signature:Yr(o.signature??"u")}):t({type:"unsigned",data:Yr(o.data),topic:bs(o.topicIDs[0])})}catch(s){s.message=`Failed to parse pubsub message: ${s.message}`,n(s,!1,o)}}catch(o){U1(o)||n(o,!0)}finally{r()}}var U1=e=>{switch(e.type){case"aborted":return!0;case"abort":return!0;default:return e.name==="AbortError"}};var xs=class{_subs;constructor(){this._subs=new Map}subscribe(t,r,n){let o=this._subs.get(t)??[];if(o.find(i=>i.handler===r)!=null)throw new Error(`Already subscribed to ${t} with this handler`);let s=new AbortController;return this._subs.set(t,[{handler:r,controller:s}].concat(o)),n?.addEventListener("abort",()=>{this.unsubscribe(t,r)}),s.signal}unsubscribe(t,r){let n=this._subs.get(t)??[],o;r!=null?(this._subs.set(t,n.filter(s=>s.handler!==r)),o=n.filter(s=>s.handler===r)):(this._subs.set(t,[]),o=n),(this._subs.get(t)??[]).length===0&&this._subs.delete(t),o.forEach(s=>{s.controller.abort()})}};function sm(e,t){return async function(n,o){t.unsubscribe(n,o)}}var D1="StrictSign",R1="StrictNoSign";function Ic(e){let t=new xs;return{ls:tm(e),peers:rm(e),publish:nm(e),subscribe:om(e,t),unsubscribe:sm(e,t)}}function im(e){return async function*(r={}){yield*(await e.post("refs/local",{signal:r.signal,transform:G,searchParams:h(r),headers:r.headers})).ndjson()}}function Bc(e){async function*t(r,n={}){let o=Array.isArray(r)?r:[r];yield*(await e.post("refs",{signal:n.signal,searchParams:h({arg:o.map(i=>`${i instanceof Uint8Array?I.decode(i):i}`),...n}),headers:n.headers,transform:G})).ndjson()}return Object.assign(t,{local:im(e)})}function am(e){return async function*(r={}){yield*(await e.post("repo/gc",{signal:r.signal,searchParams:h(r),headers:r.headers,transform:o=>({err:o.Error!=null?new Error(o.Error):null,cid:o.Key?.["/"]!=null?I.parse(o.Key["/"]):null})})).ndjson()}}function Es(e){return async function(r={}){let o=await(await e.post("repo/stat",{signal:r.signal,searchParams:h(r),headers:r.headers})).json();return{numObjects:BigInt(o.NumObjects),repoSize:BigInt(o.RepoSize),repoPath:o.RepoPath,version:o.Version,storageMax:BigInt(o.StorageMax)}}}function cm(e){return async function(r={}){return(await(await e.post("repo/version",{signal:r.signal,searchParams:h(r),headers:r.headers})).json()).Version}}function Pc(e){return{gc:am(e),stat:Es(e),version:cm(e)}}function fm(e){return async function(r,n={}){let o=await e.post("resolve",{signal:n.signal,searchParams:h({arg:r,...n}),headers:n.headers}),{Path:s}=await o.json();return s}}function um(e){return async function*(r,n={}){let o=await e.post("routing/findpeer",{signal:n.signal,searchParams:h({arg:r.toString(),stream:!0,...n}),headers:n.headers});for await(let s of o.ndjson())yield He(s)}}function lm(e){return async function*(r,n={}){let o=await e.post("routing/findprovs",{signal:n.signal,searchParams:h({arg:r.toString(),...n}),headers:n.headers});for await(let s of o.ndjson())yield He(s)}}function dm(e){return async function*(r,n={}){let o=await e.post("routing/get",{signal:n.signal,searchParams:h({arg:r instanceof Uint8Array?q(r):r.toString(),...n}),headers:n.headers});for await(let s of o.ndjson())yield He(s)}}function hm(e){return async function*(r,n={recursive:!1}){let o=Array.isArray(r)?r:[r],s=await e.post("routing/provide",{signal:n.signal,searchParams:h({arg:o.map(i=>i.toString()),...n}),headers:n.headers});for await(let i of s.ndjson())yield He(i)}}function pm(e){return async function*(r,n,o={}){let s=new AbortController,i=pe([s.signal,o.signal]);try{let a=await e.post("routing/put",{signal:i,searchParams:h({arg:r instanceof Uint8Array?q(r):r.toString(),stream:!0,...o}),...await ve([n],s,o.headers)});for await(let c of a.ndjson())yield He(c)}finally{i.clear()}}}function Tc(e){return{findPeer:um(e),findProvs:lm(e),get:dm(e),provide:hm(e),put:pm(e)}}function mm(e){return async function*(r={}){yield*(await e.post("stats/bw",{signal:r.signal,searchParams:h(r),headers:r.headers,transform:o=>({totalIn:BigInt(o.TotalIn),totalOut:BigInt(o.TotalOut),rateIn:parseFloat(o.RateIn),rateOut:parseFloat(o.RateOut)})})).ndjson()}}function _c(e){return{bitswap:Qo(e),repo:Es(e),bw:mm(e)}}function ym(e){return async function(r={}){await(await e.post("shutdown",{signal:r.signal,searchParams:h(r),headers:r.headers})).text()}}function gm(e){return async function(r={}){let n=await e.post("swarm/addrs",{signal:r.signal,searchParams:h(r),headers:r.headers}),{Addrs:o}=await n.json();return Object.keys(o).map(s=>({id:le(s),addrs:(o[s]??[]).map(i=>Q(i))}))}}function wm(e){return async function(r,n={}){let o=await e.post("swarm/connect",{signal:n.signal,searchParams:h({arg:r,...n}),headers:n.headers}),{Strings:s}=await o.json();return s??[]}}function bm(e){return async function(r,n={}){let o=await e.post("swarm/disconnect",{signal:n.signal,searchParams:h({arg:r,...n}),headers:n.headers}),{Strings:s}=await o.json();return s??[]}}function xm(e){return async function(r={}){let n=await e.post("swarm/addrs/local",{signal:r.signal,searchParams:h(r),headers:r.headers}),{Strings:o}=await n.json();return(o??[]).map(s=>Q(s))}}function Em(e){return async function(r={}){return((await(await e.post("swarm/peers",{signal:r.signal,searchParams:h(r),headers:r.headers})).json()).Peers??[]).map(s=>({addr:Q(s.Addr),peer:le(s.Peer),muxer:s.Muxer,latency:s.Latency,streams:s.Streams,direction:s.Direction==null?void 0:s.Direction===0?"inbound":"outbound",identify:s.Identify}))}}function Uc(e){return{addrs:gm(e),connect:wm(e),disconnect:bm(e),localAddrs:xm(e),peers:Em(e)}}function Sm(e){return async function(r={}){let n=await e.post("version",{signal:r.signal,searchParams:h(r),headers:r.headers});return{...G(await n.json()),"ipfs-http-client":"1.0.0"}}}var Dc=class{bases;codecs;hashers;bitswap;block;bootstrap;config;dag;dht;diag;files;key;log;name;object;pin;pubsub;refs;repo;routing;stats;swarm;add;addAll;cat;get;ls;id;version;stop;ping;resolve;commands;mount;isOnline;getEndpointConfig;constructor(t){let r=new us(t),n={name:Pe.name,code:Pe.code,encode:a=>a,decode:a=>a},o=Object.values(Vt);(t.ipld?.bases??[]).forEach(a=>o.push(a)),this.bases=new ls({bases:o,loadBase:t.ipld?.loadBase});let s=Object.values(rf);[Ri,ho,Pi,Hi,n].concat(t.ipld?.codecs??[]).forEach(a=>{s.push(a)}),this.codecs=new ds({codecs:s,loadCodec:t.ipld?.loadCodec});let i=Object.values(tf);(t.ipld?.hashers??[]).forEach(a=>i.push(a)),this.hashers=new hs({hashers:i,loadHasher:t.ipld?.loadHasher}),this.bitswap=tc(r),this.block=rc(r),this.bootstrap=nc(r),this.config=oc(r),this.dag=ac(r,this.codecs),this.dht=uc(r),this.diag=lc(r),this.files=hc(r),this.key=pc(r),this.log=Sc(r),this.name=Ac(r),this.object=vc(r,this.codecs),this.pin=Cc(r),this.pubsub=Ic(r),this.refs=Bc(r),this.repo=Pc(r),this.routing=Tc(r),this.stats=_c(r),this.swarm=Uc(r),this.add=Al(r),this.addAll=vo(r),this.cat=oh(r),this.get=Rh(r),this.ls=Sp(r),this.id=rs(r),this.version=Sm(r),this.stop=ym(r),this.ping=Jp(r),this.resolve=fm(r),this.commands=sh(r),this.mount=Ap(r),this.isOnline=Nh(r),this.getEndpointConfig=Dh(r)}};function Am(e){return new Dc(e)}function N1(e={}){return(typeof e=="string"||jt(e)||e instanceof URL)&&(e={url:e}),Am(e)}function k1(e,t){return{path:decodeURIComponent(new URL(e).pathname.split("/").pop()??""),content:vm(e,t)}}async function*vm(e,t){yield*(await Je.get(e,t)).iterator()}return _m(L1);})();
/*! Bundled license information:

@noble/hashes/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/utils.js:
@noble/curves/abstract/modular.js:
@noble/curves/abstract/curve.js:
@noble/curves/abstract/edwards.js:
@noble/curves/ed25519.js:
@noble/curves/abstract/weierstrass.js:
@noble/curves/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
return KuboRpcClient}));
//# sourceMappingURL=index.min.js.map
